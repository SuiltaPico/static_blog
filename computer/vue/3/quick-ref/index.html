<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.32">
    <title>Vue 3 快速参考 | Suilta Pico 的博客</title><meta name="description" content="一份简洁而全面的参考文档">
    <link rel="modulepreload" href="/static_blog/assets/app.45bb761f.js"><link rel="modulepreload" href="/static_blog/assets/index.html.8507bf22.js"><link rel="modulepreload" href="/static_blog/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/static_blog/assets/index.html.e6a44da4.js">
    <link rel="stylesheet" href="/static_blog/assets/style.b62f34f8.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/static_blog/" class=""><!----><span class="site-name">Suilta Pico 的博客</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-dark-button" title="切换大日御舆"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p class="sidebar-item sidebar-heading">Vue 3 快速参考 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#申明" class="router-link-active router-link-exact-active sidebar-item" aria-label="申明"><!--[--><!--]--> 申明 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#作者的话" class="router-link-active router-link-exact-active sidebar-item" aria-label="作者的话"><!--[--><!--]--> 作者的话 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#文章意义" class="router-link-active router-link-exact-active sidebar-item" aria-label="文章意义"><!--[--><!--]--> 文章意义 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#本文适用情况" class="router-link-active router-link-exact-active sidebar-item" aria-label="本文适用情况"><!--[--><!--]--> 本文适用情况 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#文章错误报告" class="router-link-active router-link-exact-active sidebar-item" aria-label="文章错误报告"><!--[--><!--]--> 文章错误报告 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#应用及其实例" class="router-link-active router-link-exact-active sidebar-item" aria-label="应用及其实例"><!--[--><!--]--> 应用及其实例 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#挂载-mount-应用" class="router-link-active router-link-exact-active sidebar-item" aria-label="挂载（mount）应用"><!--[--><!--]--> 挂载（mount）应用 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="组件"><!--[--><!--]--> 组件 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#组件命名" class="router-link-active router-link-exact-active sidebar-item" aria-label="组件命名"><!--[--><!--]--> 组件命名 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#组件注册" class="router-link-active router-link-exact-active sidebar-item" aria-label="组件注册"><!--[--><!--]--> 组件注册 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#全局注册" class="router-link-active router-link-exact-active sidebar-item" aria-label="全局注册"><!--[--><!--]--> 全局注册 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#局部注册" class="router-link-active router-link-exact-active sidebar-item" aria-label="局部注册"><!--[--><!--]--> 局部注册 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#在模块系统中局部注册" class="router-link-active router-link-exact-active sidebar-item" aria-label="在模块系统中局部注册"><!--[--><!--]--> 在模块系统中局部注册 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#组件性质" class="router-link-active router-link-exact-active sidebar-item" aria-label="组件性质"><!--[--><!--]--> 组件性质 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#可复用性" class="router-link-active router-link-exact-active sidebar-item" aria-label="可复用性"><!--[--><!--]--> 可复用性 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#选项" class="router-link-active router-link-exact-active sidebar-item" aria-label="选项"><!--[--><!--]--> 选项 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#计算属性" class="router-link-active router-link-exact-active sidebar-item" aria-label="计算属性"><!--[--><!--]--> 计算属性 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#计算属性的缓存" class="router-link-active router-link-exact-active sidebar-item" aria-label="计算属性的缓存"><!--[--><!--]--> 计算属性的缓存 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#计算属性的-setter" class="router-link-active router-link-exact-active sidebar-item" aria-label="计算属性的 Setter"><!--[--><!--]--> 计算属性的 Setter <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#侦听器" class="router-link-active router-link-exact-active sidebar-item" aria-label="侦听器"><!--[--><!--]--> 侦听器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#组件实例" class="router-link-active router-link-exact-active sidebar-item" aria-label="组件实例"><!--[--><!--]--> 组件实例 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#根组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="根组件"><!--[--><!--]--> 根组件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#组件树" class="router-link-active router-link-exact-active sidebar-item" aria-label="组件树"><!--[--><!--]--> 组件树 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#property" class="router-link-active router-link-exact-active sidebar-item" aria-label="Property"><!--[--><!--]--> Property <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#生命周期" class="router-link-active router-link-exact-active sidebar-item" aria-label="生命周期"><!--[--><!--]--> 生命周期 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#生命周期钩子" class="router-link-active router-link-exact-active sidebar-item" aria-label="生命周期钩子"><!--[--><!--]--> 生命周期钩子 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#prop" class="router-link-active router-link-exact-active sidebar-item" aria-label="Prop"><!--[--><!--]--> Prop <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#prop-声明" class="router-link-active router-link-exact-active sidebar-item" aria-label="Prop 声明"><!--[--><!--]--> Prop 声明 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#传递-prop" class="router-link-active router-link-exact-active sidebar-item" aria-label="传递 Prop"><!--[--><!--]--> 传递 Prop <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#prop-的单向下行绑定的约定" class="router-link-active router-link-exact-active sidebar-item" aria-label="Prop 的单向下行绑定的约定"><!--[--><!--]--> Prop 的单向下行绑定的约定 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#prop-验证" class="router-link-active router-link-exact-active sidebar-item" aria-label="Prop 验证"><!--[--><!--]--> Prop 验证 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#非-prop-的-attribute" class="router-link-active router-link-exact-active sidebar-item" aria-label="非 Prop 的 Attribute"><!--[--><!--]--> 非 Prop 的 Attribute <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#访问-attribute" class="router-link-active router-link-exact-active sidebar-item" aria-label="访问 Attribute"><!--[--><!--]--> 访问 Attribute <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#attribute-继承" class="router-link-active router-link-exact-active sidebar-item" aria-label="Attribute 继承"><!--[--><!--]--> Attribute 继承 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#动态组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="动态组件"><!--[--><!--]--> 动态组件 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#保留组件状态" class="router-link-active router-link-exact-active sidebar-item" aria-label="保留组件状态"><!--[--><!--]--> 保留组件状态 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#异步组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="异步组件"><!--[--><!--]--> 异步组件 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#模板语法" class="router-link-active router-link-exact-active sidebar-item" aria-label="模板语法"><!--[--><!--]--> 模板语法 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#插值" class="router-link-active router-link-exact-active sidebar-item" aria-label="插值"><!--[--><!--]--> 插值 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#概念" class="router-link-active router-link-exact-active sidebar-item" aria-label="概念"><!--[--><!--]--> 概念 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#模板表达式" class="router-link-active router-link-exact-active sidebar-item" aria-label="模板表达式"><!--[--><!--]--> 模板表达式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#文本插值" class="router-link-active router-link-exact-active sidebar-item" aria-label="文本插值"><!--[--><!--]--> 文本插值 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#原始-html-插值" class="router-link-active router-link-exact-active sidebar-item" aria-label="原始 HTML 插值"><!--[--><!--]--> 原始 HTML 插值 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#attribute-插值" class="router-link-active router-link-exact-active sidebar-item" aria-label="Attribute 插值"><!--[--><!--]--> Attribute 插值 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#指令" class="router-link-active router-link-exact-active sidebar-item" aria-label="指令"><!--[--><!--]--> 指令 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#指令的值" class="router-link-active router-link-exact-active sidebar-item" aria-label="指令的值"><!--[--><!--]--> 指令的值 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#指令参数" class="router-link-active router-link-exact-active sidebar-item" aria-label="指令参数"><!--[--><!--]--> 指令参数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#动态参数" class="router-link-active router-link-exact-active sidebar-item" aria-label="动态参数"><!--[--><!--]--> 动态参数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#修饰符" class="router-link-active router-link-exact-active sidebar-item" aria-label="修饰符"><!--[--><!--]--> 修饰符 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#指令缩写" class="router-link-active router-link-exact-active sidebar-item" aria-label="指令缩写"><!--[--><!--]--> 指令缩写 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#自定义指令" class="router-link-active router-link-exact-active sidebar-item" aria-label="自定义指令"><!--[--><!--]--> 自定义指令 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#模板引用" class="router-link-active router-link-exact-active sidebar-item" aria-label="模板引用"><!--[--><!--]--> 模板引用 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#引用-html-元素" class="router-link-active router-link-exact-active sidebar-item" aria-label="引用 HTML 元素"><!--[--><!--]--> 引用 HTML 元素 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#引用组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="引用组件"><!--[--><!--]--> 引用组件 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#class-与-style-绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="Class 与 Style 绑定"><!--[--><!--]--> Class 与 Style 绑定 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#绑定-html-class" class="router-link-active router-link-exact-active sidebar-item" aria-label="绑定 HTML Class"><!--[--><!--]--> 绑定 HTML Class <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#对象语法" class="router-link-active router-link-exact-active sidebar-item" aria-label="对象语法"><!--[--><!--]--> 对象语法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#数组语法" class="router-link-active router-link-exact-active sidebar-item" aria-label="数组语法"><!--[--><!--]--> 数组语法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#class-与-class-共存" class="router-link-active router-link-exact-active sidebar-item" aria-label=":class 与 class 共存"><!--[--><!--]--> :class 与 class 共存 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#元素的-class-与单根元素的自定义组件的-class、-class-共存" class="router-link-active router-link-exact-active sidebar-item" aria-label="元素的 class 与单根元素的自定义组件的 class、:class 共存"><!--[--><!--]--> 元素的 class 与单根元素的自定义组件的 class、:class 共存 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#绑定内联样式" class="router-link-active router-link-exact-active sidebar-item" aria-label="绑定内联样式"><!--[--><!--]--> 绑定内联样式 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#对象语法-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="对象语法"><!--[--><!--]--> 对象语法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#数组语法-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="数组语法"><!--[--><!--]--> 数组语法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#样式自动添加前缀" class="router-link-active router-link-exact-active sidebar-item" aria-label="样式自动添加前缀"><!--[--><!--]--> 样式自动添加前缀 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#多重值" class="router-link-active router-link-exact-active sidebar-item" aria-label="多重值"><!--[--><!--]--> 多重值 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#条件渲染" class="router-link-active router-link-exact-active sidebar-item" aria-label="条件渲染"><!--[--><!--]--> 条件渲染 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#v-if" class="router-link-active router-link-exact-active sidebar-item" aria-label="v-if"><!--[--><!--]--> v-if <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#条件渲染分组" class="router-link-active router-link-exact-active sidebar-item" aria-label="条件渲染分组"><!--[--><!--]--> 条件渲染分组 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#v-else" class="router-link-active router-link-exact-active sidebar-item" aria-label="v-else"><!--[--><!--]--> v-else <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#v-else-if" class="router-link-active router-link-exact-active sidebar-item" aria-label="v-else-if"><!--[--><!--]--> v-else-if <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#v-show" class="router-link-active router-link-exact-active sidebar-item" aria-label="v-show"><!--[--><!--]--> v-show <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#列表渲染" class="router-link-active router-link-exact-active sidebar-item" aria-label="列表渲染"><!--[--><!--]--> 列表渲染 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#把数组映射为一组元素" class="router-link-active router-link-exact-active sidebar-item" aria-label="把数组映射为一组元素"><!--[--><!--]--> 把数组映射为一组元素 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#把对象映射为一组元素" class="router-link-active router-link-exact-active sidebar-item" aria-label="把对象映射为一组元素"><!--[--><!--]--> 把对象映射为一组元素 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#设定范围以渲染一组元素" class="router-link-active router-link-exact-active sidebar-item" aria-label="设定范围以渲染一组元素"><!--[--><!--]--> 设定范围以渲染一组元素 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#维护状态" class="router-link-active router-link-exact-active sidebar-item" aria-label="维护状态"><!--[--><!--]--> 维护状态 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#列表就地更新策略" class="router-link-active router-link-exact-active sidebar-item" aria-label="列表就地更新策略"><!--[--><!--]--> 列表就地更新策略 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#使用-key-attribute-跟踪以重用元素" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用 key attribute 跟踪以重用元素"><!--[--><!--]--> 使用 key attribute 跟踪以重用元素 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#循环渲染一段包含多个元素的内容" class="router-link-active router-link-exact-active sidebar-item" aria-label="循环渲染一段包含多个元素的内容"><!--[--><!--]--> 循环渲染一段包含多个元素的内容 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#数组更新检测的情况" class="router-link-active router-link-exact-active sidebar-item" aria-label="数组更新检测的情况"><!--[--><!--]--> 数组更新检测的情况 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#调用使数组变更的方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="调用使数组变更的方法"><!--[--><!--]--> 调用使数组变更的方法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#数组被替换" class="router-link-active router-link-exact-active sidebar-item" aria-label="数组被替换"><!--[--><!--]--> 数组被替换 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#显示数组被处理后的结果" class="router-link-active router-link-exact-active sidebar-item" aria-label="显示数组被处理后的结果"><!--[--><!--]--> 显示数组被处理后的结果 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#v-for-与-v-if-的优先级" class="router-link-active router-link-exact-active sidebar-item" aria-label="v-for 与 v-if 的优先级"><!--[--><!--]--> v-for 与 v-if 的优先级 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#事件" class="router-link-active router-link-exact-active sidebar-item" aria-label="事件"><!--[--><!--]--> 事件 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#自定义事件" class="router-link-active router-link-exact-active sidebar-item" aria-label="自定义事件"><!--[--><!--]--> 自定义事件 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#事件名" class="router-link-active router-link-exact-active sidebar-item" aria-label="事件名"><!--[--><!--]--> 事件名 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#定义自定义事件" class="router-link-active router-link-exact-active sidebar-item" aria-label="定义自定义事件"><!--[--><!--]--> 定义自定义事件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#验证抛出的事件" class="router-link-active router-link-exact-active sidebar-item" aria-label="验证抛出的事件"><!--[--><!--]--> 验证抛出的事件 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#监听事件" class="router-link-active router-link-exact-active sidebar-item" aria-label="监听事件"><!--[--><!--]--> 监听事件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#内联处理器中的方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="内联处理器中的方法"><!--[--><!--]--> 内联处理器中的方法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#多事件处理器" class="router-link-active router-link-exact-active sidebar-item" aria-label="多事件处理器"><!--[--><!--]--> 多事件处理器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#事件修饰符" class="router-link-active router-link-exact-active sidebar-item" aria-label="事件修饰符"><!--[--><!--]--> 事件修饰符 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#按键修饰符" class="router-link-active router-link-exact-active sidebar-item" aria-label="按键修饰符"><!--[--><!--]--> 按键修饰符 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#按键别名" class="router-link-active router-link-exact-active sidebar-item" aria-label="按键别名"><!--[--><!--]--> 按键别名 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#系统修饰键" class="router-link-active router-link-exact-active sidebar-item" aria-label="系统修饰键"><!--[--><!--]--> 系统修饰键 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#exact-修饰符" class="router-link-active router-link-exact-active sidebar-item" aria-label=".exact 修饰符"><!--[--><!--]--> .exact 修饰符 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#鼠标按钮修饰符" class="router-link-active router-link-exact-active sidebar-item" aria-label="鼠标按钮修饰符"><!--[--><!--]--> 鼠标按钮修饰符 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#触发事件" class="router-link-active router-link-exact-active sidebar-item" aria-label="触发事件"><!--[--><!--]--> 触发事件 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#使用事件抛出一个值" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用事件抛出一个值"><!--[--><!--]--> 使用事件抛出一个值 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#v-model-原理" class="router-link-active router-link-exact-active sidebar-item" aria-label="v-model 原理"><!--[--><!--]--> v-model 原理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#自定义-v-model" class="router-link-active router-link-exact-active sidebar-item" aria-label="自定义 v-model"><!--[--><!--]--> 自定义 v-model <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#让组件支持使用-v-model" class="router-link-active router-link-exact-active sidebar-item" aria-label="让组件支持使用 v-model"><!--[--><!--]--> 让组件支持使用 v-model <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#自定义-v-model-参数与多个-v-model-绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="自定义 v-model 参数与多个 v-model 绑定"><!--[--><!--]--> 自定义 v-model 参数与多个 v-model 绑定 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#处理-v-model-修饰符" class="router-link-active router-link-exact-active sidebar-item" aria-label="处理 v-model 修饰符"><!--[--><!--]--> 处理 v-model 修饰符 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#表单输入绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="表单输入绑定"><!--[--><!--]--> 表单输入绑定 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#使用-v-model-创建双向数据绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用 v-model 创建双向数据绑定"><!--[--><!--]--> 使用 v-model 创建双向数据绑定 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#设置初始项的正确方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="设置初始项的正确方法"><!--[--><!--]--> 设置初始项的正确方法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#v-model-对不同元素的处理" class="router-link-active router-link-exact-active sidebar-item" aria-label="v-model 对不同元素的处理"><!--[--><!--]--> v-model 对不同元素的处理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#在输入法组织文字的过程中得到更新" class="router-link-active router-link-exact-active sidebar-item" aria-label="在输入法组织文字的过程中得到更新"><!--[--><!--]--> 在输入法组织文字的过程中得到更新 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#v-model-在各表单元素的使用方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="v-model 在各表单元素的使用方法"><!--[--><!--]--> v-model 在各表单元素的使用方法 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#文本-text" class="router-link-active router-link-exact-active sidebar-item" aria-label="文本 (Text)"><!--[--><!--]--> 文本 (Text) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#多行文本-textarea" class="router-link-active router-link-exact-active sidebar-item" aria-label="多行文本 (Textarea)"><!--[--><!--]--> 多行文本 (Textarea) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#复选框-checkbox" class="router-link-active router-link-exact-active sidebar-item" aria-label="复选框 (Checkbox)"><!--[--><!--]--> 复选框 (Checkbox) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#单选框-radio" class="router-link-active router-link-exact-active sidebar-item" aria-label="单选框 (Radio)"><!--[--><!--]--> 单选框 (Radio) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#选择框-select" class="router-link-active router-link-exact-active sidebar-item" aria-label="选择框 (Select)"><!--[--><!--]--> 选择框 (Select) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#值绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="值绑定"><!--[--><!--]--> 值绑定 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#复选框-checkbox-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="复选框 (Checkbox)"><!--[--><!--]--> 复选框 (Checkbox) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#单选框-radio-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="单选框 (Radio)"><!--[--><!--]--> 单选框 (Radio) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#选择框选项-select-options" class="router-link-active router-link-exact-active sidebar-item" aria-label="选择框选项 (Select Options)"><!--[--><!--]--> 选择框选项 (Select Options) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#表单修饰符" class="router-link-active router-link-exact-active sidebar-item" aria-label="表单修饰符"><!--[--><!--]--> 表单修饰符 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#lazy" class="router-link-active router-link-exact-active sidebar-item" aria-label=".lazy"><!--[--><!--]--> .lazy <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#number" class="router-link-active router-link-exact-active sidebar-item" aria-label=".number"><!--[--><!--]--> .number <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#trim" class="router-link-active router-link-exact-active sidebar-item" aria-label=".trim"><!--[--><!--]--> .trim <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#在组件上使用-v-model" class="router-link-active router-link-exact-active sidebar-item" aria-label="在组件上使用 v-model"><!--[--><!--]--> 在组件上使用 v-model <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#插槽" class="router-link-active router-link-exact-active sidebar-item" aria-label="插槽"><!--[--><!--]--> 插槽 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#通过-slot-直接分发内容" class="router-link-active router-link-exact-active sidebar-item" aria-label="通过 &lt;slot&gt; 直接分发内容"><!--[--><!--]--> 通过 &lt;slot&gt; 直接分发内容 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#插槽的渲染作用域" class="router-link-active router-link-exact-active sidebar-item" aria-label="插槽的渲染作用域"><!--[--><!--]--> 插槽的渲染作用域 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#备用内容" class="router-link-active router-link-exact-active sidebar-item" aria-label="备用内容"><!--[--><!--]--> 备用内容 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#具名插槽" class="router-link-active router-link-exact-active sidebar-item" aria-label="具名插槽"><!--[--><!--]--> 具名插槽 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#具名插槽的声明" class="router-link-active router-link-exact-active sidebar-item" aria-label="具名插槽的声明"><!--[--><!--]--> 具名插槽的声明 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#具名插槽的内容提供" class="router-link-active router-link-exact-active sidebar-item" aria-label="具名插槽的内容提供"><!--[--><!--]--> 具名插槽的内容提供 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#动态插槽名" class="router-link-active router-link-exact-active sidebar-item" aria-label="动态插槽名"><!--[--><!--]--> 动态插槽名 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#作用域插槽" class="router-link-active router-link-exact-active sidebar-item" aria-label="作用域插槽"><!--[--><!--]--> 作用域插槽 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#在-javascript-里读取插槽" class="router-link-active router-link-exact-active sidebar-item" aria-label="在 JavaScript 里读取插槽"><!--[--><!--]--> 在 JavaScript 里读取插槽 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#provide-inject" class="router-link-active router-link-exact-active sidebar-item" aria-label="Provide / Inject"><!--[--><!--]--> Provide / Inject <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#组合式-provide-inject" class="router-link-active router-link-exact-active sidebar-item" aria-label="组合式 Provide / Inject"><!--[--><!--]--> 组合式 Provide / Inject <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#使用-provide-提供数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用 provide 提供数据"><!--[--><!--]--> 使用 provide 提供数据 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#使用-inject-接收数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用 inject 接收数据"><!--[--><!--]--> 使用 inject 接收数据 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#为值添加响应性" class="router-link-active router-link-exact-active sidebar-item" aria-label="为值添加响应性"><!--[--><!--]--> 为值添加响应性 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#控制-inject-值的可访问性" class="router-link-active router-link-exact-active sidebar-item" aria-label="控制 inject 值的可访问性"><!--[--><!--]--> 控制 inject 值的可访问性 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#处理边界情况" class="router-link-active router-link-exact-active sidebar-item" aria-label="处理边界情况"><!--[--><!--]--> 处理边界情况 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#过渡与动画" class="router-link-active router-link-exact-active sidebar-item" aria-label="过渡与动画"><!--[--><!--]--> 过渡与动画 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#mixin" class="router-link-active router-link-exact-active sidebar-item" aria-label="Mixin"><!--[--><!--]--> Mixin <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#teleport" class="router-link-active router-link-exact-active sidebar-item" aria-label="Teleport"><!--[--><!--]--> Teleport <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#使用-teleport-把元素送走" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用 &lt;teleport&gt; 把元素送走"><!--[--><!--]--> 使用 &lt;teleport&gt; 把元素送走 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#控制-teleport-的可用性" class="router-link-active router-link-exact-active sidebar-item" aria-label="控制 &lt;teleport&gt; 的可用性"><!--[--><!--]--> 控制 &lt;teleport&gt; 的可用性 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#响应式" class="router-link-active router-link-exact-active sidebar-item" aria-label="响应式"><!--[--><!--]--> 响应式 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#响应式原理与-vue-工作的原理" class="router-link-active router-link-exact-active sidebar-item" aria-label="响应式原理与 Vue 工作的原理"><!--[--><!--]--> 响应式原理与 Vue 工作的原理 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#什么是响应性" class="router-link-active router-link-exact-active sidebar-item" aria-label="什么是响应性"><!--[--><!--]--> 什么是响应性 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#vue-检测哪些代码正在运行的方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="Vue 检测哪些代码正在运行的方法"><!--[--><!--]--> Vue 检测哪些代码正在运行的方法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#vue-是如何跟踪变化的" class="router-link-active router-link-exact-active sidebar-item" aria-label="Vue 是如何跟踪变化的"><!--[--><!--]--> Vue 是如何跟踪变化的 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#同时使用原始对象与其响应式版本带来的问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="同时使用原始对象与其响应式版本带来的问题"><!--[--><!--]--> 同时使用原始对象与其响应式版本带来的问题 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#如何让渲染响应变化" class="router-link-active router-link-exact-active sidebar-item" aria-label="如何让渲染响应变化"><!--[--><!--]--> 如何让渲染响应变化 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#响应式状态" class="router-link-active router-link-exact-active sidebar-item" aria-label="响应式状态"><!--[--><!--]--> 响应式状态 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#声明响应式状态" class="router-link-active router-link-exact-active sidebar-item" aria-label="声明响应式状态"><!--[--><!--]--> 声明响应式状态 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#响应式状态解构" class="router-link-active router-link-exact-active sidebar-item" aria-label="响应式状态解构"><!--[--><!--]--> 响应式状态解构 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#获取响应式对象的只读对象" class="router-link-active router-link-exact-active sidebar-item" aria-label="获取响应式对象的只读对象"><!--[--><!--]--> 获取响应式对象的只读对象 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#响应式引用" class="router-link-active router-link-exact-active sidebar-item" aria-label="响应式引用"><!--[--><!--]--> 响应式引用 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#创建响应式引用" class="router-link-active router-link-exact-active sidebar-item" aria-label="创建响应式引用"><!--[--><!--]--> 创建响应式引用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#自动解包" class="router-link-active router-link-exact-active sidebar-item" aria-label="自动解包"><!--[--><!--]--> 自动解包 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#响应式计算" class="router-link-active router-link-exact-active sidebar-item" aria-label="响应式计算"><!--[--><!--]--> 响应式计算 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#计算值" class="router-link-active router-link-exact-active sidebar-item" aria-label="计算值"><!--[--><!--]--> 计算值 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#调试-computed" class="router-link-active router-link-exact-active sidebar-item" aria-label="调试 Computed"><!--[--><!--]--> 调试 Computed <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#使用-watcheffect-侦听" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用 watchEffect 侦听"><!--[--><!--]--> 使用 watchEffect 侦听 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#侦听依赖变更" class="router-link-active router-link-exact-active sidebar-item" aria-label="侦听依赖变更"><!--[--><!--]--> 侦听依赖变更 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#回调失效的处理" class="router-link-active router-link-exact-active sidebar-item" aria-label="回调失效的处理"><!--[--><!--]--> 回调失效的处理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#副作用的刷新时机" class="router-link-active router-link-exact-active sidebar-item" aria-label="副作用的刷新时机"><!--[--><!--]--> 副作用的刷新时机 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#侦听器调试" class="router-link-active router-link-exact-active sidebar-item" aria-label="侦听器调试"><!--[--><!--]--> 侦听器调试 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#使用-watch-侦听" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用 watch 侦听"><!--[--><!--]--> 使用 watch 侦听 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#侦听单个数据源" class="router-link-active router-link-exact-active sidebar-item" aria-label="侦听单个数据源"><!--[--><!--]--> 侦听单个数据源 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#侦听多个数据源" class="router-link-active router-link-exact-active sidebar-item" aria-label="侦听多个数据源"><!--[--><!--]--> 侦听多个数据源 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#侦听响应式对象" class="router-link-active router-link-exact-active sidebar-item" aria-label="侦听响应式对象"><!--[--><!--]--> 侦听响应式对象 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#组合式-api-基础" class="router-link-active router-link-exact-active sidebar-item" aria-label="组合式 API 基础"><!--[--><!--]--> 组合式 API 基础 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#为什么使用组合式-api" class="router-link-active router-link-exact-active sidebar-item" aria-label="为什么使用组合式 API"><!--[--><!--]--> 为什么使用组合式 API <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#响应式变量与引用" class="router-link-active router-link-exact-active sidebar-item" aria-label="响应式变量与引用"><!--[--><!--]--> 响应式变量与引用 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#响应式变量" class="router-link-active router-link-exact-active sidebar-item" aria-label="响应式变量"><!--[--><!--]--> 响应式变量 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#响应式引用-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="响应式引用"><!--[--><!--]--> 响应式引用 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#setup-选项" class="router-link-active router-link-exact-active sidebar-item" aria-label="setup 选项"><!--[--><!--]--> setup 选项 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#参数" class="router-link-active router-link-exact-active sidebar-item" aria-label="参数"><!--[--><!--]--> 参数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#结合模板使用的注意事项" class="router-link-active router-link-exact-active sidebar-item" aria-label="结合模板使用的注意事项"><!--[--><!--]--> 结合模板使用的注意事项 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#生命周期钩子-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="生命周期钩子"><!--[--><!--]--> 生命周期钩子 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#返回渲染函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="返回渲染函数"><!--[--><!--]--> 返回渲染函数 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#侦听响应式更改" class="router-link-active router-link-exact-active sidebar-item" aria-label="侦听响应式更改"><!--[--><!--]--> 侦听响应式更改 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#单文件组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="单文件组件"><!--[--><!--]--> 单文件组件 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#块" class="router-link-active router-link-exact-active sidebar-item" aria-label="块"><!--[--><!--]--> 块 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#语言块" class="router-link-active router-link-exact-active sidebar-item" aria-label="语言块"><!--[--><!--]--> 语言块 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#设置预处理语言" class="router-link-active router-link-exact-active sidebar-item" aria-label="设置预处理语言"><!--[--><!--]--> 设置预处理语言 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#通过-src-引入外部文件" class="router-link-active router-link-exact-active sidebar-item" aria-label="通过 src 引入外部文件"><!--[--><!--]--> 通过 src 引入外部文件 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#单文件组件-script-setup" class="router-link-active router-link-exact-active sidebar-item" aria-label="单文件组件 &lt;script setup&gt;"><!--[--><!--]--> 单文件组件 &lt;script setup&gt; <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#顶层的绑定会被暴露给模板" class="router-link-active router-link-exact-active sidebar-item" aria-label="顶层的绑定会被暴露给模板"><!--[--><!--]--> 顶层的绑定会被暴露给模板 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#响应式-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="响应式"><!--[--><!--]--> 响应式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#使用组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用组件"><!--[--><!--]--> 使用组件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#声明-props-和-emits" class="router-link-active router-link-exact-active sidebar-item" aria-label="声明 props 和 emits"><!--[--><!--]--> 声明 props 和 emits <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#script-setup-的绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="&lt;script setup&gt; 的绑定"><!--[--><!--]--> &lt;script setup&gt; 的绑定 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#获取组件的-slots-和-attrs" class="router-link-active router-link-exact-active sidebar-item" aria-label="获取组件的 slots 和 attrs"><!--[--><!--]--> 获取组件的 slots 和 attrs <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#在-script-setup-顶层直接使用-await" class="router-link-active router-link-exact-active sidebar-item" aria-label="在 &lt;script setup&gt; 顶层直接使用 await"><!--[--><!--]--> 在 &lt;script setup&gt; 顶层直接使用 await <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#单文件组件-style" class="router-link-active router-link-exact-active sidebar-item" aria-label="单文件组件 &lt;style&gt;"><!--[--><!--]--> 单文件组件 &lt;style&gt; <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#style-scoped" class="router-link-active router-link-exact-active sidebar-item" aria-label="&lt;style scoped&gt;"><!--[--><!--]--> &lt;style scoped&gt; <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#style-module" class="router-link-active router-link-exact-active sidebar-item" aria-label="&lt;style module&gt;"><!--[--><!--]--> &lt;style module&gt; <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#让状态驱动-css-动态绑定-css-属性" class="router-link-active router-link-exact-active sidebar-item" aria-label="让状态驱动 CSS / 动态绑定 CSS 属性"><!--[--><!--]--> 让状态驱动 CSS / 动态绑定 CSS 属性 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#sfc-工作原理" class="router-link-active router-link-exact-active sidebar-item" aria-label="SFC 工作原理"><!--[--><!--]--> SFC 工作原理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#为什么要使用-sfc" class="router-link-active router-link-exact-active sidebar-item" aria-label="为什么要使用 SFC"><!--[--><!--]--> 为什么要使用 SFC <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#渲染函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="渲染函数"><!--[--><!--]--> 渲染函数 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#什么情况下要用到渲染函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="什么情况下要用到渲染函数"><!--[--><!--]--> 什么情况下要用到渲染函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#渲染函数-h" class="router-link-active router-link-exact-active sidebar-item" aria-label="渲染函数 h"><!--[--><!--]--> 渲染函数 h <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#渲染函数-h-的参数" class="router-link-active router-link-exact-active sidebar-item" aria-label="渲染函数 h 的参数"><!--[--><!--]--> 渲染函数 h 的参数 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#渲染函数-h-的返回值" class="router-link-active router-link-exact-active sidebar-item" aria-label="渲染函数 h 的返回值"><!--[--><!--]--> 渲染函数 h 的返回值 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#使用-javascript-代替模板功能" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用 JavaScript 代替模板功能"><!--[--><!--]--> 使用 JavaScript 代替模板功能 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#v-if-和-v-for" class="router-link-active router-link-exact-active sidebar-item" aria-label="v-if 和 v-for"><!--[--><!--]--> v-if 和 v-for <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#v-model-指令在渲染函数的写法" class="router-link-active router-link-exact-active sidebar-item" aria-label="v-model 指令在渲染函数的写法"><!--[--><!--]--> v-model 指令在渲染函数的写法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#v-on-指令在渲染函数的写法" class="router-link-active router-link-exact-active sidebar-item" aria-label="v-on 指令在渲染函数的写法"><!--[--><!--]--> v-on 指令在渲染函数的写法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#渲染函数的插槽处理" class="router-link-active router-link-exact-active sidebar-item" aria-label="渲染函数的插槽处理"><!--[--><!--]--> 渲染函数的插槽处理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#渲染函数处理-component" class="router-link-active router-link-exact-active sidebar-item" aria-label="渲染函数处理 &lt;component&gt;"><!--[--><!--]--> 渲染函数处理 &lt;component&gt; <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#让-vnode-应用自定义指令" class="router-link-active router-link-exact-active sidebar-item" aria-label="让 VNode 应用自定义指令"><!--[--><!--]--> 让 VNode 应用自定义指令 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#渲染函数使用内置组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="渲染函数使用内置组件"><!--[--><!--]--> 渲染函数使用内置组件 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#使用-jsx-简化渲染函数的写法" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用 JSX 简化渲染函数的写法"><!--[--><!--]--> 使用 JSX 简化渲染函数的写法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/vue/3/quick-ref/#函数式组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="函数式组件"><!--[--><!--]--> 函数式组件 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" integrity="sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs" crossorigin="anonymous"><h1 id="vue-3-快速参考" tabindex="-1"><a class="header-anchor" href="#vue-3-快速参考" aria-hidden="true">#</a> Vue 3 快速参考</h1><h2 id="申明" tabindex="-1"><a class="header-anchor" href="#申明" aria-hidden="true">#</a> 申明</h2><p>本文档大部分复制与修改自 <a href="https://v3.cn.vuejs.org" target="_blank" rel="noopener noreferrer">Vue.js 的官方文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a>（其<a href="https://github.com/vuejs/docs-next-zh-cn/blob/master/LICENSE" target="_blank" rel="noopener noreferrer">许可证<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a>）。</p><p>本文使用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreferrer">CC BY-NC-SA 4.0<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a> 协议进行许可。</p><h2 id="作者的话" tabindex="-1"><a class="header-anchor" href="#作者的话" aria-hidden="true">#</a> 作者的话</h2><h3 id="文章意义" tabindex="-1"><a class="header-anchor" href="#文章意义" aria-hidden="true">#</a> 文章意义</h3><p>作者通过压缩官方文档及其参考，加入自己的理解，以尽量少的方式表达所有概念，以便日后自己与他人的查询。</p><h3 id="本文适用情况" tabindex="-1"><a class="header-anchor" href="#本文适用情况" aria-hidden="true">#</a> 本文适用情况</h3><ul><li>复习、学习或理清某个概念</li><li>查询某件事应该怎么做</li><li>系统化学习 Vue（很艰难，建议通过 Vue 官方文档或其他课程学习）</li></ul><h3 id="文章错误报告" tabindex="-1"><a class="header-anchor" href="#文章错误报告" aria-hidden="true">#</a> 文章错误报告</h3><p>作者非常关心文章中出现的错误，读者若发现文章出现错误，请将文章的错误信息发送至：</p><details class="custom-container details"><summary>（反爬虫，请注意字符旋转和闪烁）</summary><p><strong>Q</strong> <span style="visibility:hidden;width:1px;display:inline-block;"> 2886ghtdddd52@qq.com </span> <span style="display:inline-block;transform:rotate(150deg);">Q </span><span style="width:1px;height:1px;display:inline-block;overflow:hidden;"><a href="email:00000000@qq.com">00000000@qq.com</a></span> <span style="display:inline-block;transform:rotate(180deg);">甲</span>↑<span style="display:inline-block;position:relative;top:1rem;left:-1.8rem;"> 阝→</span>：<span class="ghjh5422yyeeeht52">〇8</span> <code>２１</code> <span style="display:inline-block;transform:rotate(75deg);">∞</span>   <img src="" alt="366" style="filter:blur(.8px) sepia(50);transform:rotate(90deg);display:inline-block;animation:ghjh5422yyeeeht52-op-swin 5s infinite;"> 最后一位数为 兀 去除小数 。</p></details><h2 id="应用及其实例" tabindex="-1"><a class="header-anchor" href="#应用及其实例" aria-hidden="true">#</a> 应用及其实例</h2><p>每个 Vue 应用都是通过 <code>createApp</code> 函数创建一个新的应用实例开始的。Vue 官方习惯称 应用为 <code>app</code>。</p><h3 id="挂载-mount-应用" tabindex="-1"><a class="header-anchor" href="#挂载-mount-应用" aria-hidden="true">#</a> 挂载（mount）应用</h3><p>挂载应用就是把应用挂靠到一个元素上（即以这个元素作为组件实例连接外部 DOM 的 “接 口”），并在此元素上进行实例化。如</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">app</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{ </span><span style="color:#676F7D;">/* 选项 */</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">vm</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">mount</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;#app&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>就是把应用实例 <code>vm</code> 挂载在 <code>#app</code> 上。</p><h2 id="组件" tabindex="-1"><a class="header-anchor" href="#组件" aria-hidden="true">#</a> 组件</h2><p>组件是带有名称的<strong>可复用实例</strong>。</p><h3 id="组件命名" tabindex="-1"><a class="header-anchor" href="#组件命名" aria-hidden="true">#</a> 组件命名</h3><p>使用 <code>-</code> 连接小写单词，如 kebab-case ；或用首字母大写命名，如 PascalCase。</p><div class="custom-container warning"><p class="custom-container-title">警告</p><p>直接在 DOM (即非字符串的模板) 中使用时只有 kebab-case 是有效的。</p></div><h3 id="组件注册" tabindex="-1"><a class="header-anchor" href="#组件注册" aria-hidden="true">#</a> 组件注册</h3><p>组件注册分全局注册和局部注册。</p><h4 id="全局注册" tabindex="-1"><a class="header-anchor" href="#全局注册" aria-hidden="true">#</a> 全局注册</h4><p>组件全局注册之后，组件就可以用在应用内任何组件实例的模板中。</p><p>注册方式为，用 <code>app.component</code> 创建组件：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;my-component-name&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> { </span><span style="color:#676F7D;">/* 选项 */</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">mount</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;#app&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><div class="highlight-line"> </div><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在根组件实例中使用组件 <code>my-component-name</code>：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;app&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">my-component-name</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">my-component-name</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="局部注册" tabindex="-1"><a class="header-anchor" href="#局部注册" aria-hidden="true">#</a> 局部注册</h4><p>局部注册是让注册的组件<strong>只能</strong>在当前组件上使用，以便其他程序优化。</p><p>可以先在一个文件声明组件，然后再在别的组件局部注册这个组件。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">ComponentA</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#676F7D;">/* ... */</span></span>
<span class="line"><span style="color:#BBBBBB;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">ComponentB</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  components</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#E5C07B;">&quot;component-a&quot;</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">ComponentA,</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="在模块系统中局部注册" tabindex="-1"><a class="header-anchor" href="#在模块系统中局部注册" aria-hidden="true">#</a> 在模块系统中局部注册</h4><p>方法与局部注册类似，但需要先导入组件。建议创建个 <code>components</code> 目录用于放置组件， 然后在注册前导入所有要用的组件：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">ComponentA</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&quot;./ComponentA&quot;</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">ComponentC</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&quot;./ComponentC&quot;</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">export</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">default</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  components</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// 类似局部注册</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#ABB2BF;">ComponentA,</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#ABB2BF;">ComponentC,</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="组件性质" tabindex="-1"><a class="header-anchor" href="#组件性质" aria-hidden="true">#</a> 组件性质</h3><h4 id="可复用性" tabindex="-1"><a class="header-anchor" href="#可复用性" aria-hidden="true">#</a> 可复用性</h4><p>组件可被多次使用。</p><h3 id="选项" tabindex="-1"><a class="header-anchor" href="#选项" aria-hidden="true">#</a> 选项</h3><p>组件对象可以按需添加一些组件所需要的选项。</p><p>例如，添加：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">ComponentA</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&quot;./ComponentA&quot;</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">export</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">default</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  components</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">ComponentA</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>要查询所有选项请跳转到 <a href="/static_blog/computer/vue/3/quick-ref/options.html" class="">选项 API</a>。</p><h3 id="计算属性" tabindex="-1"><a class="header-anchor" href="#计算属性" aria-hidden="true">#</a> 计算属性</h3><p>计算属性用于简化模板表达式，有点类似于 JavaScript 的设置了 getter 的属性，但是有 缓存功能。使用方法见 <a href="/static_blog/computer/vue/3/quick-ref/options.html#computed" class="">computed 选项</a>。</p><h4 id="计算属性的缓存" tabindex="-1"><a class="header-anchor" href="#计算属性的缓存" aria-hidden="true">#</a> 计算属性的缓存</h4><p>计算属性会<strong>缓存上一次计算得到的值</strong>以减少计算量，且只会在其相关响应式依赖发生改 变时重新求值。</p><div class="custom-container tip"><p class="custom-container-title">非响应式依赖表达式不会造成缓存更新以下计算属性将永远不会更新，因为</p><p><code>Date.now()</code> 不是响应式依赖：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">computed</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">now</span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> { </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Date</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">now</span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><h4 id="计算属性的-setter" tabindex="-1"><a class="header-anchor" href="#计算属性的-setter" aria-hidden="true">#</a> 计算属性的 Setter</h4><p>可以为计算属性提供个 Setter，但是要换成这样的写法 ：<code>{ get: Function, set: Function }</code>。例子：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">computed</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  fullName</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// getter</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">get</span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.firstName</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39; &#39;</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.lastName</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// setter</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">set</span><span style="color:#ABB2BF;">(newValue)</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">names</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">newValue</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39; &#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.firstName</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">names[</span><span style="color:#C678DD;">0</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.lastName</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">names[</span><span style="color:#61AFEF;">names</span><span style="color:#ABB2BF;">.</span><span style="color:#56B6C2;">length</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">-</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">1</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="侦听器" tabindex="-1"><a class="header-anchor" href="#侦听器" aria-hidden="true">#</a> 侦听器</h3><p>侦听器用于侦听某个响应式属性的变化并对其处理。使用方法见 <a href="/static_blog/computer/vue/3/quick-ref/options.html#watch" class="">watch 选项</a>。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>侦听器十分容易被滥用，尤其是用侦听器更新某个属性的时候，应该用<a href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7">计算属性</a>自动更新属性更为妥当。如：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">vm</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">data</span><span style="color:#BBBBBB;">() {</span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    firstName</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&quot;Foo&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">    lastName</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&quot;Bar&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">    fullName</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&quot;Foo Bar&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  }}</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  watch</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">firstName</span><span style="color:#BBBBBB;">(</span><span style="color:#D19A66;font-style:italic;">val</span><span style="color:#BBBBBB;">) { </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.fullName</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">val</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&quot; &quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.lastName</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">lastName</span><span style="color:#BBBBBB;">(</span><span style="color:#D19A66;font-style:italic;">val</span><span style="color:#BBBBBB;">) { </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.fullName</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.firstName</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&quot; &quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">val</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">).</span><span style="color:#98C379;">mount</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&quot;#demo&quot;</span><span style="color:#ABB2BF;">)</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>应该利用计算属性响应式数据依赖变化后缓存更新的特性改为下面的代码：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">vm</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">data</span><span style="color:#BBBBBB;">() {</span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    firstName</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&quot;Foo&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">    lastName</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&quot;Bar&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  }}</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  computed</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">fullName</span><span style="color:#BBBBBB;">() { </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.firstName</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&quot; &quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.lastName</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">).</span><span style="color:#98C379;">mount</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&quot;#demo&quot;</span><span style="color:#ABB2BF;">)</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div><h3 id="组件实例" tabindex="-1"><a class="header-anchor" href="#组件实例" aria-hidden="true">#</a> 组件实例</h3><p>Vue 官方习惯称<strong>组件实例</strong>为 <strong>vm</strong>。</p><h4 id="根组件" tabindex="-1"><a class="header-anchor" href="#根组件" aria-hidden="true">#</a> 根组件</h4><p>挂载应用时，<strong>根组件</strong>被用作渲染的起点。</p><h4 id="组件树" tabindex="-1"><a class="header-anchor" href="#组件树" aria-hidden="true">#</a> 组件树</h4><p>组件以树状结构（类似 HTML 中的父子兄弟元素）构成组件树。</p><h6 id="示例" tabindex="-1"><a class="header-anchor" href="#示例" aria-hidden="true">#</a> 示例</h6><p>一个 todo 应用的组件树：</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#bbbbbb;">根组件
└─ todo列表
   ├─ todo项目
   │  ├─ 删除todo按钮
   │  └─ 编辑todo按钮
   └─ 待办事件列表页脚
      ├─ 清理todo按钮
      └─ todo列表统计
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="property" tabindex="-1"><a class="header-anchor" href="#property" aria-hidden="true">#</a> Property</h4><h5 id="data-property" tabindex="-1"><a class="header-anchor" href="#data-property" aria-hidden="true">#</a> Data Property</h5><h3 id="生命周期" tabindex="-1"><a class="header-anchor" href="#生命周期" aria-hidden="true">#</a> 生命周期</h3><details class="custom-container details"><summary>Vue 生命周期图示</summary><img alt="Vue 生命周期图示" src="https://v3.cn.vuejs.org/images/lifecycle.svg"></details><h4 id="生命周期钩子" tabindex="-1"><a class="header-anchor" href="#生命周期钩子" aria-hidden="true">#</a> 生命周期钩子</h4><p>每个组件在从创建到被销毁都要经过一系列的初始化过程，其过程中会运行一些叫做<strong>生命 周期钩子</strong>的函数。</p><p>比如 <code>created</code> 钩子可以让一个实例被创建之后执行一些代码：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">data</span><span style="color:#BBBBBB;">() {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> { count</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">1</span><span style="color:#BBBBBB;"> };</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">created</span><span style="color:#BBBBBB;">() {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&quot;count is: &quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.count)</span><span style="color:#BBBBBB;">; </span><span style="color:#676F7D;">// =&gt; &quot;count is: 1&quot;</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="prop" tabindex="-1"><a class="header-anchor" href="#prop" aria-hidden="true">#</a> Prop</h3><p><strong>Prop</strong> 是在组件上注册的一些<strong>自定义 attribute</strong>，可以类比于函数的参数。用于可 以在使用组件时附加传递。如下面例子的 <code>title</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;blog-post&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    props</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">&#39;title&#39;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#BBBBBB;">    template</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">`&lt;h4&gt;{{ title }}&lt;/h4&gt;`</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">mount</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;#blog-post-demo&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;blog-post-demo&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;demo&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">&lt;!--类似于函数传入了 title 实参--&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">blog-post</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">title</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;My journey with Vue&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">blog-post</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><div class="highlight-line"> </div><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="prop-声明" tabindex="-1"><a class="header-anchor" href="#prop-声明" aria-hidden="true">#</a> Prop 声明</h4><p>在组件注册时带上 <code>props</code> 选项，其值可以为一个字符串数组或一个对象。</p><h5 id="prop-命名" tabindex="-1"><a class="header-anchor" href="#prop-命名" aria-hidden="true">#</a> Prop 命名</h5><p>DOM 中的模板时，camelCase (驼峰命名法) 的 prop 名需要使用其等价的 kebab-case (短横线分隔命名) 命名，使用字符串模板则没有此限制。</p><h5 id="简单声明" tabindex="-1"><a class="header-anchor" href="#简单声明" aria-hidden="true">#</a> 简单声明</h5><p>使用数组作为 <code>props</code> 选项的值，数组的每个元素是每个 prop 名。（适用于快速开发原型，不推荐在实际生产环境使用）</p><h5 id="带类型检查的对象形式的声明" tabindex="-1"><a class="header-anchor" href="#带类型检查的对象形式的声明" aria-hidden="true">#</a> 带类型检查的对象形式的声明</h5><p>使用一个对象作为 <code>props</code> 选项的值，对象的键为 prop 名，值为一个对象。</p><p><code>props</code> 选项对象的值可以是原生构造函数、自定义构造函数或上述内容组成的数组，该对象将作为该要检验的类型来看待。</p><p>例如：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">class</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Vector</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#56B6C2;">constructor</span><span style="color:#BBBBBB;">(){ </span><span style="color:#676F7D;">/*...*/</span><span style="color:#BBBBBB;"> }</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#676F7D;">// ...</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;my-component&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  props</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// 基础的类型检查 (`null` 和 `undefined` 值会通过任何类型验证)</span></span>
<span class="line"><span style="color:#BBBBBB;">    propA</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Number</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// 多个可能的类型</span></span>
<span class="line"><span style="color:#BBBBBB;">    propB</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#61AFEF;">String</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">Vector],</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h5 id="自定义对象形式声明" tabindex="-1"><a class="header-anchor" href="#自定义对象形式声明" aria-hidden="true">#</a> 自定义对象形式声明</h5><p>使用一个对象作为 <code>props</code> 选项的值，对象的键为 prop 名，值为一个对象。（推荐）</p><p>自定义对象的类型为 <code>{type?: Object | Array, default?: any, required?: Boolean, validator?: Function}</code> 类型的对象。支持设置默认值、prop 是否是必填项、自定义验证函数等操作。</p><h4 id="传递-prop" tabindex="-1"><a class="header-anchor" href="#传递-prop" aria-hidden="true">#</a> 传递 Prop</h4><p>通过在模板上以 attribute 的形式加到组件元素即可将 Prop 传入组件内。</p><p>例：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#676F7D;">&lt;!--静态传递--&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">blog-post</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">title</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;My journey with Vue&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">blog-post</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#676F7D;">&lt;!--动态传递--&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">blog-post</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:title</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;post.title&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">blog-post</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="custom-container warning"><p class="custom-container-title">警告</p><p>传递 JavaScript 表达式注意要加上 <code>v-bind:</code> 或 <code>:</code> 前缀，否则 attribute 上的表达式将直接以字符串的形式作为 prop 传入从而导致预期之外的结果。</p></div><h5 id="传入一个对象的所有-property" tabindex="-1"><a class="header-anchor" href="#传入一个对象的所有-property" aria-hidden="true">#</a> 传入一个对象的所有 property</h5><p>可以通过使用不带参数的 <code>v-bind</code> 并使其绑定一个对象，Vue 将把对象拥有的所有 property 绑定到其同名的 prop 上。</p><p>例如，对于一个给定的对象 <code>post</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">post</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  id</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  title</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;My Journey with Vue&#39;</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">blog-post</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-bind</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;post&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">blog-post</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#676F7D;">&lt;!--上面的模板等价于：--&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">blog-post</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-bind:id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;post.id&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-bind:title</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;post.title&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">blog-post</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="prop-的单向下行绑定的约定" tabindex="-1"><a class="header-anchor" href="#prop-的单向下行绑定的约定" aria-hidden="true">#</a> Prop 的单向下行绑定的约定</h4><p>应当遵守组件中<strong>不能改变其 prop</strong> 的约定，如果有改变 prop 的需求，可以尝试在 prop 外套层变量或者计算属性。</p><div class="custom-container warning"><p class="custom-container-title">警告</p><p>如果在子组件内部改变其 prop，极有可能会影响到父组件的状态从而导致预期之外的结果。</p></div><h4 id="prop-验证" tabindex="-1"><a class="header-anchor" href="#prop-验证" aria-hidden="true">#</a> Prop 验证</h4><div class="custom-container warning"><p class="custom-container-title">警告</p><p>prop 会在一个组件实例创建之前进行验证，因此实例的 property (如 <code>data</code>、<code>computed</code> 等) 在 <code>default</code> 或 <code>validator</code> 函数中是不可用的。</p></div><h5 id="设置-prop-的默认值" tabindex="-1"><a class="header-anchor" href="#设置-prop-的默认值" aria-hidden="true">#</a> 设置 Prop 的默认值</h5><p>对于非对象或数组类型的默认值，以<a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AF%B9%E8%B1%A1%E5%BD%A2%E5%BC%8F%E5%A3%B0%E6%98%8E">自定义对象形式声明</a>的 prop 可以设置 <code>default</code> property 的值为该 prop 的默认值，：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;my-component&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  props</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    propD</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> { </span></span>
<span class="line"><span style="color:#BBBBBB;">      type</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Number</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">      default</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">100</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 设置 propD prop 的默认值为 100</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>对于对象或数组类型的默认值，prop 可以设置 <code>default</code> property 的值为一个工厂函数（创建这个对象或数组的函数）：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;my-component&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  props</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    propE</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">      type</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Object</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#98C379;">default</span><span style="color:#BBBBBB;">() {</span></span>
<span class="line"><span style="color:#BBBBBB;">        </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> { message</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;hello&#39;</span><span style="color:#BBBBBB;"> }</span></span>
<span class="line"><span style="color:#BBBBBB;">      }</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>值得注意的是，下面的 <code>default</code> 不是工厂函数，而是一个用作默认值的函数。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">propG</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  type</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Function</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#E06C75;">default</span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;Default function&#39;</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div><h5 id="设置-prop-的必填性" tabindex="-1"><a class="header-anchor" href="#设置-prop-的必填性" aria-hidden="true">#</a> 设置 Prop 的必填性</h5><p>以<a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AF%B9%E8%B1%A1%E5%BD%A2%E5%BC%8F%E5%A3%B0%E6%98%8E">自定义对象形式声明</a>的 prop 可以设置 <code>required</code> property 的值为一个 <code>Boolean</code> 类型的字面量以设置该 prop 是否必填，如果这个值为 truthy 且该 prop 没有被传入，则 Vue 将抛出一个控制台警告。</p><p>用例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;my-component&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  props</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    propC</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">      type</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">      required</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">true</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 设置该字符串 prop 为必填</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="设置-prop-的验证函数" tabindex="-1"><a class="header-anchor" href="#设置-prop-的验证函数" aria-hidden="true">#</a> 设置 Prop 的验证函数</h5><p>以<a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AF%B9%E8%B1%A1%E5%BD%A2%E5%BC%8F%E5%A3%B0%E6%98%8E">自定义对象形式声明</a>的 prop 可以设置 <code>validator</code> property 的值为一个验证函数，用于检验传入的对应 prop 是否符合要求。该函数会被传入一个传入的 prop 参数，如果该函数返回一个 falsy<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> 的值即代表验证失败，在非生产环境下，Vue 将抛出一个控制台警告。</p><p>用例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;my-component&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  props</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    propF</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#98C379;">validator</span><span style="color:#BBBBBB;">(</span><span style="color:#D19A66;font-style:italic;">value</span><span style="color:#BBBBBB;">) { </span><span style="color:#676F7D;">// 该值必须与下列字符串中的其中一个相匹配</span></span>
<span class="line"><span style="color:#BBBBBB;">        </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">&#39;success&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;warning&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;danger&#39;</span><span style="color:#ABB2BF;">].</span><span style="color:#98C379;">includes</span><span style="color:#ABB2BF;">(value)</span></span>
<span class="line"><span style="color:#BBBBBB;">      }</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="非-prop-的-attribute" tabindex="-1"><a class="header-anchor" href="#非-prop-的-attribute" aria-hidden="true">#</a> 非 Prop 的 Attribute</h3><p>这里特指传向一个组件，但是该组件并没有相应 <code>props</code> 或 <code>emits</code> 定义的 attribute。常见的示例包括 <code>class</code>、<code>style</code> 和 <code>id</code> attribute。</p><h4 id="访问-attribute" tabindex="-1"><a class="header-anchor" href="#访问-attribute" aria-hidden="true">#</a> 访问 Attribute</h4><p>可以通过 <code>$attrs</code> property 访问此类 attribute。</p><h4 id="attribute-继承" tabindex="-1"><a class="header-anchor" href="#attribute-继承" aria-hidden="true">#</a> Attribute 继承</h4><h5 id="单个根节点上的-attribute-继承" tabindex="-1"><a class="header-anchor" href="#单个根节点上的-attribute-继承" aria-hidden="true">#</a> 单个根节点上的 Attribute 继承</h5><p>当组件返回单个根节点时，这些 attribute 会被自动添加到<strong>根节点的 attribute</strong> 中。事件监听器同样也适用。</p><p>例如：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">date-picker</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">@change</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;submitChange&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">date-picker</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;date-picker&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  template</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">`</span></span>
<span class="line"><span style="color:#E5C07B;">    &lt;select&gt;</span></span>
<span class="line"><span style="color:#E5C07B;">      &lt;option value=&quot;1&quot;&gt;Yesterday&lt;/option&gt;</span></span>
<span class="line"><span style="color:#E5C07B;">      &lt;option value=&quot;2&quot;&gt;Today&lt;/option&gt;</span></span>
<span class="line"><span style="color:#E5C07B;">      &lt;option value=&quot;3&quot;&gt;Tomorrow&lt;/option&gt;</span></span>
<span class="line"><span style="color:#E5C07B;">    &lt;/select&gt;</span></span>
<span class="line"><span style="color:#E5C07B;">  `</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在这种情况下，<code>change</code> 事件监听器将从父组件传递到子组件，它将在原生 <code>&lt;select&gt;</code> 的 <code>change</code> 事件上触发。我们不需要显式地从 <code>date-picker</code> 发出事件。</p><h5 id="禁用-attribute-继承" tabindex="-1"><a class="header-anchor" href="#禁用-attribute-继承" aria-hidden="true">#</a> 禁用 Attribute 继承</h5><p>如果要禁用 attribute 继承，在组件的选项中设置 <code>inheritAttrs: false</code> 即可。</p><h6 id="指定元素进行-attribute-继承" tabindex="-1"><a class="header-anchor" href="#指定元素进行-attribute-继承" aria-hidden="true">#</a> 指定元素进行 Attribute 继承</h6><p>先禁用 attribute 继承，然后在要继承 attribute 的元素的模板上面添加 <code>v-bind=&quot;$attrs&quot;</code> attribute 即可。这样做的原理参考 <a href="#%E4%BC%A0%E5%85%A5%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%80%E6%9C%89-property">传入一个对象的所有 property</a>。</p><p>示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;date-picker&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  inheritAttrs</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">false</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  template</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">`</span></span>
<span class="line"><span style="color:#E5C07B;">    &lt;div class=&quot;date-picker&quot;&gt;</span></span>
<span class="line"><span style="color:#E5C07B;">      &lt;input type=&quot;datetime-local&quot; v-bind=&quot;$attrs&quot; /&gt;</span></span>
<span class="line"><span style="color:#E5C07B;">    &lt;/div&gt;</span></span>
<span class="line"><span style="color:#E5C07B;">  `</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="多个根节点上的-attribute-继承" tabindex="-1"><a class="header-anchor" href="#多个根节点上的-attribute-继承" aria-hidden="true">#</a> 多个根节点上的 Attribute 继承</h5><p>多个根节点的组件不会自动进行 Attribute 继承，需要手动绑定 <code>$attrs</code>。</p><p>示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;custom-layout&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  template</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">`</span></span>
<span class="line"><span style="color:#E5C07B;">    &lt;header&gt;...&lt;/header&gt;</span></span>
<span class="line"><span style="color:#E5C07B;">    &lt;main v-bind=&quot;$attrs&quot;&gt;...&lt;/main&gt;</span></span>
<span class="line"><span style="color:#E5C07B;">    &lt;footer&gt;...&lt;/footer&gt;</span></span>
<span class="line"><span style="color:#E5C07B;">  `</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="动态组件" tabindex="-1"><a class="header-anchor" href="#动态组件" aria-hidden="true">#</a> 动态组件</h3><p>可以使用 <code>&lt;component&gt;</code> 标签，让其 <code>is</code> attribute ，然后控制 <code>is</code> attribute 的值为要使用的组件的组件名，即可让组件动态切换。</p><p>在这些组件之间切换的时候，旧组件会被完全卸载，并且在下一次切换为该组件时会重新渲染。</p><p>示例，<code>component</code> 实际会被渲染成组件名为 <code>currentTabComponent</code> 的组件，且组件会在 <code>currentTabComponent</code> 改变时改变：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#F8F8F0;">component</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:is</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;currentTabComponent&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#F8F8F0;">component</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="保留组件状态" tabindex="-1"><a class="header-anchor" href="#保留组件状态" aria-hidden="true">#</a> 保留组件状态</h4><p>如果要保留组件的状态，让它们在第一次被创建的时候能缓存下来，则可以使用一个 <code>&lt;keep-alive&gt;</code> 元素将其动态组件包裹起来，如：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">keep-alive</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#F8F8F0;">component</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:is</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;currentTabComponent&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#F8F8F0;">component</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">keep-alive</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="异步组件" tabindex="-1"><a class="header-anchor" href="#异步组件" aria-hidden="true">#</a> 异步组件</h3><p>为了能让应用动态从服务器加载模块，Vue 有一个 <code>defineAsyncComponent</code> 方法支持组件的异步加载。</p><p>例如，结合 webpack 和 ES2015 语法：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">defineAsyncComponent</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">AsyncComp</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">defineAsyncComponent</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">() </span><span style="color:#56B6C2;">=&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#E06C75;">import</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;./components/AsyncComponent.vue&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;async-component&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">AsyncComp)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>当在局部注册组件时，也可以使用 <code>defineAsyncComponent</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">createApp,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">defineAsyncComponent</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{</span></span>
<span class="line"><span style="color:#BBBBBB;">  components</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    AsyncComponent</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">defineAsyncComponent</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">() </span><span style="color:#56B6C2;">=&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#E06C75;">import</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;./components/AsyncComponent.vue&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>（待补充）</p><h2 id="模板语法" tabindex="-1"><a class="header-anchor" href="#模板语法" aria-hidden="true">#</a> 模板语法</h2><h3 id="插值" tabindex="-1"><a class="header-anchor" href="#插值" aria-hidden="true">#</a> 插值</h3><h4 id="概念" tabindex="-1"><a class="header-anchor" href="#概念" aria-hidden="true">#</a> 概念</h4><p>Vue 所说的插值是一种类似<strong>替换</strong>的行为，即把目标对象的某些可更改的事物按需进行替 换，并且这种替换通常还是动态的。</p><h4 id="模板表达式" tabindex="-1"><a class="header-anchor" href="#模板表达式" aria-hidden="true">#</a> 模板表达式</h4><p>插值会被当做 JavaScript 表达式进行解析。这些表达式会在当前活动实例的数据作用域下 作为 JavaScript 被解析，但每个绑定都<strong>只能</strong>包含单个表达式，否则不会生效。</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">{{ ok ? &#39;YES&#39; : &#39;NO&#39; }}</span></span>
<span class="line"><span style="color:#676F7D;">&lt;!-- 会生效 --&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">{{ if (ok) { return message } }}</span></span>
<span class="line"><span style="color:#676F7D;">&lt;!-- 不会生效 --&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="表达式的访问受限" tabindex="-1"><a class="header-anchor" href="#表达式的访问受限" aria-hidden="true">#</a> 表达式的访问受限</h5><p>模板表达式都被放在沙盒中，只能访问一 个<a href="https://github.com/vuejs/vue-next/blob/master/packages/shared/src/globalsWhitelist.ts#L3" target="_blank" rel="noopener noreferrer">受限的全局变量列表<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a>。 不该在模板表达式中试图访问用户定义的全局变量。</p><details class="custom-container details"><summary>受限的全局变量列表（最后更新于版本 3.2.26）</summary><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">GLOBALS_WHITE_LISTED</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#E5C07B;">&#39;Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,&#39;</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#E5C07B;">&#39;decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,&#39;</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#E5C07B;">&#39;Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt</span><span style="color:#F8F8F0;">`</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></details><h4 id="文本插值" tabindex="-1"><a class="header-anchor" href="#文本插值" aria-hidden="true">#</a> 文本插值</h4><p>使用 Mustache (大胡子；双大括号) 语法进行文本插值：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;Message: {{ msg }}&lt;/</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>上例中，<code>{{ msg }}</code> 将会被替代为其对应组件实例的 <code>msg</code> property 的值 ，标签内容会随着 <code>msg</code> property 的改变而改变。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>使用文本插值时，传入的 HTML 代码<strong>仅</strong>会被当做文本处理。</p></div><h5 id="一次性文本插值" tabindex="-1"><a class="header-anchor" href="#一次性文本插值" aria-hidden="true">#</a> 一次性文本插值</h5><p>使用 <code>v-once</code> <a href="#%E6%8C%87%E4%BB%A4">指令</a>可以对文本进行<strong>一次性插值</strong>。当数据改变时，插值处的 内容<strong>不会</strong>更新。例：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-once</span><span style="color:#BBBBBB;">&gt;这个将不会改变: {{ msg }}&lt;/</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="原始-html-插值" tabindex="-1"><a class="header-anchor" href="#原始-html-插值" aria-hidden="true">#</a> 原始 HTML 插值</h4><p>使用 <code>v-html</code> 指令进行 HTML 插值：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-html</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;rawHtml&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="custom-container warning"><p class="custom-container-title">在站点上动态渲染 HTML 是非常危险的，因为它很容易导致</p><p><a href="https://baike.baidu.com/item/XSS%E6%94%BB%E5%87%BB/954065?fr=aladdin" target="_blank" rel="noopener noreferrer"><strong>XSS</strong><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a> 攻击 。请只对可信内容使用 HTML 插值，<strong>绝不要</strong>将用户提供的内容作为插值。</p></div><h4 id="attribute-插值" tabindex="-1"><a class="header-anchor" href="#attribute-插值" aria-hidden="true">#</a> Attribute 插值</h4><p>使用 <code>v-bind</code> 指令即可对 attribute 进行插值。<code>v-bind</code> 可以将某个表达式<strong>绑定</strong>到 某个 attribute 上：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-bind:id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;dynamicId&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>如果绑定的表达式的值是 <code>null</code> 或 <code>undefined</code>，那么该 attribute 将不会重新在渲染 结果上。</p><h5 id="布尔-attribute-插值" tabindex="-1"><a class="header-anchor" href="#布尔-attribute-插值" aria-hidden="true">#</a> 布尔 attribute 插值</h5><p>布尔 attribute 的插值比较特殊，如果绑定的表达式值是 <strong>truthy</strong><sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>，那么此 attribute 将被包含在内；对于 <strong>falsy</strong><sup class="footnote-ref"><a href="#fn1" id="fnref1:1">[1:1]</a></sup> 的值，该 attribute 将被省略。如：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-bind:disabled</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;isButtonDisabled&quot;</span><span style="color:#BBBBBB;">&gt;按钮&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><code>disabled</code> 是否会出现在渲染结果取决于 <code>isButtonDisabled</code> 的值。</p><h3 id="指令" tabindex="-1"><a class="header-anchor" href="#指令" aria-hidden="true">#</a> 指令</h3><p>指令 (Directives) 是带有 <code>v-</code> 前缀的<strong>特殊 attribute</strong>。</p><h4 id="指令的值" tabindex="-1"><a class="header-anchor" href="#指令的值" aria-hidden="true">#</a> 指令的值</h4><p>指令的值预期通常是<strong>单个 JavaScript 表达式</strong>，类似于插值，当表达式的值改变时，将 其产生的连带影响，响应式地作用于 DOM。如：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-if</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;seen&quot;</span><span style="color:#BBBBBB;">&gt;现在你看到我了&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>这里的 <code>seen</code> 就是指令的值。</p><h4 id="指令参数" tabindex="-1"><a class="header-anchor" href="#指令参数" aria-hidden="true">#</a> 指令参数</h4><p>一些指令能够接收但个参数，参数是在指令名称之后以冒号表示。例如，让 <code>v-bind</code> 指令 接收一个 <code>href</code> 参数：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">a</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-bind:href</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;url&quot;</span><span style="color:#BBBBBB;">&gt; ... &lt;/</span><span style="color:#E06C75;">a</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="动态参数" tabindex="-1"><a class="header-anchor" href="#动态参数" aria-hidden="true">#</a> 动态参数</h4><p>若要在参数里使用 JavaScript 表达式，用方括号括起表达式即可，如：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">a</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-bind:[attributeName]</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;url&quot;</span><span style="color:#BBBBBB;">&gt; ... &lt;/</span><span style="color:#E06C75;">a</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>这里的 <code>attributeName</code> 会被视作为一个 JavaScript 表达式，其值会被动态计算，然后 被作为参数以使用。</p><h5 id="动态参数的注意事项" tabindex="-1"><a class="header-anchor" href="#动态参数的注意事项" aria-hidden="true">#</a> 动态参数的注意事项</h5><h6 id="动态参数值的约定" tabindex="-1"><a class="header-anchor" href="#动态参数值的约定" aria-hidden="true">#</a> 动态参数值的约定</h6><p>动态参数的值预期是字符串或 <code>null</code>。<code>null</code> 值可以用于显式地<strong>移除绑定</strong>，而其它类 型的值都将会触发一个警告。</p><h6 id="动态参数表达式的字符约定" tabindex="-1"><a class="header-anchor" href="#动态参数表达式的字符约定" aria-hidden="true">#</a> 动态参数表达式的字符约定</h6><p>动态参数表达式有一些语法约束，因为某些字符（如空格和引号）放在 HTML attribute 名 里是无效的。解决办法是用<a href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7">计算属性</a>代替或避免使用此类字符。</p><h6 id="动态参数表达式的大小写约定" tabindex="-1"><a class="header-anchor" href="#动态参数表达式的大小写约定" aria-hidden="true">#</a> 动态参数表达式的大小写约定</h6><p>在 DOM 中使用模板时还需避免使用大写字符，因为浏览器会把 attribute 名全部<strong>强制转 为小写</strong>：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#676F7D;">&lt;!-- 在 DOM 中使用模板时这段代码会被转换为 `v-bind:[someattr]`。 --&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">a</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-bind:[someAttr]</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;value&quot;</span><span style="color:#BBBBBB;">&gt; ... &lt;/</span><span style="color:#E06C75;">a</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="修饰符" tabindex="-1"><a class="header-anchor" href="#修饰符" aria-hidden="true">#</a> 修饰符</h4><p>修饰符（modifier）是以半角句号 <code>.</code> 指明的特殊后缀，用于指出一个指令应该以某种特 殊方式绑定。例如，<code>.prevent</code> 修饰符告诉 <code>v-on</code> 指令对于触发的事件调用 <code>event.preventDefault()</code>：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">form</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-on:submit.prevent</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;onSubmit&quot;</span><span style="color:#BBBBBB;">&gt;...&lt;/</span><span style="color:#E06C75;">form</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="指令缩写" tabindex="-1"><a class="header-anchor" href="#指令缩写" aria-hidden="true">#</a> 指令缩写</h4><h5 id="v-bind-缩写" tabindex="-1"><a class="header-anchor" href="#v-bind-缩写" aria-hidden="true">#</a> <code>v-bind</code> 缩写</h5><p>把 <code>v-bind:</code> 替换为 <code>:</code> 即可，如：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">a</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:href</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;url&quot;</span><span style="color:#BBBBBB;">&gt; ... &lt;/</span><span style="color:#E06C75;">a</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h5 id="v-on-缩写" tabindex="-1"><a class="header-anchor" href="#v-on-缩写" aria-hidden="true">#</a> <code>v-on</code> 缩写</h5><p>把 <code>v-on:</code> 替换为 <code>@</code> 即可，如：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">a</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">@click</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;doSomething&quot;</span><span style="color:#BBBBBB;">&gt; ... &lt;/</span><span style="color:#E06C75;">a</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h5 id="v-slot-缩写" tabindex="-1"><a class="header-anchor" href="#v-slot-缩写" aria-hidden="true">#</a> <code>v-slot</code> 缩写</h5><p>把 <code>v-slot:</code> 替换为 <code>#</code> 即可，但该缩写只在其有参数的时候才可用。如：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">base-layout</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">#header</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#BBBBBB;">&gt;Here might be a page title&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  ...</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">base-layout</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果使用默认插槽，则必须写成 <code>#default</code>。</p><h4 id="自定义指令" tabindex="-1"><a class="header-anchor" href="#自定义指令" aria-hidden="true">#</a> 自定义指令</h4><p>对普通 DOM 元素进行底层操作（如，让元素自动得到焦点）会用到自定义指令。</p><h5 id="注册自定义指令" tabindex="-1"><a class="header-anchor" href="#注册自定义指令" aria-hidden="true">#</a> 注册自定义指令</h5><p>自定义指令可以在 <code>app</code> 内全局注册或组件内局部注册。</p><h6 id="全局注册-1" tabindex="-1"><a class="header-anchor" href="#全局注册-1" aria-hidden="true">#</a> 全局注册</h6><p>调用 <code>app.directive</code> 函数即可，其第一个参数为自定义指令名，第二个参数是一个对象，该对象应该包含<a href="#%E6%8C%87%E4%BB%A4%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90">指令的生命周期钩子</a>。</p><p>示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">app</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#676F7D;">// 注册一个全局自定义指令 `v-focus`</span></span>
<span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">directive</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;focus&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#676F7D;">// 当被绑定的元素挂载到 DOM 中时……</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">mounted</span><span style="color:#BBBBBB;">(</span><span style="color:#D19A66;font-style:italic;">el</span><span style="color:#BBBBBB;">) {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#61AFEF;">el</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">focus</span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 聚焦元素</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h6 id="局部注册-1" tabindex="-1"><a class="header-anchor" href="#局部注册-1" aria-hidden="true">#</a> 局部注册</h6><p>让组件接收一个 <code>directives</code> 选项，声明一个名为指令名的对象 property，对象应该包含 <a href="#%E6%8C%87%E4%BB%A4%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90">指令的生命周期钩子</a>。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">directives</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  focus</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">mounted</span><span style="color:#ABB2BF;">(el)</span><span style="color:#BBBBBB;"> { </span><span style="color:#61AFEF;">el</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">focus</span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> }</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="指令的生命周期钩子" tabindex="-1"><a class="header-anchor" href="#指令的生命周期钩子" aria-hidden="true">#</a> 指令的生命周期钩子</h5><p>一个指令定义对象可以提供如下几个钩子函数 (均为可选)：</p><table><thead><tr><th>函数名</th><th>介绍</th></tr></thead><tbody><tr><td>created</td><td>在绑定元素的 attribute 或事件监听器被应用之前调用。</td></tr><tr><td>beforeMount</td><td>当指令第一次绑定到元素且在挂载到父组件之前调用。</td></tr><tr><td>mounted</td><td>在绑定元素的父组件被挂载前调用。</td></tr><tr><td>beforeUpdate</td><td>在更新包含组件的 VNode 之前调用。</td></tr><tr><td>updated</td><td>在包含组件的 VNode 及其子组件的 VNode 更新后调用。</td></tr><tr><td>beforeUnmount</td><td>在卸载绑定元素的父组件之前调用。</td></tr><tr><td>unmounted</td><td>当指令与元素解除绑定且父组件已卸载时，只调用一次。</td></tr></tbody></table><p>这些函数接收相同的参数：<code>(el, binding, vnode, pervVnode)</code>。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>除了 <code>el</code> 之外，应该将所有参数视为只读。</p></div><ul><li><p><code>el</code></p><p>HTML 元素，为指令绑定到的元素。</p></li><li><p><code>binding</code></p><p>对象，包含如下 property：</p><ul><li><code>instance</code>：使用该指令的组件实例。</li><li><code>value</code>：传递给指令的值。</li><li><code>oldValue</code>：先前的值，仅在 <code>beforeUpdate</code> 和 <code>updated</code> 中可用。</li><li><code>arg</code>：传递给指令的参数。</li><li><code>modifiers</code>：包含修饰符的对象。例如，在 <code>v-focus.foo.bar</code> 中，修饰符对象为 <code>{foo: true，bar: true}</code>。</li><li><code>dir</code>：在注册指令时作为参数传递的对象。</li></ul></li><li><p><code>vnode</code>：</p><p>一个 DOM 元素的 VNode，对应上面收到的 <code>el</code> 参数。</p></li><li><p><code>prevNode</code>：</p><p>上一个 VNode，仅在 <code>beforeUpdate</code> 和 <code>updated</code> 钩子中可用。</p></li></ul><h5 id="使用自定义指令" tabindex="-1"><a class="header-anchor" href="#使用自定义指令" aria-hidden="true">#</a> 使用自定义指令</h5><p>在要使用指令的元素上，加上带 <code>v-</code> 前缀的自定义指令名即可。如使用名为 <code>focus</code> 自定义指令：</p><div class="custom-container warning"><p class="custom-container-title">警告</p><p>自定义指令被视为是<a href="#%E9%9D%9E-prop-%E7%9A%84-attribute">非 prop 的 attribute</a>，应当考虑好其作为非 prop 的 attribute 会带来的问题。例如，当自定义指令被应用在一个多根节点的组件上时，指令会被忽略，并且会抛出一个警告。</p></div><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">input</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-focus</span><span style="color:#BBBBBB;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="模板引用" tabindex="-1"><a class="header-anchor" href="#模板引用" aria-hidden="true">#</a> 模板引用</h2><p>模板引用可以让组件实例直接访问其某个子组件实例或 HTML 元素。使用 <code>ref</code> attribute 为组件或 HTML 元素指定<strong>引用 ID</strong>。</p><div class="custom-container warning"><p class="custom-container-title">警告</p><p><code>$refs</code> 只会在组件渲染完成之后生效，因此应该避免在模板或计算属性中访问 <code>$refs</code>，否则可能会发生预期外的事情。</p></div><h3 id="引用-html-元素" tabindex="-1"><a class="header-anchor" href="#引用-html-元素" aria-hidden="true">#</a> 引用 HTML 元素</h3><p>例如：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">input</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;input&quot;</span><span style="color:#BBBBBB;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>待组件渲染完成之后，可以通过其组件实例的 <code>$refs</code> property 中访问。如，上例元素可以通过 <code>vm.$refs.input</code> 访问。</p><h3 id="引用组件" tabindex="-1"><a class="header-anchor" href="#引用组件" aria-hidden="true">#</a> 引用组件</h3><p>例如：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">base-input</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;usernameInput&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">base-input</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>待组件渲染完成之后，可以通过其父组件实例的 <code>$refs</code> property 中访问。如：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$refs</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">usernameInput</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">focusInput</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="class-与-style-绑定" tabindex="-1"><a class="header-anchor" href="#class-与-style-绑定" aria-hidden="true">#</a> Class 与 Style 绑定</h2><p>Vue.js 对 <code>v-bind</code> 用于 <code>class</code> 和 <code>style</code> 的情形，其操作做了专门的增强。</p><h3 id="绑定-html-class" tabindex="-1"><a class="header-anchor" href="#绑定-html-class" aria-hidden="true">#</a> 绑定 HTML Class</h3><h4 id="对象语法" tabindex="-1"><a class="header-anchor" href="#对象语法" aria-hidden="true">#</a> 对象语法</h4><p>可以传给 <code>:class</code>（<code>v-bind:class</code> 的<a href="#v-bind-%E7%BC%A9%E5%86%99">简写</a>）一个对象，其每个键对应 要设置的每个 class 的名字，某个 class 是否存在取决于渲染结果取决于键的值是否是 Truthy<sup class="footnote-ref"><a href="#fn2" id="fnref2:1">[2:1]</a></sup>。</p><p>如，下例的 <code>active</code> class 是否会被启用取决于 <code>isActive</code> 的值：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;{ active: isActive }&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>可以结合计算属性使用，让 <code>:class</code> 绑定一个计算属性以操控样式。</p></div><h4 id="数组语法" tabindex="-1"><a class="header-anchor" href="#数组语法" aria-hidden="true">#</a> 数组语法</h4><p>可以传给 <code>:class</code> 一个元素为字符串或者对象的数组。其字符串元素指定添加哪些 class，其对象元素遵循对象语法的规则。</p><p>示例：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;[{ active: isActive }, errorClass]&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="class-与-class-共存" tabindex="-1"><a class="header-anchor" href="#class-与-class-共存" aria-hidden="true">#</a> <code>:class</code> 与 <code>class</code> 共存</h4><p><code>:class</code> 能与 <code>class</code> 共存，如：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;static&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;{ active: true, &#39;text-danger&#39;: false }&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>会渲染为：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;static active&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="元素的-class-与单根元素的自定义组件的-class、-class-共存" tabindex="-1"><a class="header-anchor" href="#元素的-class-与单根元素的自定义组件的-class、-class-共存" aria-hidden="true">#</a> 元素的 class 与单根元素的自定义组件的 class、<code>:class</code> 共存</h4><p>在带有单个根元素的自定义组件上使用 class attribute 时，这些 class 将被添加到该元 素中，且此元素上的现有 class 不会被覆盖。</p><p>例如，声明一个 <code>my-component</code> 组件：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">app</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{}</span><span style="color:#ABB2BF;">)</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&quot;my-component&quot;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  template</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">`&lt;p class=&quot;foo bar&quot; :class=&quot;{ active: isActive }&gt;Hi!&lt;/p&gt;`</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#676F7D;">// ...</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在使用它的时候添加一些 class：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;app&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">my-component</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;baz boo&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">my-component</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>HTML 将被渲染为：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;foo bar baz boo active&quot;</span><span style="color:#BBBBBB;">&gt;Hi&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="绑定内联样式" tabindex="-1"><a class="header-anchor" href="#绑定内联样式" aria-hidden="true">#</a> 绑定内联样式</h3><h4 id="对象语法-1" tabindex="-1"><a class="header-anchor" href="#对象语法-1" aria-hidden="true">#</a> 对象语法</h4><p><code>:style</code> 绑定对象时，对象的每个<strong>键</strong>对应着其代表的 CSS property 名，其<strong>值</strong>应 为文本形式，为该项 CSS 样式的值。其中，CSS property 名可以用<strong>驼峰式</strong> (camelCase) 或<strong>短横线分隔</strong> (kebab-case，要用引号括起来) 法命名。</p><p>示例：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:style</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;styleObject&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#98C379;">data</span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    styleObject</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">      color</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;red&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">      fontSize</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;13px&#39;</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="数组语法-1" tabindex="-1"><a class="header-anchor" href="#数组语法-1" aria-hidden="true">#</a> 数组语法</h4><p><code>:style</code> 绑定数组时，数组的每个<strong>元素</strong>要求为遵循对象语法的对象。</p><p>示例：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:style</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;[baseStyles, overridingStyles]&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">div</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="样式自动添加前缀" tabindex="-1"><a class="header-anchor" href="#样式自动添加前缀" aria-hidden="true">#</a> 样式自动添加前缀</h4><p>在 :style 中使用需要 <a href="https://developer.mozilla.org/en-US/docs/Glossary/Vendor_Prefix" target="_blank" rel="noopener noreferrer">vendor prefix<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a>（ 浏览器引擎前缀）的 CSS property 时，Vue 将自动侦测运行时环境并添加其相应的前缀。</p><h4 id="多重值" tabindex="-1"><a class="header-anchor" href="#多重值" aria-hidden="true">#</a> 多重值</h4><p>可以为 style 绑定中的 property 提供一个包含多个值的数组，但最终只会渲染数组中最 后一个被浏览器支持的值。常用于提供多个带前缀的值，例如：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">:style</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;{ display: [&#39;-webkit-box&#39;, &#39;-ms-flexbox&#39;, &#39;flex&#39;] }&quot;</span></span>
<span class="line"><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="条件渲染" tabindex="-1"><a class="header-anchor" href="#条件渲染" aria-hidden="true">#</a> 条件渲染</h2><h3 id="v-if" tabindex="-1"><a class="header-anchor" href="#v-if" aria-hidden="true">#</a> <code>v-if</code></h3><p><code>v-if</code> 指令用于带有条件地渲染一块内容。内容只会在指令表达式返回 truthy<sup class="footnote-ref"><a href="#fn2" id="fnref2:2">[2:2]</a></sup> 值的时候被渲染，返回 falsy<sup class="footnote-ref"><a href="#fn1" id="fnref1:2">[1:2]</a></sup> 时此块内容不会出现在渲染结果内。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p><code>v-if</code> 有更高的切换开销，适用于运行时<strong>条件很少改变</strong>的情形。若元素在运 行时需频繁切换，建议使用<a href="#v-show"><code>v-show</code></a>。</p></div><p>如下例元素被渲染当且仅当 <code>awesome</code> 返回 truthy。</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">h1</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-if</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;awesome&quot;</span><span style="color:#BBBBBB;">&gt;Vue is awesome!&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="条件渲染分组" tabindex="-1"><a class="header-anchor" href="#条件渲染分组" aria-hidden="true">#</a> 条件渲染分组</h4><p>可以利用 <code>&lt;template&gt;</code> 只渲染其包裹元素而不渲染自身的特性，把 <code>&lt;template&gt;</code> 元素当 做用于分组的元素使用。</p><p>例：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-if</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;ok&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;Paragraph 1&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;Paragraph 2&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>当 <code>ok</code> 为 truthy 时的渲染结果：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;Paragraph 1&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;Paragraph 2&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="v-else" tabindex="-1"><a class="header-anchor" href="#v-else" aria-hidden="true">#</a> <code>v-else</code></h4><p><code>v-else</code> 可以作为 <code>v-if</code> 的逻辑<strong>否则</strong>块。其内容只会在其对应的所有前置条件逻辑 的表达式判断都为 falsy 时被渲染。</p><p><code>v-else</code> 元素必须紧跟在带 <code>v-if</code> 或者 <code>v-else-if</code> 的元素的后面，否则将不会被识别 。</p><p>示例：见 <a href="#v-else-if">v-else-if</a> 的示例。</p><h4 id="v-else-if" tabindex="-1"><a class="header-anchor" href="#v-else-if" aria-hidden="true">#</a> <code>v-else-if</code></h4><p><code>v-else-if</code> 可以作为 <code>v-if</code> 的逻辑<strong>否则如果</strong>块。其内容只会在指令表达式返回 truthy 值时被渲染。</p><p><code>v-else-if</code> 元素必须紧跟在带 <code>v-if</code> 的元素的后面，否则将不会被识别。</p><p>示例：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-if</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;type === &#39;A&#39;&quot;</span><span style="color:#BBBBBB;">&gt;A&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-else-if</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;type === &#39;B&#39;&quot;</span><span style="color:#BBBBBB;">&gt;B&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-else-if</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;type === &#39;C&#39;&quot;</span><span style="color:#BBBBBB;">&gt;C&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-else</span><span style="color:#BBBBBB;">&gt;Not A/B/C&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="v-show" tabindex="-1"><a class="header-anchor" href="#v-show" aria-hidden="true">#</a> <code>v-show</code></h3><p><code>v-show</code> 用于控制元素的可见性，当指令表达式为 falsy 时会将元素的 <code>display</code> CSS property 切换为 <code>none</code>。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p><code>v-show</code> 有更高的初始渲染开销，一旦渲染了就会一直驻留在渲染结果内，适用 于元素需<strong>频繁切换</strong>的情形。如果元素不需频繁切换，建议使用 <a href="#v-if"><code>v-if</code></a>。</p></div><h2 id="列表渲染" tabindex="-1"><a class="header-anchor" href="#列表渲染" aria-hidden="true">#</a> 列表渲染</h2><h3 id="把数组映射为一组元素" tabindex="-1"><a class="header-anchor" href="#把数组映射为一组元素" aria-hidden="true">#</a> 把数组映射为一组元素</h3><p><code>v-for</code> 指令在这里要使用 <code>item in items</code> 或 <code>(item, index) in items</code> 形式的特殊 语法，<code>in</code> 允许用 <code>of</code> 代替。其中， <code>items</code> 是源数据数组，<code>index</code> 是当前项的索引 ，<code>item</code> 是被迭代的数组元素的别名。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>不要与 ES 标准的 <code>for in</code> 混淆。ES 标准的是遍历键，而 Vue 是遍历值。</p></div><p>示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">data</span><span style="color:#BBBBBB;">() {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">      items</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#BBBBBB;">{ message</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&quot;Foo&quot;</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> { message</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&quot;Bar&quot;</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#BBBBBB;">    };</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">).</span><span style="color:#98C379;">mount</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&quot;#array-rendering&quot;</span><span style="color:#ABB2BF;">)</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">ul</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;array-rendering&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-for</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;item in items&quot;</span><span style="color:#BBBBBB;">&gt;{{ item.message }}&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">ul</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>渲染结果：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">ul</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;array-rendering&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;">&gt;Foo&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;">&gt;Bar&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">ul</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="把对象映射为一组元素" tabindex="-1"><a class="header-anchor" href="#把对象映射为一组元素" aria-hidden="true">#</a> 把对象映射为一组元素</h3><p><code>v-for</code> 指令在这里要使用 <code>value in object</code> 、 <code>(value, name) in object</code> 或 <code>(value, name, index) in object</code> 形式的特殊语法。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>在遍历对象时，Vue 会按 <code>Object.keys()</code> 的结果遍历，但是在不同的 JavaScript 引擎下的结果不一定都一致。</p></div><h3 id="设定范围以渲染一组元素" tabindex="-1"><a class="header-anchor" href="#设定范围以渲染一组元素" aria-hidden="true">#</a> 设定范围以渲染一组元素</h3><p><code>v-for</code> 指令在这里要使用 <code>value in rightBoundary</code> 形式的特殊语法，<code>value</code> 会从 <code>1</code> 开始，逐增至 <code>rightBoundary</code> 后结束。其中，<code>value</code> 是当前值，<code>rightBoundary</code> 是范围的右边界。</p><h3 id="维护状态" tabindex="-1"><a class="header-anchor" href="#维护状态" aria-hidden="true">#</a> 维护状态</h3><h4 id="列表就地更新策略" tabindex="-1"><a class="header-anchor" href="#列表就地更新策略" aria-hidden="true">#</a> 列表就地更新策略</h4><p>Vue 在更新用 <code>v-for</code> 渲染的元素列表时，它默认使用就地更新的策略。如果数据项的顺 序改变，Vue 将不会按照数据项的顺序移动 DOM 元素，而是就地重新渲染每个元素。</p><p>这个默认的模式只适用于<strong>不依赖子组件状态</strong>或<strong>临时 DOM 状态</strong> (例如：表单输入值) 的列表渲染输出。</p><h4 id="使用-key-attribute-跟踪以重用元素" tabindex="-1"><a class="header-anchor" href="#使用-key-attribute-跟踪以重用元素" aria-hidden="true">#</a> 使用 <code>key</code> attribute 跟踪以重用元素</h4><p>为每项提供一个唯一的 <code>key</code> attribute 可以让 Vue 重用当前元素，减少渲染量。因此建 议尽可能在使用 v-for 时提供 <code>key</code> attribute。</p><div class="custom-container warning"><p class="custom-container-title">警告</p><p>应该使用<strong>字符串或数值类型的值</strong>作为 <code>v-for</code> 的 key，使用对象或数组 之类的非基本类型值可能会导致渲染异常。</p></div><h3 id="循环渲染一段包含多个元素的内容" tabindex="-1"><a class="header-anchor" href="#循环渲染一段包含多个元素的内容" aria-hidden="true">#</a> 循环渲染一段包含多个元素的内容</h3><p>利用 <code>&lt;template&gt;</code> 的特性只渲染其包裹元素而不渲染自身的特性，可以使用带有 <code>v-for</code> 的 <code>&lt;template&gt;</code> 循环渲染一段包含多个元素的内容。例：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">ul</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-for</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;item in items&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:key</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;item.msg&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;">&gt;{{ item.msg }}&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;divider&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">role</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;presentation&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">ul</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="数组更新检测的情况" tabindex="-1"><a class="header-anchor" href="#数组更新检测的情况" aria-hidden="true">#</a> 数组更新检测的情况</h3><h4 id="调用使数组变更的方法" tabindex="-1"><a class="header-anchor" href="#调用使数组变更的方法" aria-hidden="true">#</a> 调用使数组变更的方法</h4><p>Vue 将被侦听的数组的变更自身方法进行了包裹，调用这些方法将会触发视图更新。这些被 包裹过的方法包括： <code>push()</code>、<code>pop()</code>、<code>shift()</code>、<code>unshift()</code>、<code>splice()</code>、<code>sort()</code>、<code>reverse()</code> 。</p><h4 id="数组被替换" tabindex="-1"><a class="header-anchor" href="#数组被替换" aria-hidden="true">#</a> 数组被替换</h4><p>Vue 对用一个含有相同元素的数组去替换原来的数组有专门的优化，这个操作是非常高效的 。</p><h3 id="显示数组被处理后的结果" tabindex="-1"><a class="header-anchor" href="#显示数组被处理后的结果" aria-hidden="true">#</a> 显示数组被处理后的结果</h3><p>面对需要把数组排序、过滤等处理的需求，通常使用一个专门的方法处理并返回一个新数组 解决此类问题，也可以使用计算属性。例：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">ul</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-for</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;numbers in sets&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-for</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;n in even(numbers)&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:key</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;n&quot;</span><span style="color:#BBBBBB;">&gt;{{ n }}&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">ul</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#98C379;">data</span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    sets</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[[</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">1</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">2</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">3</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">4</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">5</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">],</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#C678DD;">6</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">7</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">8</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">9</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">10</span><span style="color:#ABB2BF;">]]</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">methods</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">even</span><span style="color:#ABB2BF;">(numbers)</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">numbers</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">filter</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;font-style:italic;">number</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">number</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">%</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">2</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">===</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="v-for-与-v-if-的优先级" tabindex="-1"><a class="header-anchor" href="#v-for-与-v-if-的优先级" aria-hidden="true">#</a> <code>v-for</code> 与 <code>v-if</code> 的优先级</h3><div class="custom-container warning"><p class="custom-container-title">警告</p><p>在同一元素上使用 <code>v-if</code> 和 <code>v-for</code> 容易因为优先级问题导致代码出现漏 洞，应当<strong>提前处理好数组</strong>或把 <code>v-for</code> 移动到 <code>&lt;template&gt;</code> 标签。更多细节可查 阅<a href="https://v3.cn.vuejs.org/style-guide/#%E9%81%BF%E5%85%8D-v-if-%E5%92%8C-v-for-%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8%E5%BF%85%E8%A6%81" target="_blank" rel="noopener noreferrer">Vue 风格指南<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a>。</p></div><p>当它们处于同一节点，<code>v-if</code> 的优先级比 <code>v-for</code> 更高，因此 <code>v-if</code> 将没有权限访问 v-for 里的变量，如：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-for</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;todo in todos&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-if</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;!todo.isComplete&quot;</span><span style="color:#BBBBBB;">&gt;{{ todo.name }}&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><code>v-if</code> 在这里不能访问 <code>todo</code>。把 <code>v-for</code> 移动到 <code>&lt;template&gt;</code> 标签中以修正：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-for</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;todo in todos&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:key</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;todo.name&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-if</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;!todo.isComplete&quot;</span><span style="color:#BBBBBB;">&gt;{{ todo.name }}&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="事件" tabindex="-1"><a class="header-anchor" href="#事件" aria-hidden="true">#</a> 事件</h2><p>和 DOM 一样，Vue 的自定义事件也是从内到外的传递。</p><h3 id="自定义事件" tabindex="-1"><a class="header-anchor" href="#自定义事件" aria-hidden="true">#</a> 自定义事件</h3><h4 id="事件名" tabindex="-1"><a class="header-anchor" href="#事件名" aria-hidden="true">#</a> 事件名</h4><p>如果使用 DOM 模板则应当使用 kebab-case 的法则命名。如果要使用 camelCase 法则命名的事件，应当以 kebab-case 的形式输入，Vue 会自动识别。如果不使用 DOM 模板，则没有这个限制。</p><h4 id="定义自定义事件" tabindex="-1"><a class="header-anchor" href="#定义自定义事件" aria-hidden="true">#</a> 定义自定义事件</h4><p>可以通过设置 <code>emits</code> 选项定义组件将发出的事件。<code>emits</code> 的值应当为字符串数组或对象，若不需要检验则使用字符串数组，其元素为自定义事件的名字。若需要检验请参考<a href="#%E9%AA%8C%E8%AF%81%E6%8A%9B%E5%87%BA%E7%9A%84%E4%BA%8B%E4%BB%B6">验证抛出的事件</a>。</p><p>当在 <code>emits</code> 选项中定义了原生事件时，将使用组件中的事件替代原生事件侦听器。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>建议定义所有发出的事件，以便更好地记录组件应该如何工作。</p></div><h4 id="验证抛出的事件" tabindex="-1"><a class="header-anchor" href="#验证抛出的事件" aria-hidden="true">#</a> 验证抛出的事件</h4><p>设置 <code>emits</code> 选项为对象，其键为每个事件的名字，值为其对应事件的一个验证函数。其中，验证函数的参数为事件触发时传递的参数，并返回一个值指示事件是否有效。</p><p>示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;custom-form&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  emits</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// 没有验证</span></span>
<span class="line"><span style="color:#BBBBBB;">    click</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">null</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// 验证 submit 事件</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">submit</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> ({ </span><span style="color:#D19A66;font-style:italic;">email</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">password</span><span style="color:#BBBBBB;"> }) </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#E06C75;">if</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">(email</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">&amp;&amp;</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">password)</span><span style="color:#BBBBBB;"> { </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">true</span><span style="color:#BBBBBB;"> } </span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#E06C75;">else</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">        </span><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">warn</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;Invalid submit event payload!&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">        </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">false</span></span>
<span class="line"><span style="color:#BBBBBB;">      }</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  methods</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">submitForm</span><span style="color:#BBBBBB;">(</span><span style="color:#D19A66;font-style:italic;">email</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">password</span><span style="color:#BBBBBB;">) {</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">$emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;submit&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">email,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">password</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="监听事件" tabindex="-1"><a class="header-anchor" href="#监听事件" aria-hidden="true">#</a> 监听事件</h3><p>我们可以使用 <code>v-on</code> 指令 (或其<a href="#v-on-%E7%BC%A9%E5%86%99">缩写</a>) 以监听 DOM 事件。并在触发事件 时执行一些 JavaScript。指令表达式应当返回一个需要调用的方法或者。指令的值也可以 是一个内联 JavaScript 语句调用。</p><p>示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{</span></span>
<span class="line"><span style="color:#BBBBBB;">  methods</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">greet</span><span style="color:#BBBBBB;">(</span><span style="color:#D19A66;font-style:italic;">event</span><span style="color:#BBBBBB;">) {</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#98C379;">alert</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;Hello Vue.js!&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">).</span><span style="color:#98C379;">mount</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;#event-with-method&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;event-with-method&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">@click</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;greet&quot;</span><span style="color:#BBBBBB;">&gt;Greet&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="内联处理器中的方法" tabindex="-1"><a class="header-anchor" href="#内联处理器中的方法" aria-hidden="true">#</a> 内联处理器中的方法</h3><p>可以在内联 JavaScript 语句中调用方法：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{</span></span>
<span class="line"><span style="color:#BBBBBB;">  methods</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">say</span><span style="color:#BBBBBB;">(</span><span style="color:#D19A66;font-style:italic;">message</span><span style="color:#BBBBBB;">) {</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#98C379;">alert</span><span style="color:#ABB2BF;">(message)</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">).</span><span style="color:#98C379;">mount</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&quot;#inline-handler&quot;</span><span style="color:#ABB2BF;">)</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;inline-handler&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">@click</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;say(&#39;hi&#39;)&quot;</span><span style="color:#BBBBBB;">&gt;Say hi&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="多事件处理器" tabindex="-1"><a class="header-anchor" href="#多事件处理器" aria-hidden="true">#</a> 多事件处理器</h3><p>可以有多个事件处理器，可以这些方法由逗号运算符分隔：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">@click</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;one($event), two($event)&quot;</span><span style="color:#BBBBBB;">&gt;Submit&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="事件修饰符" tabindex="-1"><a class="header-anchor" href="#事件修饰符" aria-hidden="true">#</a> 事件修饰符</h3><p>事件修饰符用于简化代码。使用事件<a href="#%E4%BF%AE%E9%A5%B0%E7%AC%A6">修饰符</a>可以让方法更简洁而不用去处理 DOM 事件细节。</p><p>详见<a href="/static_blog/computer/vue/3/quick-ref/derectives.html#v-on" class="">指令 API</a>。</p><h3 id="按键修饰符" tabindex="-1"><a class="header-anchor" href="#按键修饰符" aria-hidden="true">#</a> 按键修饰符</h3><p>按键修饰符用于为键盘事件的触发增加按键条件，如 <code>@keyup.enter</code> 只会在 enter 键触 发 <code>keyup</code> 才会执行事件处理器。</p><p>按键修饰符的名字为 <a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values" target="_blank" rel="noopener noreferrer"><code>KeyboardEvent.key</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a> 的任一可取值。</p><h4 id="按键别名" tabindex="-1"><a class="header-anchor" href="#按键别名" aria-hidden="true">#</a> 按键别名</h4><p>Vue 为最常用的键提供了别名：</p><p><code>.enter</code>、<code>.tab</code>、<code>.delete</code> (捕获“删除”和“退格”键 )、<code>.esc</code>、<code>.space</code>、<code>.up</code>、<code>.down</code>、<code>.left</code>、<code>.right</code>。</p><h3 id="系统修饰键" tabindex="-1"><a class="header-anchor" href="#系统修饰键" aria-hidden="true">#</a> 系统修饰键</h3><p>系统修饰键可以让仅在<strong>按下</strong>相应按键时才触发鼠标或键盘事件的监听器。所 有<a href="#%E4%BF%AE%E9%A5%B0%E7%AC%A6">修饰符</a>为：</p><p><code>.ctrl</code>、<code>.alt</code>、<code>.shift</code>、<code>.meta</code></p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>在 Mac 系统键盘上，meta 对应 <strong>command 键</strong> (⌘)。在 Windows 系统键盘 meta 对应 <strong>Windows 徽标键</strong> (⊞)。在 Sun 操作系统键盘上，meta 对应<strong>实心宝石键</strong> (◆)。在其他特定键盘上，尤其在 MIT 和 Lisp 机器的键盘、以及其后继产品，比如 Knight 键盘、space-cadet 键盘，meta 被标记为“<strong>META</strong>”。在 Symbolics 键盘上 ，meta 被标记为“<strong>META</strong>”或者“<strong>Meta</strong>”。</p></div><h4 id="exact-修饰符" tabindex="-1"><a class="header-anchor" href="#exact-修饰符" aria-hidden="true">#</a> <code>.exact</code> 修饰符</h4><p>该修饰符可以让系统修饰键<strong>仅为</strong>指定的修饰键才能触发。例如：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#676F7D;">&lt;!-- 有且只有 Ctrl 被按下的时候才触发 --&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">@click.ctrl.exact</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;onCtrlClick&quot;</span><span style="color:#BBBBBB;">&gt;A&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#676F7D;">&lt;!-- 没有任何系统修饰符被按下的时候才触发 --&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">@click.exact</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;onClick&quot;</span><span style="color:#BBBBBB;">&gt;A&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="鼠标按钮修饰符" tabindex="-1"><a class="header-anchor" href="#鼠标按钮修饰符" aria-hidden="true">#</a> 鼠标按钮修饰符</h4><p>限制鼠标按键按下的情况。 <code>.left</code>、<code>.right</code>、<code>.middle</code>。</p><h3 id="触发事件" tabindex="-1"><a class="header-anchor" href="#触发事件" aria-hidden="true">#</a> 触发事件</h3><p>调用内建的 <code>$emit</code> 方法可以触发一个事件。<code>$emit</code> 的第一个参数为字符串形式的事件 名。</p><h4 id="使用事件抛出一个值" tabindex="-1"><a class="header-anchor" href="#使用事件抛出一个值" aria-hidden="true">#</a> 使用事件抛出一个值</h4><p>可以使用 <code>$emit</code> 的第二个参数让事件抛出一个值。</p><h3 id="v-model-原理" tabindex="-1"><a class="header-anchor" href="#v-model-原理" aria-hidden="true">#</a> <code>v-model</code> 原理</h3><p><code>v-model</code> 实际上就是动态绑定一个 attribute，然后监听变化事件而改变这个 attribute 的值。</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">input</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;searchText&quot;</span><span style="color:#BBBBBB;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>等价于：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">input</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:value</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;searchText&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">@input</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;searchText = $event.target.value&quot;</span><span style="color:#BBBBBB;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="自定义-v-model" tabindex="-1"><a class="header-anchor" href="#自定义-v-model" aria-hidden="true">#</a> 自定义 <code>v-model</code></h3><h4 id="让组件支持使用-v-model" tabindex="-1"><a class="header-anchor" href="#让组件支持使用-v-model" aria-hidden="true">#</a> 让组件支持使用 <code>v-model</code></h4><p><code>v-model</code> 的原理请参考：<a href="#v-model-%E5%8E%9F%E7%90%86"><code>v-model</code> 的原理</a>。</p><p>通过设置特殊的 <code>modelValue</code> prop 和自定义 <code>update:modelValue</code> 事件，即可让组件支持使用 <code>v-model</code>。</p><p>其中，<code>modelValue</code> prop 是 <code>v-model</code> 动态绑定的值，自定义 <code>update:modelValue</code> 事件是驱动数据更新事件，当数据更新时，应当使用触发该事件并传递 <code>modelValue</code> 的新值。</p><p>例如，注册一个 <code>custom-input</code> 组件：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;custom-input&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  props</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">&#39;modelValue&#39;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#BBBBBB;">  emits</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">&#39;update:modelValue&#39;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#BBBBBB;">  template</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">`</span></span>
<span class="line"><span style="color:#E5C07B;">    &lt;input</span></span>
<span class="line"><span style="color:#E5C07B;">      :value=&quot;modelValue&quot;</span></span>
<span class="line"><span style="color:#E5C07B;">      @input=&quot;$emit(&#39;update:modelValue&#39;, $event.target.value)&quot;</span></span>
<span class="line"><span style="color:#E5C07B;">    &gt;</span></span>
<span class="line"><span style="color:#E5C07B;">  `</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>使用该组件：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">custom-input</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;searchText&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">custom-input</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">通过计算属性简化事件的触发</p><p>在上面的示例中，每次值更新都要调用一次 <code>$emit</code> 函数，可以通过设置计算属性的 setter 包装 <code>$emit</code> 函数以简化事件的触发：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;custom-input&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  props</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">&#39;modelValue&#39;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#BBBBBB;">  emits</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">&#39;update:modelValue&#39;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#BBBBBB;">  template</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">`&lt;input v-model=&quot;value&quot;&gt;`</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  computed</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    value</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#98C379;">get</span><span style="color:#BBBBBB;">() { </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.modelValue</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#98C379;">set</span><span style="color:#BBBBBB;">(</span><span style="color:#D19A66;font-style:italic;">value</span><span style="color:#BBBBBB;">) { </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">$emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;update:modelValue&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">value)</span><span style="color:#BBBBBB;">}</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></div><h4 id="自定义-v-model-参数与多个-v-model-绑定" tabindex="-1"><a class="header-anchor" href="#自定义-v-model-参数与多个-v-model-绑定" aria-hidden="true">#</a> 自定义 <code>v-model</code> 参数与多个 <code>v-model</code> 绑定</h4><p>确定要设置的 <code>v-model</code> 参数名，然后声明好与参数名同名的 prop 与 <code>update:参数名</code> 事件，即可自定义 <code>v-model</code> 参数。</p><p>通过在模板内为多个 <code>v-model</code> 添加参数即可完成多个 <code>v-model</code> 绑定。</p><p>例如，声明 <code>firstName</code> 和 <code>lastName</code> prop 与其对应的事件 <code>update:firstName</code> 和 <code>update:lastName</code> ：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">user-name</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">v-model:first-name</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;firstName&quot;</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">v-model:last-name</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;lastName&quot;</span></span>
<span class="line"><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">user-name</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;user-name&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  props</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    firstName</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">    lastName</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">String</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  emits</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">&#39;update:firstName&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;update:lastName&#39;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#BBBBBB;">  template</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">`</span></span>
<span class="line"><span style="color:#E5C07B;">    &lt;input </span></span>
<span class="line"><span style="color:#E5C07B;">      type=&quot;text&quot;</span></span>
<span class="line"><span style="color:#E5C07B;">      :value=&quot;firstName&quot;</span></span>
<span class="line"><span style="color:#E5C07B;">      @input=&quot;$emit(&#39;update:firstName&#39;, $event.target.value)&quot;&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    &lt;input</span></span>
<span class="line"><span style="color:#E5C07B;">      type=&quot;text&quot;</span></span>
<span class="line"><span style="color:#E5C07B;">      :value=&quot;lastName&quot;</span></span>
<span class="line"><span style="color:#E5C07B;">      @input=&quot;$emit(&#39;update:lastName&#39;, $event.target.value)&quot;&gt;</span></span>
<span class="line"><span style="color:#E5C07B;">  `</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="处理-v-model-修饰符" tabindex="-1"><a class="header-anchor" href="#处理-v-model-修饰符" aria-hidden="true">#</a> 处理 <code>v-model</code> 修饰符</h4><p>无参数 <code>v-model</code> 的修饰符会以 <code>modelModifiers</code> prop 的形式传入组件，应当先声明该 prop。</p><p>对于带参数的 v-model 绑定，生成的 prop 名称将为 <code>arg + &quot;Modifiers&quot;</code>。</p><p>生成的 prop 是个对象，其键为修饰符名，值为 <code>true</code>。</p><p>获取修饰符后，最好在触发更新事件之前处理 <code>v-model</code> 修饰符。</p><p>示例：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;app&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">my-component</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-model.capitalize</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;myText&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">my-component</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  {{ myText }}</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">app</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">data</span><span style="color:#BBBBBB;">() { </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> { myText</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;&#39;</span><span style="color:#BBBBBB;"> }}</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;my-component&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  props</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    modelValue</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">    modelModifiers</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> { </span><span style="color:#98C379;">default</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> () </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{}</span><span style="color:#ABB2BF;">)</span><span style="color:#BBBBBB;"> } </span><span style="color:#676F7D;">// 默认值为 {}</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  emits</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">&#39;update:modelValue&#39;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#BBBBBB;">  methods</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">emitValue</span><span style="color:#BBBBBB;">(</span><span style="color:#D19A66;font-style:italic;">e</span><span style="color:#BBBBBB;">) {</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#56B6C2;">let</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">value</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">target</span><span style="color:#ABB2BF;">.value</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#E06C75;">if</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">modelModifiers</span><span style="color:#ABB2BF;">.capitalize)</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">        </span><span style="color:#ABB2BF;">value</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">value</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">charAt</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">0</span><span style="color:#ABB2BF;">).</span><span style="color:#98C379;">toUpperCase</span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">value</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">slice</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">      }</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">$emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;update:modelValue&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">value)</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  template</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">`&lt;input type=&quot;text&quot;</span></span>
<span class="line"><span style="color:#E5C07B;">    :value=&quot;modelValue&quot;</span></span>
<span class="line"><span style="color:#E5C07B;">    @input=&quot;emitValue&quot;&gt;`</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">mount</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;#app&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="表单输入绑定" tabindex="-1"><a class="header-anchor" href="#表单输入绑定" aria-hidden="true">#</a> 表单输入绑定</h2><h3 id="使用-v-model-创建双向数据绑定" tabindex="-1"><a class="header-anchor" href="#使用-v-model-创建双向数据绑定" aria-hidden="true">#</a> 使用 <code>v-model</code> 创建双向数据绑定</h3><p>可以用 <code>v-model</code> 指令在表单 <code>&lt;input&gt;</code>、<code>&lt;textarea&gt;</code> 及 <code>&lt;select&gt;</code> 元素上创建双向 数据绑定。它会根据控件类型自动选取正确的方法来更新元素。<code>v-model</code> 本质上是语法糖 。</p><h4 id="设置初始项的正确方法" tabindex="-1"><a class="header-anchor" href="#设置初始项的正确方法" aria-hidden="true">#</a> 设置初始项的正确方法</h4><p><code>v-model</code> 会<strong>忽略</strong>所有表单元素的 <code>value</code>、<code>checked</code>、<code>selected</code> <code>attribute</code> 的<strong>初始值</strong>，始终将当前活动实例的数据作为数据来源。应通过在组件的 <strong><code>data</code></strong> 选 项中声明初始值。</p><h4 id="v-model-对不同元素的处理" tabindex="-1"><a class="header-anchor" href="#v-model-对不同元素的处理" aria-hidden="true">#</a> <code>v-model</code> 对不同元素的处理</h4><ul><li><strong><code>text</code></strong> 和 <strong><code>textarea</code></strong> 元素使用 <code>value</code> property 和 <code>input</code> 事件；</li><li><strong><code>checkbox</code></strong> 和 <strong><code>radio</code></strong> 使用 <code>checked</code> property 和 <code>change</code> 事件；</li><li><strong><code>select</code></strong> 字段将 <strong><code>value</code></strong> 作为 prop 并将 <code>change</code> 作为事件。</li></ul><h4 id="在输入法组织文字的过程中得到更新" tabindex="-1"><a class="header-anchor" href="#在输入法组织文字的过程中得到更新" aria-hidden="true">#</a> 在输入法组织文字的过程中得到更新</h4><p><code>v-model</code> 不会在输入法组织文字过程中得到更新。如果想响应这些更新，请使用 <code>input</code> 事件监听器和 <code>value</code> 绑定来替代 <code>v-model</code>。</p><h3 id="v-model-在各表单元素的使用方法" tabindex="-1"><a class="header-anchor" href="#v-model-在各表单元素的使用方法" aria-hidden="true">#</a> <code>v-model</code> 在各表单元素的使用方法</h3><h4 id="文本-text" tabindex="-1"><a class="header-anchor" href="#文本-text" aria-hidden="true">#</a> 文本 (Text)</h4><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">input</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;message&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">placeholder</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;edit me&quot;</span><span style="color:#BBBBBB;"> /&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;Message is: {{ message }}&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="多行文本-textarea" tabindex="-1"><a class="header-anchor" href="#多行文本-textarea" aria-hidden="true">#</a> 多行文本 (Textarea)</h4><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;Multiline message is:&lt;/</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">style</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;white-space: pre-line;&quot;</span><span style="color:#BBBBBB;">&gt;{{ message }}&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">textarea</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;message&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">placeholder</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;add multiple lines&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">textarea</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-container warning"><p class="custom-container-title">警告</p><p>插值在 textarea 中不起作用。应使用 <code>v-model</code> 来代替。</p></div><h4 id="复选框-checkbox" tabindex="-1"><a class="header-anchor" href="#复选框-checkbox" aria-hidden="true">#</a> 复选框 (Checkbox)</h4><h5 id="单复选框" tabindex="-1"><a class="header-anchor" href="#单复选框" aria-hidden="true">#</a> 单复选框</h5><p>单复选框应绑定到布尔值。</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">input</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">type</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;checkbox&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;checkbox&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;checked&quot;</span><span style="color:#BBBBBB;"> /&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">label</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">for</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;checkbox&quot;</span><span style="color:#BBBBBB;">&gt;{{ checked }}&lt;/</span><span style="color:#E06C75;">label</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="多复选框" tabindex="-1"><a class="header-anchor" href="#多复选框" aria-hidden="true">#</a> 多复选框</h5><p>多个复选框，绑定到同一个数组，被勾选的元素其 <code>value</code> attribute 会存在于数组内。</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;v-model-multiple-checkboxes&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">input</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">type</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;checkbox&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;jack&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">value</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;Jack&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;checkedNames&quot;</span><span style="color:#BBBBBB;"> /&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">label</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">for</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;jack&quot;</span><span style="color:#BBBBBB;">&gt;Jack&lt;/</span><span style="color:#E06C75;">label</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">input</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">type</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;checkbox&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;john&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">value</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;John&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;checkedNames&quot;</span><span style="color:#BBBBBB;"> /&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">label</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">for</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;john&quot;</span><span style="color:#BBBBBB;">&gt;John&lt;/</span><span style="color:#E06C75;">label</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">br</span><span style="color:#BBBBBB;"> /&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;Checked names: {{ checkedNames }}&lt;/</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="单选框-radio" tabindex="-1"><a class="header-anchor" href="#单选框-radio" aria-hidden="true">#</a> 单选框 (Radio)</h4><p>单选框应绑定到字符串。</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;v-model-radiobutton&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">input</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">type</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;radio&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;one&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">value</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;One&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;picked&quot;</span><span style="color:#BBBBBB;"> /&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">label</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">for</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;one&quot;</span><span style="color:#BBBBBB;">&gt;One&lt;/</span><span style="color:#E06C75;">label</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">br</span><span style="color:#BBBBBB;"> /&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">input</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">type</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;radio&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;two&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">value</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;Two&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;picked&quot;</span><span style="color:#BBBBBB;"> /&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">label</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">for</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;two&quot;</span><span style="color:#BBBBBB;">&gt;Two&lt;/</span><span style="color:#E06C75;">label</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">br</span><span style="color:#BBBBBB;"> /&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;Picked: {{ picked }}&lt;/</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="选择框-select" tabindex="-1"><a class="header-anchor" href="#选择框-select" aria-hidden="true">#</a> 选择框 (Select)</h4><p>选项推荐用 <code>v-for</code> 以进行动态渲染</p><h5 id="单选选择框" tabindex="-1"><a class="header-anchor" href="#单选选择框" aria-hidden="true">#</a> 单选选择框</h5><p>选择框应绑定到字符串。</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;v-model-select&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;demo&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">select</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;selected&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">option</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">disabled</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">value</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;&quot;</span><span style="color:#BBBBBB;">&gt;Please select one&lt;/</span><span style="color:#E06C75;">option</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">option</span><span style="color:#BBBBBB;">&gt;A&lt;/</span><span style="color:#E06C75;">option</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">option</span><span style="color:#BBBBBB;">&gt;B&lt;/</span><span style="color:#E06C75;">option</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">option</span><span style="color:#BBBBBB;">&gt;C&lt;/</span><span style="color:#E06C75;">option</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#E06C75;">select</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;Selected: {{ selected }}&lt;/</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>建议提供一个值为空的禁用选项若 <code>v-model</code> 表达式的初始值未能匹配任何选项 ，<code>&lt;select&gt;</code> 元素将被渲染为<strong>未选中</strong>状态。在 iOS 中，这会使用户无法选择第一个选 项。因为这样的情况下，iOS 不会触发 <code>change</code> 事件。因此，更推荐像上面这样提供一个 值为空的禁用选项。</p></div><h5 id="多选选择框" tabindex="-1"><a class="header-anchor" href="#多选选择框" aria-hidden="true">#</a> 多选选择框</h5><p>选择框应绑定到字符串字符串。</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">select</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;selected&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">multiple</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">option</span><span style="color:#BBBBBB;">&gt;A&lt;/</span><span style="color:#E06C75;">option</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">option</span><span style="color:#BBBBBB;">&gt;B&lt;/</span><span style="color:#E06C75;">option</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">option</span><span style="color:#BBBBBB;">&gt;C&lt;/</span><span style="color:#E06C75;">option</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">select</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">br</span><span style="color:#BBBBBB;"> /&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;Selected: {{ selected }}&lt;/</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="值绑定" tabindex="-1"><a class="header-anchor" href="#值绑定" aria-hidden="true">#</a> 值绑定</h3><p>对于单选按钮，复选框及选择框的选项，可以让 <code>v-model</code> 绑定的自定义的值。</p><h4 id="复选框-checkbox-1" tabindex="-1"><a class="header-anchor" href="#复选框-checkbox-1" aria-hidden="true">#</a> 复选框 (Checkbox)</h4><p>通过设置 <code>true-value</code> 和 <code>false-value</code> 可以设置复选框被选中和为选中时 <code>v-model</code> 绑定的数据的值。</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">input</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">type</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;checkbox&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;toggle&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">true-value</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;yes&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">false-value</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;no&quot;</span><span style="color:#BBBBBB;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">vm</span><span style="color:#ABB2BF;">.toggle</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">===</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&quot;yes&quot;</span><span style="color:#BBBBBB;">; </span><span style="color:#676F7D;">// 选中时</span></span>
<span class="line"><span style="color:#61AFEF;">vm</span><span style="color:#ABB2BF;">.toggle</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">===</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&quot;no&quot;</span><span style="color:#BBBBBB;">; </span><span style="color:#676F7D;">// 未选中时</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p><code>true-value</code> 和 <code>false-value</code> attribute 并不会影响输入控件的 <code>value</code> attribute，表单提交的是 <code>value</code> attribute 的值。</p></div><h4 id="单选框-radio-1" tabindex="-1"><a class="header-anchor" href="#单选框-radio-1" aria-hidden="true">#</a> 单选框 (Radio)</h4><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">input</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">type</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;radio&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;pick&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-bind:value</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;a&quot;</span><span style="color:#BBBBBB;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">vm</span><span style="color:#ABB2BF;">.pick</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">===</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">vm</span><span style="color:#ABB2BF;">.a</span><span style="color:#BBBBBB;">; </span><span style="color:#676F7D;">// 选中时</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="选择框选项-select-options" tabindex="-1"><a class="header-anchor" href="#选择框选项-select-options" aria-hidden="true">#</a> 选择框选项 (Select Options)</h4><p>选择框选项支持内联对象字面量：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">select</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;selected&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#676F7D;">&lt;!-- 内联对象字面量 --&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">option</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:value</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;{ number: 123 }&quot;</span><span style="color:#BBBBBB;">&gt;123&lt;/</span><span style="color:#E06C75;">option</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">select</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="表单修饰符" tabindex="-1"><a class="header-anchor" href="#表单修饰符" aria-hidden="true">#</a> 表单修饰符</h3><p>参考：<a href="#%E4%BF%AE%E9%A5%B0%E7%AC%A6">修饰符</a></p><h4 id="lazy" tabindex="-1"><a class="header-anchor" href="#lazy" aria-hidden="true">#</a> <code>.lazy</code></h4><p>让 <code>v-model</code> 绑定 <code>change</code> 事件而不是 <code>input</code> 事件。</p><h4 id="number" tabindex="-1"><a class="header-anchor" href="#number" aria-hidden="true">#</a> <code>.number</code></h4><p>自动将用户的输入值转为数值类型。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>如果输入类型是 <code>number</code>，则无需为 <code>v-model</code> 添加 .number 修饰符。</p></div><h4 id="trim" tabindex="-1"><a class="header-anchor" href="#trim" aria-hidden="true">#</a> <code>.trim</code></h4><p>自动过滤用户输入的首尾空白字符。</p><h3 id="在组件上使用-v-model" tabindex="-1"><a class="header-anchor" href="#在组件上使用-v-model" aria-hidden="true">#</a> 在组件上使用 <code>v-model</code></h3><p>参考：<a href="#%E8%AE%A9%E7%BB%84%E4%BB%B6%E6%94%AF%E6%8C%81%E4%BD%BF%E7%94%A8-v-model">让组件支持使用 <code>v-model</code></a></p><h2 id="插槽" tabindex="-1"><a class="header-anchor" href="#插槽" aria-hidden="true">#</a> 插槽</h2><p>插槽是一套内容分发的 API，分发组件的 innerHTML 的内容至组件内适当的位置。</p><h3 id="通过-slot-直接分发内容" tabindex="-1"><a class="header-anchor" href="#通过-slot-直接分发内容" aria-hidden="true">#</a> 通过 <code>&lt;slot&gt;</code> 直接分发内容</h3><p>组件元素的内容默认是会被抛弃的，使用 <code>&lt;slot&gt;</code> 元素即可指定组件的内容应该被渲染的地方：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">todo-button</span><span style="color:#BBBBBB;">&gt; Add todo &lt;/</span><span style="color:#E06C75;">todo-button</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><code>todo-button</code> 组件模板：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;btn-primary&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>当组件渲染的时候，<code>&lt;slot&gt;&lt;/slot&gt;</code> 将会被替换为“Add todo”。</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;btn-primary&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  Add todo</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="插槽的渲染作用域" tabindex="-1"><a class="header-anchor" href="#插槽的渲染作用域" aria-hidden="true">#</a> 插槽的渲染作用域</h3><p>在插槽使用数据的时候，插槽的并不能访问其组件示例的作用域，而是向组件传递内容的组件示例作用域。若要使插槽能访问其所在组件实例的特定数据，参考<a href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD">作用域插槽</a>。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>父级模板里的所有内容都是在父级作用域中编译的；子模板里的所有内容都是在子作用域中编译的。</p></div><h3 id="备用内容" tabindex="-1"><a class="header-anchor" href="#备用内容" aria-hidden="true">#</a> 备用内容</h3><p>备用内容用于，当外部没有传入内容时，就显示备用的内容。</p><p>设置备用内容的做法在 <code>&lt;slot&gt;</code> 标签内设置内容。</p><p>例，设置组件的备用内容为 <code>Submit</code>。</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">type</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;submit&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;Submit&lt;/</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在使用该组件并没有提供内容时就会显示该内容。</p><h3 id="具名插槽" tabindex="-1"><a class="header-anchor" href="#具名插槽" aria-hidden="true">#</a> 具名插槽</h3><p>设置多个具名插槽就可以控制组件内多个元素的内容。</p><h4 id="具名插槽的声明" tabindex="-1"><a class="header-anchor" href="#具名插槽的声明" aria-hidden="true">#</a> 具名插槽的声明</h4><p>让 <code>&lt;slot&gt;</code> 元素添上 <code>name</code> attribute，令其值为插槽名即可声明一个具名插槽。例：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;container&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">header</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">name</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;header&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#E06C75;">header</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">main</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#E06C75;">main</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">footer</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">name</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;footer&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#E06C75;">footer</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="具名插槽的内容提供" tabindex="-1"><a class="header-anchor" href="#具名插槽的内容提供" aria-hidden="true">#</a> 具名插槽的内容提供</h4><p>可以在一个 <code>&lt;template&gt;</code> 元素上使用 <code>v-slot</code> 指令（或其<a href="#v-slot-%E7%BC%A9%E5%86%99"><strong>缩写</strong></a>），并以参数的形式加上插槽的名称，其值请参考<a href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD">作用域插槽</a>。</p><p>例：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">base-layout</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-slot:header</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#BBBBBB;">&gt;Here might be a page title&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-slot:default</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;A paragraph for the main content.&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;And another one.&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-slot:footer</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;Here&#39;s some contact info&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">base-layout</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="动态插槽名" tabindex="-1"><a class="header-anchor" href="#动态插槽名" aria-hidden="true">#</a> 动态插槽名</h4><p>动态指令参数可以用在 <code>v-slot</code> 上以定义动态的插槽名：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">base-layout</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-slot:[dynamicSlotName]</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    ...</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">base-layout</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>只要出现多个插槽，请始终为所有的插槽使用完整的基于 <code>&lt;template&gt;</code> 的语法。</p></div><h3 id="作用域插槽" tabindex="-1"><a class="header-anchor" href="#作用域插槽" aria-hidden="true">#</a> 作用域插槽</h3><p>为使插槽能访问组件内的特定数据，可以在 <code>&lt;slot&gt;</code> 标签上使用 <code>v-bind</code> 指令把内部 property 动态导出到内容作用域：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">ul</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-for</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;( item, index ) in items&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:item</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;item&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:index</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;index&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:another-attribute</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;anotherAttribute&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#E06C75;">li</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">ul</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>绑定在 <code>&lt;slot&gt;</code> 元素上的 attribute 被称为<strong>插槽 prop</strong>。</p><p>如果提供的内容只有默认插槽，则应当在组件元素上添加 <code>v-slot</code> 指令，其值为组件实例导出的插槽 prop 在当前作用域的的对象名。</p><p>否则，应当在组件每个内容的对应 <code>&lt;template&gt;</code> 上分别添加 <code>v-slot:插槽名</code> 指令，其值为组件实例导出的插槽 prop 在当前作用域的的对象名。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>注意，<code>v-slot</code> 缩写语法和具名插槽<strong>不能混用</strong>。若要在使用具名插槽时使用默认插槽，应当写成 <code>v-slot:default</code>。</p></div><p>示例：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">todo-list</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-slot:default</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;slotProps&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">i</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;fas fa-check&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">i</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;green&quot;</span><span style="color:#BBBBBB;">&gt;{{ slotProps.item }}&lt;/</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-slot:other</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;otherSlotProps&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    ...</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">todo-list</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">解构插槽 Prop</p><p><code>v-slot</code> 指令的值类似于一个函数的形参，可以利用<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Object_destructuring" target="_blank" rel="noopener noreferrer">解构赋值<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a>解构插槽 prop。</p><p>示例，这里重命名了 <code>item</code> 为 <code>todo</code> ，并设置其默认值为 <code>&#39;Placeholder&#39;</code>：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">todo-list</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-slot</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;{ item: todo = &#39;Placeholder&#39; }&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">i</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;fas fa-check&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">i</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;green&quot;</span><span style="color:#BBBBBB;">&gt;{{ todo }}&lt;/</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">todo-list</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><div class="highlight-line"> </div><br><div class="highlight-line"> </div><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div><h3 id="在-javascript-里读取插槽" tabindex="-1"><a class="header-anchor" href="#在-javascript-里读取插槽" aria-hidden="true">#</a> 在 JavaScript 里读取插槽</h3><p>组件实例的 <code>$slots</code> 对象的每个 property 是获取其名对应插槽 VNode 的函数。如，获取默认插槽的 VNode：<code>vm.$slots.default()</code>。</p><p>通常用在<a href="#%E6%B8%B2%E6%9F%93%E5%87%BD%E6%95%B0">渲染函数</a>上，示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">app</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;blog-post&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">render</span><span style="color:#BBBBBB;">() { </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;div&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;header&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$slots</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">header</span><span style="color:#ABB2BF;">()),</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;main&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$slots</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">default</span><span style="color:#ABB2BF;">()),</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;footer&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$slots</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">footer</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#ABB2BF;">])</span><span style="color:#BBBBBB;">}</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="provide-inject" tabindex="-1"><a class="header-anchor" href="#provide-inject" aria-hidden="true">#</a> Provide / Inject</h2><p>Provide / Inject 可以让父组件与其后代组件直接传输数据，而无需使用 props 逐级传递。其实可以理解为一个自上而下的的数据广播传递。</p><p>父组件通过 <code>provide</code> 选项来提供数据，而子组件则通过 <code>inject</code> 选项来开始使用这些数据。</p><details class="custom-container details"><summary>工作原理图示</summary><p><img src="https://v3.cn.vuejs.org/images/components_provide.png" alt="Provide / Inject 工作原理的图示"></p></details><h3 id="组合式-provide-inject" tabindex="-1"><a class="header-anchor" href="#组合式-provide-inject" aria-hidden="true">#</a> 组合式 Provide / Inject</h3><h4 id="使用-provide-提供数据" tabindex="-1"><a class="header-anchor" href="#使用-provide-提供数据" aria-hidden="true">#</a> 使用 <code>provide</code> 提供数据</h4><p>用 <code>provide</code> 函数可以定义某个 property，第一个参数是字符串类型的名字，第二个是值。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">inject</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">export</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">default</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">setup</span><span style="color:#BBBBBB;">() {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;location&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;North Pole&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;geolocation&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">      longitude</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">90</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> latitude</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">135</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="使用-inject-接收数据" tabindex="-1"><a class="header-anchor" href="#使用-inject-接收数据" aria-hidden="true">#</a> 使用 <code>inject</code> 接收数据</h4><p>用 <code>provide</code> 函数，第一个参数是字符串类型的名字，第二个是默认值。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">inject</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">export</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">default</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">setup</span><span style="color:#BBBBBB;">() {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">userLocation</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">inject</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;location&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;The Universe&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">userGeolocation</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">inject</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;geolocation&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">userLocation,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">userGeolocation</span><span style="color:#BBBBBB;"> }</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="为值添加响应性" tabindex="-1"><a class="header-anchor" href="#为值添加响应性" aria-hidden="true">#</a> 为值添加响应性</h4><p>使用 <code>ref</code> 或 <code>reactive</code> 等函数即可。</p><p>修改 <a href="#%E4%BD%BF%E7%94%A8-provide-%E6%8F%90%E4%BE%9B%E6%95%B0%E6%8D%AE">使用 <code>provide</code> 提供数据</a> 的例子为响应式：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">provide,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">reactive,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">ref</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">export</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">default</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">setup</span><span style="color:#BBBBBB;">() {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">location</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;North Pole&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">geolocation</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">reactive</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{</span></span>
<span class="line"><span style="color:#BBBBBB;">      longitude</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">90</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> latitude</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">135</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;location&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">location)</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;geolocation&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">geolocation)</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="控制-inject-值的可访问性" tabindex="-1"><a class="header-anchor" href="#控制-inject-值的可访问性" aria-hidden="true">#</a> 控制 inject 值的可访问性</h4><p>一种最佳实践：把响应式状态套用 <code>readonly</code> 给 <code>provide</code>，并提供更改响应式状态的函数给 <code>provide</code>。</p><p>改自 <a href="#%E4%B8%BA%E5%80%BC%E6%B7%BB%E5%8A%A0%E5%93%8D%E5%BA%94%E6%80%A7">为值添加响应性</a> 的示例：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">provide,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">reactive,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">readonly,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">ref</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">export</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">default</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">setup</span><span style="color:#BBBBBB;">() {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">location</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;North Pole&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">geolocation</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">reactive</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{</span></span>
<span class="line"><span style="color:#BBBBBB;">      longitude</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">90</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> latitude</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">135</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">updateLocation</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> () </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#61AFEF;">location</span><span style="color:#ABB2BF;">.value</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;South Pole&#39;</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;location&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">readonly</span><span style="color:#ABB2BF;">(location))</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;geolocation&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">readonly</span><span style="color:#ABB2BF;">(geolocation))</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;updateLocation&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">updateLocation)</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="处理边界情况" tabindex="-1"><a class="header-anchor" href="#处理边界情况" aria-hidden="true">#</a> 处理边界情况</h2><p>（待补充）</p><h2 id="过渡与动画" tabindex="-1"><a class="header-anchor" href="#过渡与动画" aria-hidden="true">#</a> 过渡与动画</h2><p>（待补充）</p><h2 id="mixin" tabindex="-1"><a class="header-anchor" href="#mixin" aria-hidden="true">#</a> Mixin</h2><p>（待补充）</p><h2 id="teleport" tabindex="-1"><a class="header-anchor" href="#teleport" aria-hidden="true">#</a> Teleport</h2><p>Teleport 技术可以让子组件在 DOM 树上不属于父组件，以应对一些必须把子组件移开的情况。</p><h3 id="使用-teleport-把元素送走" tabindex="-1"><a class="header-anchor" href="#使用-teleport-把元素送走" aria-hidden="true">#</a> 使用 <code>&lt;teleport&gt;</code> 把元素送走</h3><p>把需要送走的元素套上 <code>&lt;teleport&gt;</code> 内置组件，设置 <code>to</code> attribute 为要接收元素的查询选择器（如 <code>#some-id</code>、<code>[data-teleport]</code>）即可。</p><p>示例：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">click</span><span style="color:#ABB2BF;">=</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#ABB2BF;">modalOpen</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">true</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    Open full screen modal! (With teleport!)</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">teleport</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">to</span><span style="color:#BBBBBB;">=</span><span style="color:#E5C07B;">&quot;body&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-if</span><span style="color:#ABB2BF;">=</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#ABB2BF;">modalOpen</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#BBBBBB;">=</span><span style="color:#E5C07B;">&quot;modal&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">      &lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;I&#39;m a teleported modal! </span></span>
<span class="line"><span style="color:#BBBBBB;">        &lt;</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">click</span><span style="color:#ABB2BF;">=</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#ABB2BF;">modalOpen</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">false</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#BBBBBB;">&gt;Close&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">      &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#E06C75;">teleport</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#E06C75;">export</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">default</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">data</span><span style="color:#BBBBBB;">() { </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> { </span></span>
<span class="line"><span style="color:#BBBBBB;">    modalOpen</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">false</span></span>
<span class="line"><span style="color:#BBBBBB;">  }}</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="控制-teleport-的可用性" tabindex="-1"><a class="header-anchor" href="#控制-teleport-的可用性" aria-hidden="true">#</a> 控制 <code>&lt;teleport&gt;</code> 的可用性</h3><p>可以通过添加 <code>disabled</code> attribute 禁用 <code>&lt;teleport&gt;</code> 的功能，让组件原地渲染。</p><h2 id="响应式" tabindex="-1"><a class="header-anchor" href="#响应式" aria-hidden="true">#</a> 响应式</h2><h3 id="响应式原理与-vue-工作的原理" tabindex="-1"><a class="header-anchor" href="#响应式原理与-vue-工作的原理" aria-hidden="true">#</a> 响应式原理与 Vue 工作的原理</h3><h4 id="什么是响应性" tabindex="-1"><a class="header-anchor" href="#什么是响应性" aria-hidden="true">#</a> 什么是响应性</h4><p>响应性是一种允许我们以声明式的方式去适应变化的编程范例。</p><p>一个很好的例子是 excel 电子表格，若让一个单元格为 <code>=SUM(A1:A2)</code>，这个单元格的数值就会随着 A1、A2 单元格值的变化而动态变化。</p><p>在 JavaScript 里面，我们需要做到以下几点：</p><ol><li>当一个值<strong>被读取时进行追踪</strong>，例如 <code>val1 + val2</code> 会同时读取 <code>val1</code> 和 <code>val2</code>。</li><li>当某个值<strong>改变时进行检测</strong>，例如，当我们赋值 <code>val1 = 3</code> 时。</li><li><strong>重新运行代码</strong>来读取原始值，例如，再次运行 <code>sum = val1 + val2</code> 来更新 <code>sum</code> 的值。</li></ol><h4 id="vue-检测哪些代码正在运行的方法" tabindex="-1"><a class="header-anchor" href="#vue-检测哪些代码正在运行的方法" aria-hidden="true">#</a> Vue 检测哪些代码正在运行的方法</h4><p>Vue 通过一个副作用 (effect) 来<strong>跟踪当前正在运行的函数</strong>。副作用是一个函数的包裹器，使其所跟踪的函数正在运行的时候，该副作用会保持在一个 <code>runningEffects</code> 栈里；当函数运行结束时，则退出该栈。然后通过就可以这个栈，获知哪些函数在运行：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#676F7D;">// 维持一个执行副作用的栈</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">runningEffects</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">createEffect</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">fn</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#676F7D;">// 将传来的 fn 包裹在一个副作用函数中</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">effect</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> () </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#61AFEF;">runningEffects</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">push</span><span style="color:#ABB2BF;">(effect)</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">fn</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#61AFEF;">runningEffects</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">pop</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#676F7D;">// 立即自动执行副作用</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">effect</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>副作用是许多关键功能的起点。例如，组件的渲染和计算属性都在内部使用副作用。</p><h4 id="vue-是如何跟踪变化的" tabindex="-1"><a class="header-anchor" href="#vue-是如何跟踪变化的" aria-hidden="true">#</a> Vue 是如何跟踪变化的</h4><p>Vue 3 中使用了 ES6 引入的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener noreferrer">Proxy<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a> 技术。Proxy 是一个对象，它可以包装另一个对象，并拦截对该对象的任何交互。</p><p>Vue 结合使用 ES6 引入的 Reflect，做了两件事：</p><ol><li>跟踪每个 property 何时被读取，在读取时将当前运行的副作用与 <code>target</code> 和 <code>property</code> 记录在一起，Vue 则可以知道这个 property 是哪些副作用的依赖项。</li><li>跟踪每个 property 何时被设置，在设置前查找哪些副作用依赖于该 property 并执行它们。</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">dinner</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> { meal</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;tacos&#39;</span><span style="color:#BBBBBB;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">handler</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">get</span><span style="color:#BBBBBB;">(</span><span style="color:#D19A66;font-style:italic;">target</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">property</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">receiver</span><span style="color:#BBBBBB;">) {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">track</span><span style="color:#ABB2BF;">(target,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">property)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 在读取时将当前运行的副作用与 `target` 和 `property` 记录在一起。</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Reflect</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">...arguments</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">set</span><span style="color:#BBBBBB;">(</span><span style="color:#D19A66;font-style:italic;">target</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">property</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">value</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">receiver</span><span style="color:#BBBBBB;">) {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">trigger</span><span style="color:#ABB2BF;">(target,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">property)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 在设置前查找哪些副作用依赖于该 property 并执行它们。</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Reflect</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">...arguments</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">proxy</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">new</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Proxy</span><span style="color:#ABB2BF;">(dinner,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">handler)</span></span>
<span class="line"><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">proxy</span><span style="color:#ABB2BF;">.meal)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// tacos</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>从 Vue 3 开始，响应性现在可以在一个<a href="https://github.com/vuejs/vue-next/tree/master/packages/reactivity" target="_blank" rel="noopener noreferrer">独立包<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a>中使用。将 <code>$data</code> 包裹在一个代理中的函数被称为 <code>reactive</code>。我们可以自己直接调用这个函数，允许我们在不需要使用组件的情况下将一个对象包裹在一个响应式代理中。</p><h5 id="被代理的对象" tabindex="-1"><a class="header-anchor" href="#被代理的对象" aria-hidden="true">#</a> 被代理的对象</h5><p>Vue 会在内部记录并跟踪所有已经被转过为响应式的对象，所以<strong>同一个对象总是会返回相同的代理</strong>。</p><p>当从一个响应式代理中访问一个嵌套对象（对象里的对象）时，该对象在被返回之前也被转换为一个代理。</p><h4 id="同时使用原始对象与其响应式版本带来的问题" tabindex="-1"><a class="header-anchor" href="#同时使用原始对象与其响应式版本带来的问题" aria-hidden="true">#</a> 同时使用原始对象与其响应式版本带来的问题</h4><p>对于<strong>原始对象</strong>（原始值不会被包裹），最佳实践是永远不要持有对的引用，而只使用响应式版本。因为会有如下的问题：被代理对象与原始对象不相等 (<code>===</code>)。例如：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">obj</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> {}</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">wrapped</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">new</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Proxy</span><span style="color:#ABB2BF;">(obj,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">handlers)</span></span>
<span class="line"><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(obj</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">===</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">wrapped)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// false</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>其他依赖严格等于比较的操作也会受到影响，例如 <code>.includes()</code> 或 <code>.indexOf()</code>。而只使用响应式版本不会带来这些问题。</p><h4 id="如何让渲染响应变化" tabindex="-1"><a class="header-anchor" href="#如何让渲染响应变化" aria-hidden="true">#</a> 如何让渲染响应变化</h4><p>一个组件的模板被编译成一个渲染函数。渲染函数会创建 <code>VNodes</code>，描述该组件应该如何被渲染。它被包裹在一个副作用中，允许 Vue 在运行时跟踪被“触达”的 property。</p><p>一个渲染函数在概念上与一个计算属性非常相似。Vue 并不确切地追踪依赖关系是如何被使用的，只关注于在函数运行的某个时间点上使用了这些依赖关系。如果这些 property 中的任何一个随后发生了变化，它将触发副作用再次运行，重新运行渲染函数以生成新的 VNodes。然后这些举动被用来对 DOM 进行必要的修改。</p><h3 id="响应式状态" tabindex="-1"><a class="header-anchor" href="#响应式状态" aria-hidden="true">#</a> 响应式状态</h3><h4 id="声明响应式状态" tabindex="-1"><a class="header-anchor" href="#声明响应式状态" aria-hidden="true">#</a> 声明响应式状态</h4><p>可以使用 <code>reactive</code> 方法，向其传入一个对象，以为该对象创建响应式状态。该响应式转换是深层的，它会影响到所有该对象的所有嵌套 property。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>建议只使用响应式 proxy，避免依赖原始对象。具体原因参考 <a href="#%E5%90%8C%E6%97%B6%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%A7%8B%E5%AF%B9%E8%B1%A1%E4%B8%8E%E5%85%B6%E5%93%8D%E5%BA%94%E5%BC%8F%E7%89%88%E6%9C%AC%E5%B8%A6%E6%9D%A5%E7%9A%84%E9%97%AE%E9%A2%98">同时使用原始对象与其响应式版本带来的问题</a>。</p></div><h4 id="响应式状态解构" tabindex="-1"><a class="header-anchor" href="#响应式状态解构" aria-hidden="true">#</a> 响应式状态解构</h4><p>如果对响应式对象使用 ES6 解构，则解构得到的 property 的响应性如果自身不是响应式的，则会丢失响应性：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">reactive</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">book</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">reactive</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{</span></span>
<span class="line"><span style="color:#BBBBBB;">  author</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;Vue Team&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  year</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;2020&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  title</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;Vue 3 Guide&#39;</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">let</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">author,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">title</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">book</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// author 和 title 没有响应性</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlight-line"> </div></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>使用 <code>toRefs</code> 函数可以把响应式对象转换为一个普通的对象，然后让其每个 property 都是指向原始对象相应 property 的 ref。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">reactive,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">toRefs</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">book</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">reactive</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{</span></span>
<span class="line"><span style="color:#BBBBBB;">  author</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;Vue Team&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  year</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;2020&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  title</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;Vue 3 Guide&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">let</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">author,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">title</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">toRefs</span><span style="color:#ABB2BF;">(book)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 转换为一组与 book 相关联的 ref</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">title</span><span style="color:#ABB2BF;">.value</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;Vue 3 Detailed Guide&#39;</span></span>
<span class="line"><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">book</span><span style="color:#ABB2BF;">.title)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// &#39;Vue 3 Detailed Guide&#39;</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="获取响应式对象的只读对象" tabindex="-1"><a class="header-anchor" href="#获取响应式对象的只读对象" aria-hidden="true">#</a> 获取响应式对象的只读对象</h4><p>使用 readonly 函数传入一个响应式对象即可获取其只读对象。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">reactive,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">readonly</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">original</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">reactive</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{ count</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">0</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">copy</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">readonly</span><span style="color:#ABB2BF;">(original)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676F7D;">// 通过 copy 修改 count，将导致失败并出现警告</span></span>
<span class="line"><span style="color:#61AFEF;">copy</span><span style="color:#ABB2BF;">.count</span><span style="color:#E06C75;">++</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 警告: &quot;Set operation on key &#39;count&#39; failed: target is readonly.&quot;</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="响应式引用" tabindex="-1"><a class="header-anchor" href="#响应式引用" aria-hidden="true">#</a> 响应式引用</h3><p>响应式引用本质上也是个响应式对象。</p><h4 id="创建响应式引用" tabindex="-1"><a class="header-anchor" href="#创建响应式引用" aria-hidden="true">#</a> 创建响应式引用</h4><p>使用 <code>ref</code> 函数即可创建包含某个原始值的<strong>响应式引用</strong>（又称 <strong>ref</strong>），<code>ref</code> 函数会用一个响应式对象包裹着原始值，把原始值放到 <code>value</code> property 里。</p><p>示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">ref</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">count</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">.value)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">.value</span><span style="color:#E06C75;">++</span></span>
<span class="line"><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">.value)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 1</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="自动解包" tabindex="-1"><a class="header-anchor" href="#自动解包" aria-hidden="true">#</a> 自动解包</h4><h5 id="渲染上下文自动解包" tabindex="-1"><a class="header-anchor" href="#渲染上下文自动解包" aria-hidden="true">#</a> 渲染上下文自动解包</h5><p>当 ref 作为渲染上下文 (从 <code>setup()</code> 中返回的对象) 上的 property 返回并可以在模板中被访问时，它将<strong>自动浅层次解包</strong>内部值。只有访问嵌套 ref 时需要在模板中添加 <code>.value</code>。</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;{{ </span><span style="color:#ABB2BF;">count</span><span style="color:#BBBBBB;"> }}&lt;/</span><span style="color:#E06C75;">span</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">click</span><span style="color:#ABB2BF;">=</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#ABB2BF;">count</span><span style="color:#E06C75;">++</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#BBBBBB;">&gt;Increment count&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">click</span><span style="color:#ABB2BF;">=</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#61AFEF;">nested</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">.value</span><span style="color:#E06C75;">++</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#BBBBBB;">&gt;Nested Increment count&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">ref</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#E06C75;">export</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">default</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">setup</span><span style="color:#BBBBBB;">() {</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">count</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">        </span><span style="color:#ABB2BF;">count,</span></span>
<span class="line"><span style="color:#BBBBBB;">        nested</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">          </span><span style="color:#ABB2BF;">count</span></span>
<span class="line"><span style="color:#BBBBBB;">        }</span></span>
<span class="line"><span style="color:#BBBBBB;">      }</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h5 id="响应式对象的-property-自动解包" tabindex="-1"><a class="header-anchor" href="#响应式对象的-property-自动解包" aria-hidden="true">#</a> 响应式对象的 property 自动解包</h5><p>当 ref 作为响应式对象（<strong>只能是</strong> <code>Object</code>，不能是 <code>Array</code> 或 <code>Map</code> 等）的 property 被访问或更改时，它会自动解包内部值：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">count</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">state</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">reactive</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{ </span><span style="color:#ABB2BF;">count</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">state</span><span style="color:#ABB2BF;">.count)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 0</span></span>
<span class="line"><span style="color:#61AFEF;">state</span><span style="color:#ABB2BF;">.count</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">1</span></span>
<span class="line"><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">.value)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 1</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="custom-container warning"><p class="custom-container-title">警告</p><p>如果将新的 ref 赋值给现有 ref 的 property，将会<strong>替换旧的 ref</strong>，而不是做值复制！</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">count</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">state</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">reactive</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{ </span><span style="color:#ABB2BF;">count</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">otherCount</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">2</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">state</span><span style="color:#ABB2BF;">.count</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">otherCount</span></span>
<span class="line"><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">state</span><span style="color:#ABB2BF;">.count)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 2，state.count 现在是 otherCount</span></span>
<span class="line"><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">.value)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 1，值没有发生变化</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div><h3 id="响应式计算" tabindex="-1"><a class="header-anchor" href="#响应式计算" aria-hidden="true">#</a> 响应式计算</h3><h4 id="计算值" tabindex="-1"><a class="header-anchor" href="#计算值" aria-hidden="true">#</a> 计算值</h4><p>可以使用 <code>computed</code> 函数创建一个依赖于其他状态的状态。</p><h5 id="不可变-ref-计算值" tabindex="-1"><a class="header-anchor" href="#不可变-ref-计算值" aria-hidden="true">#</a> 不可变 ref 计算值</h5><p>令 <code>computed</code> 函数接受一个函数，返回一个不可变的 ref 对象，ref 的值为函数求得的当前值。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">count</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">plusOne</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">computed</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">() </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">.value</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">plusOne</span><span style="color:#ABB2BF;">.value)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 2</span></span>
<span class="line"><span style="color:#61AFEF;">plusOne</span><span style="color:#ABB2BF;">.value</span><span style="color:#E06C75;">++</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// error</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="可设置的-ref-计算值" tabindex="-1"><a class="header-anchor" href="#可设置的-ref-计算值" aria-hidden="true">#</a> 可设置的 ref 计算值</h5><p>令 <code>computed</code> 函数接受一个 <code>{get: ()=&gt;T, set: (T)=&gt;undefined}</code> 的对象，即可创建一个可写的 ref 对象，ref 的值为函数求得的当前值或设置值。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">count</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">plusOne</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">computed</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">get</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> () </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">.value</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">set</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">val</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> { </span><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">.value</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">val</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">-</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">1</span><span style="color:#BBBBBB;"> }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">plusOne</span><span style="color:#ABB2BF;">.value</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">1</span></span>
<span class="line"><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">.value)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 0</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="调试-computed" tabindex="-1"><a class="header-anchor" href="#调试-computed" aria-hidden="true">#</a> 调试 Computed <span class="badge tip" style="vertical-align:top;"><!--[-->3.2+<!--]--></span></h4><p><code>computed</code> 第二个参数可接受一个 <code>{onTrack: (any)=&gt;undefined, onTrigger: (any)=&gt;undefined}</code> 类型的选项的对象作为第二个参数。</p><p>例如，调试计算值：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">plusOne</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">computed</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">() </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">.value</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">1</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">onTrack</span><span style="color:#BBBBBB;">(</span><span style="color:#D19A66;font-style:italic;">e</span><span style="color:#BBBBBB;">) { </span><span style="color:#676F7D;">// 当 count.value 作为依赖被追踪时触发</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#E06C75;">debugger</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">onTrigger</span><span style="color:#BBBBBB;">(</span><span style="color:#D19A66;font-style:italic;">e</span><span style="color:#BBBBBB;">) { </span><span style="color:#676F7D;">// 当 count.value 被修改时触发</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#E06C75;">debugger</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#676F7D;">// 访问 plusOne，应该触发 onTrack</span></span>
<span class="line"><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">plusOne</span><span style="color:#ABB2BF;">.value)</span></span>
<span class="line"><span style="color:#676F7D;">// 修改 count.value，应该触发 onTrigger</span></span>
<span class="line"><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">.value</span><span style="color:#E06C75;">++</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>onTrack</code> 和 <code>onTrigger</code> 只能在开发模式下工作。</p><h3 id="使用-watcheffect-侦听" tabindex="-1"><a class="header-anchor" href="#使用-watcheffect-侦听" aria-hidden="true">#</a> 使用 <code>watchEffect</code> 侦听</h3><p><code>watchEffect</code> 可以在回调依赖变化时不停地运行一个函数。</p><h4 id="侦听依赖变更" tabindex="-1"><a class="header-anchor" href="#侦听依赖变更" aria-hidden="true">#</a> 侦听依赖变更</h4><p><code>watchEffect</code> 函数可以它立即执行传入的一个函数，同时追踪其依赖，并在其依赖变更时重新运行该函数。</p><p>当 <code>watchEffect</code> 在组件的 <code>setup()</code> 函数或生命周期钩子被调用时，侦听器会被链接到该组件的生命周期，并在组件卸载时自动停止。</p><p>例如，侦听 <code>count</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">count</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">watchEffect</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">() </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">.value))</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 立即执行，输出 0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">() </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">.value</span><span style="color:#E06C75;">++</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 100ms 后依赖被更改，输出 1</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">100</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="停止-watcheffect-的侦听" tabindex="-1"><a class="header-anchor" href="#停止-watcheffect-的侦听" aria-hidden="true">#</a> 停止 <code>watchEffect</code> 的侦听</h5><p>调用 <code>watchEffect</code> 的返回值即可停止侦听：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">stop</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">watchEffect</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">() </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> { </span><span style="color:#676F7D;">/* ... */</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#98C379;">stop</span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 停止侦听</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="回调失效的处理" tabindex="-1"><a class="header-anchor" href="#回调失效的处理" aria-hidden="true">#</a> 回调失效的处理</h4><p>如果让副作用函数会执行一些异步的副作用（如，拿 prop 去 fetch 数据并使用 <code>await</code> 等待结果），待完成异步任务之前，有可能这次执行回调已经不被需要了，也就是失效了。</p><p>回调会在一下情况被判为失效：</p><ul><li>副作用即将重新执行时</li><li>侦听器被停止 (组件卸载、显式停止侦听时)</li></ul><p>一个侦听器被停止但异步任务还在执行的示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">data</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">null</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">stop</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">watchEffect</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">async</span><span style="color:#BBBBBB;"> () </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#61AFEF;">data</span><span style="color:#ABB2BF;">.value</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">await</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">fetchData</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">props</span><span style="color:#ABB2BF;">.id)</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#676F7D;">// 待 fetchData(props.id) 的 Promise 完成，这个回调可能就已经失效了。</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#98C379;">stop</span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 强行停止副作用侦听，但 await fetchData(props.id) 还在等待</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>为了在回调失效时停止操作或释放资源，可以使回调接收一个 <code>onInvalidate</code> 参数。<code>onInvalidate</code> 函数接收一个回调，用于把一个函数注册成当回调失效时的处理函数。在回调的 Promise 被 resolve 之前被注册即可。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">data</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">null</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#98C379;">watchEffect</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">async</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">onInvalidate</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">onInvalidate</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">() </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">/* 应对突然的回调失效的代码... */</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 我们在Promise解析之前注册清除函数</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#61AFEF;">data</span><span style="color:#ABB2BF;">.value</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">await</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">fetchData</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">props</span><span style="color:#ABB2BF;">.id)</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="副作用的刷新时机" tabindex="-1"><a class="header-anchor" href="#副作用的刷新时机" aria-hidden="true">#</a> 副作用的刷新时机</h4><p>Vue 的响应性系统会缓存副作用函数，并异步地刷新它们，这样可以避免同一个 tick 中多个状态改变导致的不必要的重复调用。当一个用户定义的副作用函数进入队列时，默认情况下，会在所有的组件 <code>update</code> <strong>之前</strong>执行。</p><h5 id="修改副作用的刷新时机" tabindex="-1"><a class="header-anchor" href="#修改副作用的刷新时机" aria-hidden="true">#</a> 修改副作用的刷新时机</h5><p>使用 <code>watchEffect</code> 时可以在传入回调后传入一个带有 <code>flush</code> 选项的对象，这个选项支持三个值：</p><ul><li><code>pre</code>（默认）：在所有的组件更新<strong>之前</strong>异步刷新</li><li><code>post</code>：在所有的组件更新<strong>之后</strong>异步刷新</li><li><code>sync</code>：每个更改都强制触发刷新</li></ul><p>也可以使用 <code>watchPostEffect</code> 和 <code>watchSyncEffect</code> 别名也可以用来让代码意图更加明显。<span class="badge tip" style="vertical-align:top;"><!--[-->3.2+<!--]--></span></p><h4 id="侦听器调试" tabindex="-1"><a class="header-anchor" href="#侦听器调试" aria-hidden="true">#</a> 侦听器调试</h4><p>使用 <code>watchEffect</code> 时可以在传入回调后传入一个带有 <code>onTrack</code> 和 <code>onTrigger</code> 选项的对象。类型信息为：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#ABB2BF;">onTrack</span><span style="color:#E06C75;">?:</span><span style="color:#BBBBBB;"> (</span><span style="color:#D19A66;font-style:italic;">event</span><span style="color:#E06C75;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">DebuggerEvent</span><span style="color:#BBBBBB;">) </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">void</span></span>
<span class="line"><span style="color:#ABB2BF;">onTrigger</span><span style="color:#E06C75;">?:</span><span style="color:#BBBBBB;"> (</span><span style="color:#D19A66;font-style:italic;">event</span><span style="color:#E06C75;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">DebuggerEvent</span><span style="color:#BBBBBB;">) </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">void</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><code>onTrack</code> 将在响应式 property 或 ref 作为依赖项被追踪时被调用。</li><li><code>onTrigger</code> 将在依赖项变更导致副作用被触发时被调用。</li></ul><p><code>onTrack</code> 和 <code>onTrigger</code> 只能在开发模式下工作。</p><h3 id="使用-watch-侦听" tabindex="-1"><a class="header-anchor" href="#使用-watch-侦听" aria-hidden="true">#</a> 使用 <code>watch</code> 侦听</h3><p><code>watch</code> 可以清晰地指定要侦听的数据源，并且能获取侦听状态变化前后的值。</p><h4 id="侦听单个数据源" tabindex="-1"><a class="header-anchor" href="#侦听单个数据源" aria-hidden="true">#</a> 侦听单个数据源</h4><p>侦听器数据源可以是返回值的函数（会自动检测依赖关系），也可以直接是 ref：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#676F7D;">// 侦听一个函数</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">state</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">reactive</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{ count</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">0</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> sum</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">0</span><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#98C379;">watch</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#BBBBBB;">  () </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">state</span><span style="color:#ABB2BF;">.count</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">state</span><span style="color:#ABB2BF;">.sum,</span></span>
<span class="line"><span style="color:#BBBBBB;">  (</span><span style="color:#D19A66;font-style:italic;">value</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">prevValue</span><span style="color:#BBBBBB;">) </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">/* ... */</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676F7D;">// 直接侦听ref</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">count</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#98C379;">watch</span><span style="color:#ABB2BF;">(count,</span><span style="color:#BBBBBB;"> (</span><span style="color:#D19A66;font-style:italic;">count</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">prevCount</span><span style="color:#BBBBBB;">) </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#676F7D;">/* ... */</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="侦听多个数据源" tabindex="-1"><a class="header-anchor" href="#侦听多个数据源" aria-hidden="true">#</a> 侦听多个数据源</h4><p>通过传入数据源数组侦听多个数据源。注意，多个同步更改（如在同一个函数里同时改变）只会触发一次侦听器。</p><p>示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">firstName</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">lastName</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">watch</span><span style="color:#ABB2BF;">([firstName,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">lastName],</span><span style="color:#BBBBBB;"> (</span><span style="color:#D19A66;font-style:italic;">newValues</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">prevValues</span><span style="color:#BBBBBB;">) </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(newValues,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">prevValues)</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">firstName</span><span style="color:#ABB2BF;">.value</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;John&#39;</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// logs: [&quot;John&quot;, &quot;&quot;] [&quot;&quot;, &quot;&quot;]</span></span>
<span class="line"><span style="color:#61AFEF;">lastName</span><span style="color:#ABB2BF;">.value</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;Smith&#39;</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// logs: [&quot;John&quot;, &quot;Smith&quot;] [&quot;John&quot;, &quot;&quot;]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>可以设置 <code>flush: &#39;sync&#39;</code> （不推荐）或用 <code>nextTick</code> 等待侦听器在下一步改变之前运行：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">changeValues</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">async</span><span style="color:#BBBBBB;"> () </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#61AFEF;">firstName</span><span style="color:#ABB2BF;">.value</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;John&#39;</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 打印 [&quot;John&quot;, &quot;&quot;] [&quot;&quot;, &quot;&quot;]</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#E06C75;">await</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">nextTick</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#61AFEF;">lastName</span><span style="color:#ABB2BF;">.value</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;Smith&#39;</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 打印 [&quot;John&quot;, &quot;Smith&quot;] [&quot;John&quot;, &quot;&quot;]</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="侦听响应式对象" tabindex="-1"><a class="header-anchor" href="#侦听响应式对象" aria-hidden="true">#</a> 侦听响应式对象</h4><p>侦听一个响应式对象或数组将始终返回该对象的<strong>当前值和上一个状态值的引用</strong>。因此，为了完全侦听深度嵌套的对象和数组，可能需要对其进行深拷贝，否则将返回同一个对象。这可以通过诸如 <a href="https://lodash.com/docs/4.17.15#cloneDeep" target="_blank" rel="noopener noreferrer">lodash.cloneDeep<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a> 这样的实用工具来实现。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">_</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;lodash&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">state</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">reactive</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{</span></span>
<span class="line"><span style="color:#BBBBBB;">  id</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  attributes</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> { name</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;&#39;</span><span style="color:#BBBBBB;"> }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">watch</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#676F7D;">// 深拷贝，否则 state 和 prevState 将完全相同导致错误。</span></span>
<span class="line"><span style="color:#BBBBBB;">  () </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">_</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">cloneDeep</span><span style="color:#ABB2BF;">(state),</span></span>
<span class="line"><span style="color:#BBBBBB;">  (</span><span style="color:#D19A66;font-style:italic;">state</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">prevState</span><span style="color:#BBBBBB;">) </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">attributes</span><span style="color:#ABB2BF;">.name,</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">prevState</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">attributes</span><span style="color:#ABB2BF;">.name)</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">attributes</span><span style="color:#ABB2BF;">.name</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;Alex&#39;</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 日志: &quot;Alex&quot; &quot;&quot;</span></span>
<span class="line"><span style="color:#676F7D;">// 如果没有深拷贝，仅添加 deep: true 的选项深度检测，则会输出 &quot;Alex&quot; &quot;Alex&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="组合式-api-基础" tabindex="-1"><a class="header-anchor" href="#组合式-api-基础" aria-hidden="true">#</a> 组合式 API 基础</h2><p>组合式 API 将同一个逻辑关注点相关代码收集在一起，以减少逻辑关注点。（也就是<strong>逻辑复用</strong>，而不是组件复用）。组合式 API 会以独立函数代替选项式 API 的选项。</p><h3 id="为什么使用组合式-api" tabindex="-1"><a class="header-anchor" href="#为什么使用组合式-api" aria-hidden="true">#</a> 为什么使用组合式 API</h3><p>组件通常都会处理好几个业务逻辑，选项式 API 会导致一大堆业务逻辑关注点不同的代码挤在 <code>data</code>、<code>methods</code> 等各个选项里面。如：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">component</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">data</span><span style="color:#BBBBBB;">(){</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// 业务 A 的数据</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// 业务 B 的数据</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// 业务 C 的数据</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// ...</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">  methods</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// 处理业务 A 的方法</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// 处理业务 D 的方法</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// ...</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  watch</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> { </span><span style="color:#676F7D;">/* ... */</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  computed</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> { </span><span style="color:#676F7D;">/* ... */</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#676F7D;">// ...</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>如果要把业务逻辑提取出来复用是一件极其困难的事情，因为提取出来的逻辑 支持 Vue 的响应式，所以要走很多弯路才可能把业务逻辑提取出来并使用。</p><p>又如果大规模使用 mixin 进行关注点分散则会导致混乱，并且 mixin 对 TypeScript 支持差，使用时都不知道代码来自哪个 mixin，维护起来十分困难。</p><p>而组件 API 可以让相同的业务逻辑合并，防止关注点分散。并且让业务逻辑容易被提取到别的地方复用：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">logic</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">xxx</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 提取出 C 的逻辑，在别的地方也可以用</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">component</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">setup</span><span style="color:#BBBBBB;">(</span><span style="color:#D19A66;font-style:italic;">props</span><span style="color:#BBBBBB;">){</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// 业务 A 的逻辑</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// 业务 B 的逻辑</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">logic</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">props</span><span style="color:#ABB2BF;">.user)</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// 业务 D 的逻辑</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#676F7D;">// ...</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="响应式变量与引用" tabindex="-1"><a class="header-anchor" href="#响应式变量与引用" aria-hidden="true">#</a> 响应式变量与引用</h3><h4 id="响应式变量" tabindex="-1"><a class="header-anchor" href="#响应式变量" aria-hidden="true">#</a> 响应式变量</h4><p>可以通过 <code>ref</code> 函数创建一个响应式变量。<code>ref</code> 将接收参数并将其包裹在一个带有 <code>value</code> property 的对象中返回，然后可以通过该 property 访问或更改响应式变量的值：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">ref</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">counter</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(counter)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// { value: 0 }</span></span>
<span class="line"><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">counter</span><span style="color:#ABB2BF;">.value)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">counter</span><span style="color:#ABB2BF;">.value</span><span style="color:#E06C75;">++</span></span>
<span class="line"><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">counter</span><span style="color:#ABB2BF;">.value)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 1</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="响应式引用-1" tabindex="-1"><a class="header-anchor" href="#响应式引用-1" aria-hidden="true">#</a> 响应式引用</h4><p>可以通过 <code>toRefs</code> 函数通过一个响应式变量创建一个响应式引用。</p><h3 id="setup-选项" tabindex="-1"><a class="header-anchor" href="#setup-选项" aria-hidden="true">#</a> <code>setup</code> 选项</h3><p><code>setup</code> 选项在组件创建之前执行，一旦 props 被解析，<code>setup</code> 选项就会作为组合式 API 的入口。</p><p><code>setup</code> 选项是一个以 <code>props</code> 和 <code>context</code> 为参数的函数。<code>setup</code> 返回的所有内容都会暴露在组件实例中。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p><code>setup</code> 将无法访问以下组件选项：<code>data</code>、<code>computed</code>、<code>methods</code>、<code>refs</code></p></div><h4 id="参数" tabindex="-1"><a class="header-anchor" href="#参数" aria-hidden="true">#</a> 参数</h4><h5 id="props" tabindex="-1"><a class="header-anchor" href="#props" aria-hidden="true">#</a> Props</h5><p><code>setup</code> 函数中的 <code>props</code> 是响应式的，当传入新的 prop 时，它将被更新。</p><div class="custom-container warning"><p class="custom-container-title">警告</p><p>不能使用 ES6 解构 <code>props</code>，会导致 prop 的响应性被消除。</p></div><h6 id="可选的-prop" tabindex="-1"><a class="header-anchor" href="#可选的-prop" aria-hidden="true">#</a> 可选的 prop</h6><p>传入的 props 中如果没有可选的 prop，<code>toRefs</code> 将不会为 title 创建一个响应式引用，而要使用 <code>toRef</code> 替代它。例如：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">toRef</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"><span style="color:#98C379;">setup</span><span style="color:#ABB2BF;">(props)</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">title</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">toRef</span><span style="color:#ABB2BF;">(props,</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;title&#39;</span><span style="color:#ABB2BF;">)</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// title 可能不被传入</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#676F7D;">// ...</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="context" tabindex="-1"><a class="header-anchor" href="#context" aria-hidden="true">#</a> Context</h5><p><code>context</code> 是一个非响应式的对象，暴露了其它可能在 <code>setup</code> 中有用的值：</p><ul><li><code>context.attrs</code>：非 Prop 的 Attribute (非响应式对象，等同于 <code>$attrs</code>)</li><li><code>context.slots</code>：插槽 (非响应式对象，等同于 <code>$slots</code>)</li><li><code>context.emit</code>：事件触发函数 (方法，等同于 <code>$emit</code>)</li><li><code>context.expose</code>：暴露公共 property (函数)</li></ul><div class="custom-container tip"><p class="custom-container-title">提示</p><p><code>context</code> 可以安全地使用 ES6 解构。</p></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p><code>attrs</code> 和 <code>slots</code> 的 property 是非响应式的。如果打算根据 <code>attrs</code> 或 <code>slots</code> 的更改应用副作用，那么应该在 <code>onBeforeUpdate</code> 生命周期钩子中执行此操作。</p></div><h4 id="结合模板使用的注意事项" tabindex="-1"><a class="header-anchor" href="#结合模板使用的注意事项" aria-hidden="true">#</a> 结合模板使用的注意事项</h4><p>如果 setup 返回一个对象，那么该对象的 property 可以在模板中访问到。</p><p>注意，从 <code>setup</code> 返回的响应式变量在模板中访问时是被<strong>自动浅解包</strong>的，不应在模板中使用 <code>.value</code>。</p><h4 id="生命周期钩子-1" tabindex="-1"><a class="header-anchor" href="#生命周期钩子-1" aria-hidden="true">#</a> 生命周期钩子</h4><p>组合式 API 上的生命周期钩子以驼峰式命名，有前缀 <code>on</code>，其他与选项式 API 的名称相同。这些函数接受一个回调，当钩子被组件调用时，该回调将被执行。</p><p>注意，响应式 API 没有选项式 API 的 <code>beforeCreate</code> 与 <code>created</code> 的对应钩子，因为 <code>setup</code> 是围绕这两个生命周期钩子运行的，所以不需要显式地定义它们。</p><p>可用的选项式生命周期钩子：<code>onBeforeMount</code>、<code>onMounted</code>、<code>onBeforeUpdate</code>、<code>onUpdated</code>、<code>onBeforeUnmount</code>、<code>onUnmounted</code>、<code>onErrorCaptured</code>、<code>onRenderTracked</code>、<code>onRenderTriggered</code>、<code>onActivated</code>、<code>onDeactivated</code>。</p><p>示例，绑定时获取用户仓库：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">fetchUserRepositories</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;@/api/repositories&#39;</span></span>
<span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">ref,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">onMounted</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">setup</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">(props)</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">repositories</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">([])</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">getUserRepositories</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">async</span><span style="color:#BBBBBB;"> () </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#61AFEF;">repositories</span><span style="color:#ABB2BF;">.value</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">await</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">fetchUserRepositories</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">props</span><span style="color:#ABB2BF;">.user)</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">onMounted</span><span style="color:#ABB2BF;">(getUserRepositories)</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#ABB2BF;">repositories,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">getUserRepositories</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="返回渲染函数" tabindex="-1"><a class="header-anchor" href="#返回渲染函数" aria-hidden="true">#</a> 返回渲染函数</h4><p><code>setup</code> 可以返回一个渲染函数，该函数可以直接使用在同一作用域中声明的响应式状态：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">h,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">ref,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">reactive</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">export</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">default</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">setup</span><span style="color:#BBBBBB;">() {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">readersNumber</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">book</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">reactive</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{ title</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;Vue 3 Guide&#39;</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> () </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;div&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#61AFEF;">readersNumber</span><span style="color:#ABB2BF;">.value,</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">book</span><span style="color:#ABB2BF;">.title])</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><br><br><br><div class="highlight-line"> </div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h5 id="使用渲染函数时暴露-property" tabindex="-1"><a class="header-anchor" href="#使用渲染函数时暴露-property" aria-hidden="true">#</a> 使用渲染函数时暴露 property</h5><p>若返回一个渲染函数，我们将无法返回 property。不过可以调用 <code>expose</code> 给它传递一个对象，就可以暴露其中定义的 property ，使其可被外部组件实例访问：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">h,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">ref</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"><span style="color:#E06C75;">export</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">default</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">setup</span><span style="color:#BBBBBB;">(</span><span style="color:#D19A66;font-style:italic;">props</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> { </span><span style="color:#D19A66;font-style:italic;">expose</span><span style="color:#BBBBBB;"> }) {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">count</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">expose</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#98C379;">increment</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> () </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">++</span><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">.value</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> () </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;div&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">.value)</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="侦听响应式更改" tabindex="-1"><a class="header-anchor" href="#侦听响应式更改" aria-hidden="true">#</a> 侦听响应式更改</h3><p>可以使用从 Vue 导入的 <code>watch</code> 函数执行类似 <code>watch</code> 的操作。它接受 3 个参数：</p><ol><li>想要侦听的响应式引用或 getter 函数</li><li>接收两个参数（新值与旧值）的回调函数</li><li>可选的配置选项</li></ol><p>示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">ref,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">watch</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">counter</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#98C379;">watch</span><span style="color:#ABB2BF;">(counter,</span><span style="color:#BBBBBB;"> (</span><span style="color:#D19A66;font-style:italic;">newValue</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">oldValue</span><span style="color:#BBBBBB;">) </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;The new counter value is: &#39;</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">counter</span><span style="color:#ABB2BF;">.value)</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="单文件组件" tabindex="-1"><a class="header-anchor" href="#单文件组件" aria-hidden="true">#</a> 单文件组件</h2><p>Vue 单文件组件（又名 <code>*.vue</code> 文件、<strong>SFC</strong>）是一种特殊的文件格式，它允许将 Vue 组件的模板、逻辑与样式封装在单个文件中。</p><p>下面是一个 SFC 示例：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#676F7D;">&lt;!-- 逻辑 --&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#E06C75;">export</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">default</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">data</span><span style="color:#BBBBBB;">() { </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">      greeting</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;Hello World!&#39;</span></span>
<span class="line"><span style="color:#BBBBBB;">  }}</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676F7D;">&lt;!-- 模板 --&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#BBBBBB;">=</span><span style="color:#E5C07B;">&quot;greeting&quot;</span><span style="color:#BBBBBB;">&gt;{{ </span><span style="color:#ABB2BF;">greeting</span><span style="color:#BBBBBB;"> }}&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676F7D;">&lt;!-- 样式 --&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#98C379;">.greeting</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#ABB2BF;">color:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">red</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#ABB2BF;">font-weight:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">bold</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="块" tabindex="-1"><a class="header-anchor" href="#块" aria-hidden="true">#</a> 块</h3><h4 id="语言块" tabindex="-1"><a class="header-anchor" href="#语言块" aria-hidden="true">#</a> 语言块</h4><h5 id="template" tabindex="-1"><a class="header-anchor" href="#template" aria-hidden="true">#</a> <code>&lt;template&gt;</code></h5><p>每个 SFC 只能包含一个顶层 <code>&lt;template&gt;</code> 块，该块会被作为组件的模板使用。</p><h5 id="script" tabindex="-1"><a class="header-anchor" href="#script" aria-hidden="true">#</a> <code>&lt;script&gt;</code></h5><p>每个 SFC 只能包含一个顶层 <code>&lt;script&gt;</code> 块，但可以和 <code>&lt;script setup&gt;</code> 共存。在模块范围下只执行一次。</p><p>一个标准的 JavaScript 模块。其默认导出的内容应该是 Vue 组件选项对象，它要么是一个普通的对象，要么是 defineComponent 的返回值。</p><h5 id="script-setup" tabindex="-1"><a class="header-anchor" href="#script-setup" aria-hidden="true">#</a> <code>&lt;script setup&gt;</code></h5><p>每个 SFC 只能包含一个顶层 <code>&lt;script setup&gt;</code> 块，可以和 <code>&lt;script&gt;</code> 共存。该脚本会被预处理并作为组件的 <code>setup()</code> 函数使用，它会在每个组件实例中都执行一次。</p><p>相比于普通的 <code>&lt;script&gt;</code> 语法，它具有更多优势：</p><ul><li>更少的样板内容，更简洁的代码。</li><li>能够使用纯 Typescript 声明 props 和抛出事件。</li><li>更好的运行时性能 (其模板会被编译成与其同一作用域的渲染函数，没有任何的中间代理)。</li><li>更好的 IDE 类型推断性能 (减少语言服务器从代码中抽离类型的工作)。</li></ul><p>还有更多便于开发的功能，更多细节请参考：<a href="#%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6-script-setup">单文件组件 <code>&lt;script setup&gt;</code></a>。</p><h5 id="style" tabindex="-1"><a class="header-anchor" href="#style" aria-hidden="true">#</a> <code>&lt;style&gt;</code></h5><p>一个 SFC 可以包含多个 <code>&lt;style&gt;</code> 标签。<code>&lt;style&gt;</code> 标签可以通过 scoped 或 module attribute 将样式封装在当前组件内。</p><p>多个不同封装模式的 <code>&lt;style&gt;</code> 标签可以在同一个组件中混用。</p><h5 id="自定义块" tabindex="-1"><a class="header-anchor" href="#自定义块" aria-hidden="true">#</a> 自定义块</h5><p>SFC 允许包含自定义块，对自定义块的处理依赖于 SFC 的工具。</p><h4 id="设置预处理语言" tabindex="-1"><a class="header-anchor" href="#设置预处理语言" aria-hidden="true">#</a> 设置预处理语言</h4><p>所有块都可以通过 <code>lang</code> attribute 声明预处理语言。如在 <code>&lt;script&gt;</code> 块中使用 TypeScript：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">lang</span><span style="color:#BBBBBB;">=</span><span style="color:#E5C07B;">&quot;ts&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#676F7D;">// 使用 TypeScript</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>不同工具链的预处理器的集成方式可能会有些许不同。建议查看相关文档以获取示例：<a href="https://vitejs.dev/guide/features.html#css-pre-processors" target="_blank" rel="noopener noreferrer">Vite<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a>、<a href="https://cli.vuejs.org/guide/css.html#pre-processors" target="_blank" rel="noopener noreferrer">Vue CLI<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a>、<a href="https://vue-loader.vuejs.org/guide/pre-processors.html#using-pre-processors" target="_blank" rel="noopener noreferrer">webpack + vue-loader<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a>。</p></div><h4 id="通过-src-引入外部文件" tabindex="-1"><a class="header-anchor" href="#通过-src-引入外部文件" aria-hidden="true">#</a> 通过 <code>src</code> 引入外部文件</h4><p>除了 <code>&lt;script setup&gt;</code> 的所有块都可以通过 <code>src</code> attribute 声明引入外部文件作为语言块。</p><p>示例：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">src</span><span style="color:#BBBBBB;">=</span><span style="color:#E5C07B;">&quot;./template.html&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">src</span><span style="color:#BBBBBB;">=</span><span style="color:#E5C07B;">&quot;./style.css&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">src</span><span style="color:#BBBBBB;">=</span><span style="color:#E5C07B;">&quot;./script.js&quot;</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="路径解析规则" tabindex="-1"><a class="header-anchor" href="#路径解析规则" aria-hidden="true">#</a> 路径解析规则</h5><p>src 引入所需遵循的路径解析规则与 webpack 模块请求一致，即：</p><ul><li>相对路径需要以 <code>./</code> 开头。</li><li>可以从 npm 依赖中引入资源：<div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#676F7D;">&lt;!-- 从已安装的 &quot;todomvc-app-css&quot; npm 包中引入文件 --&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">src</span><span style="color:#BBBBBB;">=</span><span style="color:#E5C07B;">&quot;todomvc-app-css/index.css&quot;</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><h3 id="单文件组件-script-setup" tabindex="-1"><a class="header-anchor" href="#单文件组件-script-setup" aria-hidden="true">#</a> 单文件组件 <code>&lt;script setup&gt;</code></h3><p>对该块的简介及其优势的介绍在 <a href="#script-setup"><code>&lt;script setup&gt;</code></a>。</p><h4 id="顶层的绑定会被暴露给模板" tabindex="-1"><a class="header-anchor" href="#顶层的绑定会被暴露给模板" aria-hidden="true">#</a> 顶层的绑定会被暴露给模板</h4><p>其任何顶层的绑定会被暴露给模板，例如：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">setup</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#676F7D;">// 变量</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">msg</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;Hello!&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676F7D;">// 函数</span></span>
<span class="line"><span style="color:#56B6C2;">function</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">log</span><span style="color:#BBBBBB;">() { </span><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(msg)</span><span style="color:#BBBBBB;"> }</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">click</span><span style="color:#ABB2BF;">=</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#ABB2BF;">log</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#BBBBBB;">&gt;{{ </span><span style="color:#ABB2BF;">msg</span><span style="color:#BBBBBB;"> }}&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="响应式-1" tabindex="-1"><a class="header-anchor" href="#响应式-1" aria-hidden="true">#</a> 响应式</h4><p>响应式状态需要明确使用<a href="#%E5%93%8D%E5%BA%94%E5%BC%8F">响应式</a> APIs 来创建。ref 值在模板中使用的时候会自动解包。</p><h4 id="使用组件" tabindex="-1"><a class="header-anchor" href="#使用组件" aria-hidden="true">#</a> 使用组件</h4><p>对于驼峰式命名的组件，其 kebab-case 格式同样能在模板中使用。</p><h5 id="递归组件" tabindex="-1"><a class="header-anchor" href="#递归组件" aria-hidden="true">#</a> 递归组件</h5><p>一个单文件组件可以通过它的文件名引用其自身，但这种方式相比于 <code>import</code> 导入的组件优先级会更低。</p><h5 id="命名空间组件" tabindex="-1"><a class="header-anchor" href="#命名空间组件" aria-hidden="true">#</a> 命名空间组件</h5><p>可以使用带点的组件标记，例如 <code>&lt;Foo.Bar&gt;</code> 来引用嵌套在 <code>Foo</code> 对象属性中的 <code>Bar</code> 组件。这在需要从单个文件中导入多个组件的时候非常有用，例如：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">setup</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">*</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">as</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">Form</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;./form-components&#39;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#61AFEF;">Form</span><span style="color:#BBBBBB;">.</span><span style="color:#98C379;">Input</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">    &lt;</span><span style="color:#61AFEF;">Form</span><span style="color:#BBBBBB;">.</span><span style="color:#98C379;">Label</span><span style="color:#BBBBBB;">&gt;label&lt;/</span><span style="color:#61AFEF;">Form</span><span style="color:#BBBBBB;">.</span><span style="color:#98C379;">Label</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;/</span><span style="color:#61AFEF;">Form</span><span style="color:#BBBBBB;">.</span><span style="color:#98C379;">Input</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="声明-props-和-emits" tabindex="-1"><a class="header-anchor" href="#声明-props-和-emits" aria-hidden="true">#</a> 声明 props 和 emits</h4><p>在 <code>&lt;script setup&gt;</code> 中必须使用 <code>defineProps</code> 和 <code>defineEmits</code> API 来声明 props 和 emits，他们接收与其对应选项式 API 相同的值。它们具备完整的类型推断并且在 <code>&lt;script setup&gt;</code> 中<strong>直接可用</strong>。例如：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">setup</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">props</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">defineProps</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{</span></span>
<span class="line"><span style="color:#BBBBBB;">  foo</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">String</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">emit</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">defineEmits</span><span style="color:#ABB2BF;">([</span><span style="color:#E5C07B;">&#39;change&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;delete&#39;</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676F7D;">// setup code</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>defineProps</code> 和 <code>defineEmits</code> 只是编译器宏，仅在 <code>&lt;script setup&gt;</code> 中才能使用。他们会随着 <code>&lt;script setup&gt;</code> 一同被编译掉。因此，传入的选项不能引用在 setup 作用域中的变量。这样做会引起编译错误。但是，它可以引用导入的绑定，因为它们也在模块范围内。</p><h5 id="仅限类型的-props-emit-声明" tabindex="-1"><a class="header-anchor" href="#仅限类型的-props-emit-声明" aria-hidden="true">#</a> 仅限类型的 props/emit 声明 <span class="badge tip" style="vertical-align:top;" title="TypeScript"><!--[-->TS<!--]--></span></h5><p>props 和 emits 可以使用传递字面量类型做为参数给 <code>defineProps</code> 和 <code>defineEmits</code> 来声明：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">props</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">defineProps</span><span style="color:#BBBBBB;">&lt;{</span></span>
<span class="line"><span style="color:#BBBBBB;">  foo</span><span style="color:#E06C75;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">string</span></span>
<span class="line"><span style="color:#BBBBBB;">  bar</span><span style="color:#E06C75;">?:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">number</span></span>
<span class="line"><span style="color:#BBBBBB;">}&gt;</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">emit</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">defineEmits</span><span style="color:#BBBBBB;">&lt;{</span></span>
<span class="line"><span style="color:#BBBBBB;">  (</span><span style="color:#D19A66;font-style:italic;">e</span><span style="color:#E06C75;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;change&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">id</span><span style="color:#E06C75;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">number</span><span style="color:#BBBBBB;">)</span><span style="color:#E06C75;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">void</span></span>
<span class="line"><span style="color:#BBBBBB;">  (</span><span style="color:#D19A66;font-style:italic;">e</span><span style="color:#E06C75;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;update&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">value</span><span style="color:#E06C75;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">string</span><span style="color:#BBBBBB;">)</span><span style="color:#E06C75;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">void</span></span>
<span class="line"><span style="color:#BBBBBB;">}&gt;</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这两种声明方式同时只能使用一种。</p><div class="custom-container warning"><p class="custom-container-title">警告</p><p>当前对于对于 TypeScript 的导入类型，编译器的推断结果会是 <code>null</code>，因为编译器没有外部文件的信息，将来可能会实现。</p></div><h6 id="仅限类型的默认值" tabindex="-1"><a class="header-anchor" href="#仅限类型的默认值" aria-hidden="true">#</a> 仅限类型的默认值</h6><p><code>defineProps</code> 仅限类型时不能声明默认值。可以使用 <code>withDefaults</code> 编译器宏为加上默认值：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">interface</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Props</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  msg</span><span style="color:#E06C75;">?:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">string</span></span>
<span class="line"><span style="color:#BBBBBB;">  labels</span><span style="color:#E06C75;">?:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">string</span><span style="color:#ABB2BF;">[]</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">props</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">withDefaults</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">defineProps</span><span style="color:#BBBBBB;">&lt;</span><span style="color:#61AFEF;">Props</span><span style="color:#BBBBBB;">&gt;</span><span style="color:#ABB2BF;">(),</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  msg</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;hello&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">labels</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> () </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">&#39;one&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;two&#39;</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="script-setup-的绑定" tabindex="-1"><a class="header-anchor" href="#script-setup-的绑定" aria-hidden="true">#</a> <code>&lt;script setup&gt;</code> 的绑定</h4><p>使用 <code>&lt;script setup&gt;</code> 的组件是默认关闭的，组件的公开实例（如模板 ref）不会暴露任何在 <code>&lt;script setup&gt;</code> 中声明的绑定（变量）。</p><h5 id="暴露-script-setup-的绑定" tabindex="-1"><a class="header-anchor" href="#暴露-script-setup-的绑定" aria-hidden="true">#</a> 暴露 <code>&lt;script setup&gt;</code> 的绑定</h5><p>使用 <code>defineExpose</code> 编译器宏（无需导入）即可指定要暴露出去的属性：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">setup</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">ref</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">a</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">1</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">b</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">2</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">defineExpose</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{ </span><span style="color:#ABB2BF;">a,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">b</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>通过公开实例获取 ref 会和在普通实例中一样被<strong>自动解包</strong>。</p><h4 id="获取组件的-slots-和-attrs" tabindex="-1"><a class="header-anchor" href="#获取组件的-slots-和-attrs" aria-hidden="true">#</a> 获取组件的 <code>slots</code> 和 <code>attrs</code></h4><p>可以分别用 <code>useSlots</code> 和 <code>useAttrs</code> 函数获取 <code>slots</code> 和 <code>attrs</code>：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">setup</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">useSlots,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">useAttrs</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">slots</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">useSlots</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">attrs</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">useAttrs</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="在-script-setup-顶层直接使用-await" tabindex="-1"><a class="header-anchor" href="#在-script-setup-顶层直接使用-await" aria-hidden="true">#</a> 在 <code>&lt;script setup&gt;</code> 顶层直接使用 <code>await</code></h4><p><code>&lt;script setup&gt;</code> 中可以使用顶层 <code>await</code>。<code>&lt;script setup&gt;</code> 被编译成 <code>async setup()</code>。</p><div class="custom-container warning"><p class="custom-container-title">警告</p><p><code>async setup()</code> 必须与 <code>Suspense</code> 组合使用，<code>Suspense</code> 目前还是处于实验阶段的特性。因此不建议使用。</p></div><h3 id="单文件组件-style" tabindex="-1"><a class="header-anchor" href="#单文件组件-style" aria-hidden="true">#</a> 单文件组件 <code>&lt;style&gt;</code></h3><h4 id="style-scoped" tabindex="-1"><a class="header-anchor" href="#style-scoped" aria-hidden="true">#</a> <code>&lt;style scoped&gt;</code></h4><p>当 <code>&lt;style&gt;</code> 标签带有 <code>scoped</code> attribute 的时候，它的 CSS 只会应用到当前组件的元素上。称为<strong>作用域样式</strong>。</p><p>此时，父组件的样式将不会泄露到子组件当中。不过，子组件的根节点会同时被父、子组件的作用域样式影响。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>插槽的内容被视为是父组件所持有并传递进来的，在使用作用域样式时只会被父元素影响。</p></div><h5 id="影响子组件的样式" tabindex="-1"><a class="header-anchor" href="#影响子组件的样式" aria-hidden="true">#</a> 影响子组件的样式</h5><p>可以通过使用伪类 <code>:deep()</code> （<strong>深度选择器</strong>）控制子组件样式。本质上是去除了组件的 attribute 限定。如：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">scoped</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#676F7D;">/* 若子组件有类名为 b 的元素 */</span></span>
<span class="line"><span style="color:#98C379;">.a</span><span style="color:#BBBBBB;"> :deep(</span><span style="color:#98C379;">.b</span><span style="color:#BBBBBB;">) {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#676F7D;">/* ... */</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="控制插槽的内容" tabindex="-1"><a class="header-anchor" href="#控制插槽的内容" aria-hidden="true">#</a> 控制插槽的内容</h5><p>可以通过使用伪类 <code>:slotted()</code> （<strong>插槽选择器</strong>）控制插槽内容样式。如：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">scoped</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">:slotted(</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">) {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#ABB2BF;">color:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">red</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="让其中的一些样式影响到全局" tabindex="-1"><a class="header-anchor" href="#让其中的一些样式影响到全局" aria-hidden="true">#</a> 让其中的一些样式影响到全局</h5><p>可以通过另建一个 <code>&lt;style&gt;</code> 或可以使用 <code>:global </code> （<strong>全局</strong>） 伪类来实现让其中的一些样式影响到全局：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">scoped</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">:global(</span><span style="color:#98C379;">.red</span><span style="color:#BBBBBB;">) {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#ABB2BF;">color:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">red</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>通过 v-html 创建的 DOM 内容不会被 <code>&lt;style scoped&gt;</code> 的样式影响，但可以使用伪类 <code>:deep()</code> 来设置其样式。</p></div><h5 id="style-scoped-原理" tabindex="-1"><a class="header-anchor" href="#style-scoped-原理" aria-hidden="true">#</a> <code>&lt;style scoped&gt;</code> 原理</h5><p>当 SFC 使用 <code>&lt;style scoped&gt;</code> 时，会给模板带上特殊的 attribute，如：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">scoped</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#98C379;">.example</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">color:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">red</span><span style="color:#BBBBBB;">; }</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#BBBBBB;">=</span><span style="color:#E5C07B;">&quot;example&quot;</span><span style="color:#BBBBBB;">&gt;hi&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>会被转换为：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#98C379;">.example</span><span style="color:#BBBBBB;">[</span><span style="color:#98C379;">data-v-f3f3eg9</span><span style="color:#BBBBBB;">] { </span><span style="color:#ABB2BF;">color:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">red</span><span style="color:#BBBBBB;">; }</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">class</span><span style="color:#BBBBBB;">=</span><span style="color:#E5C07B;">&quot;example&quot;</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">data-v-f3f3eg9</span><span style="color:#BBBBBB;">&gt;hi&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="对性能的影响以及解决办法" tabindex="-1"><a class="header-anchor" href="#对性能的影响以及解决办法" aria-hidden="true">#</a> 对性能的影响以及解决办法</h5><p>结合作用域样式（即 attribute 选择器）使用时会慢很多倍。如果使用 <code>class</code> 或者 <code>id</code> 来替代几乎就可以避免此类性能的损失。</p><h4 id="style-module" tabindex="-1"><a class="header-anchor" href="#style-module" aria-hidden="true">#</a> <code>&lt;style module&gt;</code></h4><p><code>&lt;style module&gt;</code> 标签会被编译为 <a href="https://github.com/css-modules/css-modules" target="_blank" rel="noopener noreferrer">CSS Modules<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a> 并且将生成的 CSS 类作为 <code>$style</code> 对象的键暴露给组件。 （待补充）</p><h3 id="让状态驱动-css-动态绑定-css-属性" tabindex="-1"><a class="header-anchor" href="#让状态驱动-css-动态绑定-css-属性" aria-hidden="true">#</a> 让状态驱动 CSS / 动态绑定 CSS 属性</h3><p>SFC 的 <code>&lt;style&gt;</code> 标签可以通过 <code>v-bind</code> 这一 CSS 函数将 CSS 的值关联到动态的组件状态上，支持 JavaScript 表达式 （需要用引号包裹起来）同样也适用于 <code>&lt;script setup&gt;</code>。</p><p>例如：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">setup</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">theme</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> { color</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;red&#39;</span><span style="color:#BBBBBB;"> }</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;hello&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">scoped</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#E06C75;">p</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">color:</span><span style="color:#BBBBBB;"> v-bind(</span><span style="color:#E5C07B;">&#39;theme.color&#39;</span><span style="color:#BBBBBB;">); }</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="sfc-工作原理" tabindex="-1"><a class="header-anchor" href="#sfc-工作原理" aria-hidden="true">#</a> SFC 工作原理</h3><p>Vue SFC 由 <a href="https://github.com/vuejs/vue-next/tree/master/packages/compiler-sfc" target="_blank" rel="noopener noreferrer">@vue/compiler-sfc<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a> 预编译为标准的 JavaScript 与 CSS。</p><p><code>&lt;template&gt;</code> 块的内容会被提取出来并传递给 @vue/compiler-dom，预编译为 JavaScript 的渲染函数，并附属到导出的组件上作为其 <code>render</code> 选项。</p><p>编译后的 SFC 的 JavaScript 是一个标准的 ES Module。因此可以像模块一样导入 SFC。</p><p>其 CSS 通常在开发过程中作为原生 <code>&lt;style&gt;</code> 标签注入以支持热更新。对于生产环境，它们可能会被提取并合并到单个 CSS 文件中。</p><h3 id="为什么要使用-sfc" tabindex="-1"><a class="header-anchor" href="#为什么要使用-sfc" aria-hidden="true">#</a> 为什么要使用 SFC</h3><p>个人理由：把组件的每个部分都集成到一个文件，写起来特别舒服。</p><p>参考官方文档：<a href="https://v3.cn.vuejs.org/guide/single-file-component.html#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8-sfc" target="_blank" rel="noopener noreferrer">单文件组件 | Vue.js #为什么要使用-sfc<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a></p><h2 id="渲染函数" tabindex="-1"><a class="header-anchor" href="#渲染函数" aria-hidden="true">#</a> 渲染函数</h2><p>在实际使用中，模板会被编译成渲染函数再被使用。渲染函数是实际元素的一个蓝图。</p><h3 id="什么情况下要用到渲染函数" tabindex="-1"><a class="header-anchor" href="#什么情况下要用到渲染函数" aria-hidden="true">#</a> 什么情况下要用到渲染函数</h3><p>渲染函数可以脱离模板的局限性，以便更好地控制渲染结果。</p><p>例如，我们需要一个能根据 prop 生成 <code>h1~h6</code> 元素的标题组件：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">anchored-heading</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">:level</span><span style="color:#ABB2BF;">=</span><span style="color:#E5C07B;">&quot;1&quot;</span><span style="color:#BBBBBB;">&gt;Hello world!&lt;/</span><span style="color:#E06C75;">anchored-heading</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>因为模板是固定的，不允许动态更改标签名，所以只能通过 <code>v-if</code> 指令控制选用的模板，十分麻烦：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-if</span><span style="color:#ABB2BF;">=</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#ABB2BF;">level</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">===</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">1</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#BBBBBB;">&gt;&lt;</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-else-if</span><span style="color:#ABB2BF;">=</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#ABB2BF;">level</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">===</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">2</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#BBBBBB;">&gt;&lt;</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">h3</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-else-if</span><span style="color:#ABB2BF;">=</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#ABB2BF;">level</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">===</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">3</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#BBBBBB;">&gt;&lt;</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">h3</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">h4</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-else-if</span><span style="color:#ABB2BF;">=</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#ABB2BF;">level</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">===</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">4</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#BBBBBB;">&gt;&lt;</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">h4</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">h5</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-else-if</span><span style="color:#ABB2BF;">=</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#ABB2BF;">level</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">===</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">5</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#BBBBBB;">&gt;&lt;</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">h5</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">  &lt;</span><span style="color:#E06C75;">h6</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">v-else-if</span><span style="color:#ABB2BF;">=</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#ABB2BF;">level</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">===</span><span style="color:#BBBBBB;"> </span><span style="color:#C678DD;">6</span><span style="color:#BBBBBB;">&quot;</span><span style="color:#BBBBBB;">&gt;&lt;</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">slot</span><span style="color:#BBBBBB;">&gt;&lt;/</span><span style="color:#E06C75;">h6</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>渲染函数则允许动态修改标签名：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> { </span><span style="color:#61AFEF;">createApp</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">h</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">Vue</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">app</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;">{}</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">export</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">default</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">render</span><span style="color:#BBBBBB;">() { </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">h</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#E5C07B;">&#39;h&#39;</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">+</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.level,</span><span style="color:#BBBBBB;"> {}</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$slots</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">default</span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">// 包含其子节点的数组</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#ABB2BF;">)</span><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#BBBBBB;">  props</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    level</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">      type</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Number</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> required</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">true</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"><span style="color:#BBBBBB;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#BBBBBB;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="渲染函数-h" tabindex="-1"><a class="header-anchor" href="#渲染函数-h" aria-hidden="true">#</a> 渲染函数 <code>h</code></h3><p>渲染函数 <code>h</code> 会返回一个虚拟节点（VNode），虚拟节点包括了该节点的信息以及其子节点的描述信息。</p><h4 id="渲染函数-h-的参数" tabindex="-1"><a class="header-anchor" href="#渲染函数-h-的参数" aria-hidden="true">#</a> 渲染函数 <code>h</code> 的参数</h4><p>渲染函数接收三个参数：<code>type</code>，<code>props</code> 和 <code>children</code></p><h5 id="type-参数" tabindex="-1"><a class="header-anchor" href="#type-参数" aria-hidden="true">#</a> <code>type</code> 参数</h5><ul><li><p><strong>类型</strong>：<code>String | Object | Function | null</code></p></li><li><p><strong>描述</strong>：</p><p>要生成的虚拟节点的类型。可以是 HTML 标签名、组件、异步组件或函数式组件，如果为 null 则为注释。</p></li></ul><h5 id="props-参数" tabindex="-1"><a class="header-anchor" href="#props-参数" aria-hidden="true">#</a> <code>props</code> 参数</h5><p>（可选）</p><ul><li><p><strong>类型</strong>：<code>Object</code></p></li><li><p><strong>描述</strong>：</p><p>传入的 attribute。</p></li></ul><h5 id="children-参数" tabindex="-1"><a class="header-anchor" href="#children-参数" aria-hidden="true">#</a> <code>children</code> 参数</h5><ul><li><p><strong>类型</strong>：<code>String | Array&lt;VNode&gt; | Object</code></p></li><li><p><strong>描述</strong>：</p><p>如果不为对象，则会被作为默认插槽的内容。如果为对象，应该为 <a href="#%E5%9C%A8-javascript-%E9%87%8C%E8%AF%BB%E5%8F%96%E6%8F%92%E6%A7%BD"><code>vm.$slot</code></a> 的形式，即对象的每个 property 应该为生成其对应的插槽内容的一个函数。</p><p>示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#98C379;">render</span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">Panel,</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">null</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    header</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$slots</span><span style="color:#ABB2BF;">.header,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">default</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> (</span><span style="color:#D19A66;font-style:italic;">props</span><span style="color:#BBBBBB;">) </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">children</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$slots</span><span style="color:#ABB2BF;">.default</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">?</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$slots</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">default</span><span style="color:#ABB2BF;">(props)</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">      </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">children</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">concat</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;div&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;Extra child&#39;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#BBBBBB;">    }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">footer</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> ()</span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;">{ </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&quot;hello&quot;</span><span style="color:#BBBBBB;"> }</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ul><h3 id="渲染函数-h-的返回值" tabindex="-1"><a class="header-anchor" href="#渲染函数-h-的返回值" aria-hidden="true">#</a> 渲染函数 <code>h</code> 的返回值</h3><p>可以返回 <code>VNode | Array&lt;VNode&gt; | String | null</code>。</p><div class="custom-container warning"><p class="custom-container-title">警告</p><p>组件树中的每个 VNode 必须是<strong>唯一的</strong>。不能出现同一 VNode 存在组件树中不同位置的情况：</p><p>一个错误示范，<code>myParagraphVNode</code> 重复出现：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#98C379;">render</span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">myParagraphVNode</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;p&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;hi&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;div&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#ABB2BF;">myParagraphVNode,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">myParagraphVNode</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#ABB2BF;">])</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><div class="highlight-line"> </div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果真的需要重复很多次的元素/组件，可以使用工厂函数来实现。</p></div><h3 id="使用-javascript-代替模板功能" tabindex="-1"><a class="header-anchor" href="#使用-javascript-代替模板功能" aria-hidden="true">#</a> 使用 JavaScript 代替模板功能</h3><h4 id="v-if-和-v-for" tabindex="-1"><a class="header-anchor" href="#v-if-和-v-for" aria-hidden="true">#</a> <code>v-if</code> 和 <code>v-for</code></h4><p>这些都可以在渲染函数中用 JavaScript 的 <code>if/else</code> 和 <code>map()</code> 来重写。</p><h4 id="v-model-指令在渲染函数的写法" tabindex="-1"><a class="header-anchor" href="#v-model-指令在渲染函数的写法" aria-hidden="true">#</a> <code>v-model</code> 指令在渲染函数的写法</h4><p><code>v-model</code> 指令扩展为 <code>modelValue</code> 和 <code>onUpdate:modelValue</code> 在模板编译过程中，我们必须自己提供这些 prop：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#BBBBBB;">props</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">&#39;modelValue&#39;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#BBBBBB;">emits</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">&#39;update:modelValue&#39;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#98C379;">render</span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">h</span><span style="color:#ABB2BF;">(SomeComponent,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    modelValue</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.modelValue,</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#E5C07B;">&#39;onUpdate:modelValue&#39;</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">value</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">$emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;update:modelValue&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">value)</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="v-on-指令在渲染函数的写法" tabindex="-1"><a class="header-anchor" href="#v-on-指令在渲染函数的写法" aria-hidden="true">#</a> <code>v-on</code> 指令在渲染函数的写法</h4><p><code>v-on</code> 指令绑定的事件在 <code>h</code> 的 <a href="#props-%E5%8F%82%E6%95%B0"><code>props</code> 参数</a> 内应当以驼峰命名法并在前面加上 <code>on</code> 的形式命名。例如，<code>v-on:click</code> 应当被命名为 <code>onClick</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#98C379;">render</span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;div&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">    </span><span style="color:#98C379;">onClick</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">$event</span><span style="color:#BBBBBB;"> </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;clicked&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">$event</span><span style="color:#ABB2BF;">.target)</span></span>
<span class="line"><span style="color:#BBBBBB;">  }</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="事件修饰符在渲染函数的写法" tabindex="-1"><a class="header-anchor" href="#事件修饰符在渲染函数的写法" aria-hidden="true">#</a> 事件修饰符在渲染函数的写法</h5><p>应使用驼峰命名法将修饰符拼接在事件名的后面。如，<code>@mouseover.once.capture</code> 应当写成 <code>onMouseoverOnceCapture</code>。</p><h4 id="渲染函数的插槽处理" tabindex="-1"><a class="header-anchor" href="#渲染函数的插槽处理" aria-hidden="true">#</a> 渲染函数的插槽处理</h4><p>可以通过 <code>this.$slots</code> 访问静态插槽的内容，每个插槽都是一个 VNode 数组。</p><h4 id="渲染函数处理-component" tabindex="-1"><a class="header-anchor" href="#渲染函数处理-component" aria-hidden="true">#</a> 渲染函数处理 <code>&lt;component&gt;</code></h4><p><code>&lt;component&gt;</code> 当迁移到 <code>render</code> 函数时，应被丢弃。</p><p>在底层实现里，模板使用 <code>resolveDynamicComponent()</code> 来实现 <code>is</code> attribute。该函数按名称解析组件，其接收一个字符串参数，如果组件找得到则返回找到的组件，否则返回接收的参数。</p><p>但通常情况下，让 <code>h</code> 的第一个参数动态变化即可达到 <code>&lt;component&gt;</code> 的效果。</p><h4 id="让-vnode-应用自定义指令" tabindex="-1"><a class="header-anchor" href="#让-vnode-应用自定义指令" aria-hidden="true">#</a> 让 VNode 应用自定义指令</h4><p>通过 <code>resolveDirective</code> 获取已注册的自定义指令，然后通过 <code>withDirectives</code> 附加到 VNode 上即可。</p><p><code>withDirectives</code> 的第一个参数是要附加到的目标 VNode，第二个是一个数组： <code>[directive, value?, arg?, modifiers?]</code>，其中</p><ul><li><code>directive</code>：指令本身</li><li><code>value</code>：指令的值</li><li><code>arg</code>：指令的参数</li><li><code>modifiers</code>：指令的修饰符</li></ul><p>示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#BBBBBB;"> { </span><span style="color:#ABB2BF;">withDirectives,</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">resolveDirective</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">from</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;vue&#39;</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">foo</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">resolveDirective</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;foo&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">bar</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">resolveDirective</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;bar&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">withDirectives</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;div&#39;</span><span style="color:#ABB2BF;">),</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#ABB2BF;">[foo,</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.x],</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#ABB2BF;">[bar,</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">.y]</span></span>
<span class="line"><span style="color:#ABB2BF;">])</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="渲染函数使用内置组件" tabindex="-1"><a class="header-anchor" href="#渲染函数使用内置组件" aria-hidden="true">#</a> 渲染函数使用内置组件</h4><p>除了 <code>&lt;component&gt;</code> 和 <code>&lt;slot&gt;</code> 不是真正的组件，其他内置组件默认并没有被全局注册。因此我们也无法通过 <code>resolveComponent</code> 或 <code>resolveDynamicComponent</code> 访问它们。</p><p>我们应该自行导入它们：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> { </span><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">KeepAlive</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Teleport</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">Transition</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">TransitionGroup</span><span style="color:#BBBBBB;"> } </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">Vue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">render</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">()</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#E06C75;">return</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">h</span><span style="color:#ABB2BF;">(Transition,</span><span style="color:#BBBBBB;"> { mode</span><span style="color:#ABB2BF;">:</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;out-in&#39;</span><span style="color:#BBBBBB;"> }</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#676F7D;">/* ... */</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="使用-jsx-简化渲染函数的写法" tabindex="-1"><a class="header-anchor" href="#使用-jsx-简化渲染函数的写法" aria-hidden="true">#</a> 使用 JSX 简化渲染函数的写法</h3><p>vue 官方维护的 <a href="https://github.com/vuejs/babel-plugin-jsx#installation" target="_blank" rel="noopener noreferrer">Bable JSX 插件<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a>。使用 JSX 可以让渲染函数看起来更直观。</p><h3 id="函数式组件" tabindex="-1"><a class="header-anchor" href="#函数式组件" aria-hidden="true">#</a> 函数式组件</h3><p>函数式组件是一种自身没有任何状态的组件，只有一个渲染函数。它们在渲染过程中不会创建组件实例，并跳过常规的组件生命周期。优点是渲染开销低。</p><p>函数应该接收两个参数 <code>(props, context)</code>，<code>context</code> 包含三个 property：<code>attrs</code>、<code>emit</code> 和 <code>slots</code>。它们分别相当于实例的 <code>$attrs</code>、<code>$emit</code> 和 <code>$slots</code> 这几个 property。</p><p>我们可以把 <code>props</code> 和 <code>emits</code> 作为 property 加入，以达到定义它们的目的：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#56B6C2;">const</span><span style="color:#BBBBBB;"> </span><span style="color:#98C379;">FunctionalComponent</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> (</span><span style="color:#D19A66;font-style:italic;">props</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> </span><span style="color:#D19A66;font-style:italic;">context</span><span style="color:#BBBBBB;">) </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#676F7D;">// ...</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span></span>
<span class="line"><span style="color:#61AFEF;">FunctionalComponent</span><span style="color:#ABB2BF;">.props</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">&#39;value&#39;</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#61AFEF;">FunctionalComponent</span><span style="color:#ABB2BF;">.emits</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">&#39;click&#39;</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>函数式组件可以像普通组件一样被注册和消费。如果将一个函数作为第一个参数传入 <code>h</code>，它将会被当作一个函数式组件来对待。</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>falsy 不是 <code>false</code>，详见 <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Falsy" target="_blank" rel="noopener noreferrer">MDN<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a> 的解释。 <a href="#fnref1" class="footnote-backref">↩︎</a> <a href="#fnref1:1" class="footnote-backref">↩︎</a> <a href="#fnref1:2" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p>truthy 不是 <code>true</code>，详见 <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Truthy" target="_blank" rel="noopener noreferrer">MDN<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a> 的解释。 <a href="#fnref2" class="footnote-backref">↩︎</a> <a href="#fnref2:1" class="footnote-backref">↩︎</a> <a href="#fnref2:2" class="footnote-backref">↩︎</a></p></li></ol></section><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!--]--></div>
    <script type="module" src="/static_blog/assets/app.45bb761f.js" defer></script>
  </body>
</html>
