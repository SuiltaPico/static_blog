<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.32">
    <title>JavaScript 异步参考 | Suilta Pico 的博客</title><meta name="description" content="">
    <link rel="modulepreload" href="/static_blog/assets/app.45bb761f.js"><link rel="modulepreload" href="/static_blog/assets/index.html.bf2dd900.js"><link rel="modulepreload" href="/static_blog/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/static_blog/assets/index.html.f8d7db5d.js">
    <link rel="stylesheet" href="/static_blog/assets/style.b62f34f8.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/static_blog/" class=""><!----><span class="site-name">Suilta Pico 的博客</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-dark-button" title="切换大日御舆"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p class="sidebar-item sidebar-heading">JavaScript 异步参考 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/javascript/%E5%BC%82%E6%AD%A5/#javascript-是单线程的" class="router-link-active router-link-exact-active sidebar-item" aria-label="JavaScript 是单线程的"><!--[--><!--]--> JavaScript 是单线程的 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/javascript/%E5%BC%82%E6%AD%A5/#同步与异步-javascript" class="router-link-active router-link-exact-active sidebar-item" aria-label="同步与异步 JavaScript"><!--[--><!--]--> 同步与异步 JavaScript <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/javascript/%E5%BC%82%E6%AD%A5/#同步-javascript" class="router-link-active router-link-exact-active sidebar-item" aria-label="同步 JavaScript"><!--[--><!--]--> 同步 JavaScript <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/javascript/%E5%BC%82%E6%AD%A5/#异步-javascript" class="router-link-active router-link-exact-active sidebar-item" aria-label="异步 JavaScript"><!--[--><!--]--> 异步 JavaScript <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/static_blog/computer/javascript/%E5%BC%82%E6%AD%A5/#异步回调" class="router-link-active router-link-exact-active sidebar-item" aria-label="异步回调"><!--[--><!--]--> 异步回调 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/javascript/%E5%BC%82%E6%AD%A5/#promises" class="router-link-active router-link-exact-active sidebar-item" aria-label="Promises"><!--[--><!--]--> Promises <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/static_blog/computer/javascript/%E5%BC%82%E6%AD%A5/#promises-对比回调" class="router-link-active router-link-exact-active sidebar-item" aria-label="Promises 对比回调"><!--[--><!--]--> Promises 对比回调 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="javascript-异步参考" tabindex="-1"><a class="header-anchor" href="#javascript-异步参考" aria-hidden="true">#</a> JavaScript 异步参考</h1><h2 id="javascript-是单线程的" tabindex="-1"><a class="header-anchor" href="#javascript-是单线程的" aria-hidden="true">#</a> JavaScript 是单线程的</h2><p>JavaScript 即使有多个内核，也只能在单一线程上运行多个任务。通过 Web workers 可以把一些任务交给一个名为 worker 的单独的线程，这样就可以同时运行多个 JavaScript 代码块，避免阻塞。</p><p>web workers 有许多局限性，其中主要的一个问题是他们不能访问 DOM。</p><h2 id="同步与异步-javascript" tabindex="-1"><a class="header-anchor" href="#同步与异步-javascript" aria-hidden="true">#</a> 同步与异步 JavaScript</h2><h3 id="同步-javascript" tabindex="-1"><a class="header-anchor" href="#同步-javascript" aria-hidden="true">#</a> 同步 JavaScript</h3><p>JavaScript 每一个操作在执行的时候，其他任何事情都没有发生，即网页的渲染暂停。因此任何时候只能做一件事情, 只有一个主线程。</p><h3 id="异步-javascript" tabindex="-1"><a class="header-anchor" href="#异步-javascript" aria-hidden="true">#</a> 异步 JavaScript</h3><p>在 JavaScript 代码中，通常会遇到两种异步编程风格：老派回调，新派 promise。</p><h4 id="异步回调" tabindex="-1"><a class="header-anchor" href="#异步回调" aria-hidden="true">#</a> 异步回调</h4><p>异步回调其实就是函数，只不过是作为参数传递给那些在后台执行的其他函数. 当那些后台运行的代码结束，就调用回调函数，通知工作已经完成，或者执行其他的事情。</p><p>举个例子，异步回调就是 <code>addEventListener()</code> 第二个参数：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#61AFEF;">btn</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;click&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#BBBBBB;"> () </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#BBBBBB;"> {</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#98C379;">alert</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;You clicked me!&#39;</span><span style="color:#ABB2BF;">)</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#56B6C2;">let</span><span style="color:#BBBBBB;"> </span><span style="color:#ABB2BF;">pElem</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#61AFEF;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">createElement</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">&#39;p&#39;</span><span style="color:#ABB2BF;">)</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#61AFEF;">pElem</span><span style="color:#ABB2BF;">.textContent</span><span style="color:#BBBBBB;"> </span><span style="color:#E06C75;">=</span><span style="color:#BBBBBB;"> </span><span style="color:#E5C07B;">&#39;This is a newly-added paragraph.&#39;</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"><span style="color:#BBBBBB;">  </span><span style="color:#61AFEF;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">body</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">appendChild</span><span style="color:#ABB2BF;">(pElem)</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"><span style="color:#BBBBBB;">}</span><span style="color:#ABB2BF;">)</span><span style="color:#BBBBBB;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>回调函数会在包含它的函数的某个地方异步执行，包含函数负责在合适的时候执行回调函数。</p><p>不是所有的回调函数都是异步的，例如使用 <code>Array.prototype.forEach()</code> 来遍历数组。</p><h4 id="promises" tabindex="-1"><a class="header-anchor" href="#promises" aria-hidden="true">#</a> Promises</h4><p>Promises 是新派的异步代码，现代的 web APIs 经常用到。promise 是表示异步操作完成或失败的对象。它代表了一种中间状态。本质上，这是浏览器说“我保证尽快给您答复”的方式，因此得名“promise”。</p><p><code>then()</code> 块包含一个回调函数，如果前一个操作成功，该函数将运行，并且每个回调都接收前一个成功操作的结果作为输入。每个 <code>.then()</code> 块返回另一个 promise，这意味着可以将多个 <code>.then()</code> 块链接到另一个块上，这样就可以依次执行多个异步操作。</p><p>如果其中任何一个 <code>then()</code> 块失败，则在末尾运行 <code>catch()</code> 块——与同步 <code>try...catch</code> 类似，<code>catch()</code> 提供了一个错误对象，可用来报告发生的错误类型。</p><h4 id="promises-对比回调" tabindex="-1"><a class="header-anchor" href="#promises-对比回调" aria-hidden="true">#</a> Promises 对比回调</h4><p>Promise 是专门为异步操作而设计的，与旧式回调相比具有许多优点:</p><ul><li>可以使用多个 <code>then()</code> 操作将多个异步操作链接在一起，并将其中一个操作的结果作为输入传递给下一个操作。这种链接方式对回调来说要难得多，会使回调以混乱的“末日金字塔”告终。 (也称为回调地狱)。</li><li>Promise 总是严格按照它们放置在事件队列中的顺序调用。</li><li>错误处理要好得多——所有的错误都由块末尾的一个 <code>.catch()</code> 块处理，而不是在“金字塔”的每一层单独处理。</li></ul><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!--]--></div>
    <script type="module" src="/static_blog/assets/app.45bb761f.js" defer></script>
  </body>
</html>
